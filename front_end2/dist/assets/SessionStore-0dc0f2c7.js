var d=Object.defineProperty;var h=(t,s,e)=>s in t?d(t,s,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[s]=e;var n=(t,s,e)=>(h(t,typeof s!="symbol"?s+"":s,e),e);import{ar as u,as as f,m as k,at as c}from"./index-fe3c5ff0.js";function l(){const{width:t}=u(),s=f();return{eleWidth:k(()=>t.value-s.LeftPanelWidth-s.RightPanelWidth)}}function a(t){return typeof t=="string"}function o(t){return Array.isArray(t)}const T=()=>{console.log("loadingStart"),window.$loading.start()},L=()=>{console.log("loadingFinish"),setTimeout(()=>{window.$loading.finish()})},S=()=>{setTimeout(()=>{window.$loading.error()})};class m{constructor(){n(this,"isGroup",!1);n(this,"attr",{h:60})}}const p=c({id:"useTrackStore",state:()=>({trackList:[],targetTrack:{hoverId:void 0,selectId:[]}}),getters:{getTrackList(){return this.trackList},getTargetTrack(){return this.targetTrack},getTargetTrackInstance(){const t=this.getTargetTrack.selectId[0];if(t)return this.getTrackList.find(s=>s.key===t)}},actions:{setSessionWidth(){const{eleWidth:t}=l();this.trackList.map(s=>{s.attr.w===0&&(s.attr.w=t.value)})},fetchTargetIndex(t){const s=t||this.getTargetTrack.selectId.length&&this.getTargetTrack.selectId[0]||void 0;if(console.log(s),!s)return-1;const e=this.trackList.findIndex(r=>r.key===s);if(console.log(e),e!==-1)return e;{const r=this.getTrackList.length;for(let i=0;i<r;i++)if(this.getTrackList[i].isGroup){for(const g of this.getTrackList[i].groupList)if(g.id===s)return i}}return-1},addTrackList(t){if(t instanceof Array){t.forEach(s=>{this.addTrackList(s)});return}this.trackList.push(t)},setTargetSelectTrack(t,s=!1){if(!this.targetTrack.selectId.find(e=>e===t)){if(!t){this.targetTrack.selectId=[];return}if(s){if(a(t)){this.targetTrack.selectId.push(t);return}if(o(t)){this.targetTrack.selectId.push(...t);return}}else{if(a(t)){this.targetTrack.selectId=[t];return}if(o(t)){this.targetTrack.selectId=t;return}}}},findTrackById(t){return this.trackList.find(s=>s.key===t)},removeTrackList(t){try{if(!t.length)return;T(),t.forEach(s=>{console.log(s);const e=this.fetchTargetIndex(s);console.log(e),e!==-1&&this.trackList.splice(e,1)}),L();return}catch{S()}}}}),w=c({id:"useSessionStore",state:()=>({sessionList:[],targetedSession:[]}),getters:{getSessionList(){return this.sessionList},getTargtedSession(){return this.sessionList.filter(t=>this.targetedSession.includes(t.key))}},actions:{getTrackById(t){return p().getTrackList.find(e=>e.key===t)},getSessionTracks(t){const s=[];Array.isArray(t)&&(t=t[0]);for(const e of t.trackIds){console.log("ppppppp",e);const r=this.getTrackById(e);r&&s.push(r)}return s},getSessionConfigs(t){const s=this.sessionList.find(e=>e.key===t);return s?s.sessionConfig:{type:"",maxTrackNum:0}},addSession(t){this.sessionList.push(t)},removeSession(t){const s=this.sessionList.indexOf(t);s!==-1&&this.sessionList.splice(s,1)},addSessionTrack(t,s){t.trackIds.push(s)},removeSessionTrack(t,s){const e=this.sessionList.find(r=>r.key===t);e.trackIds=e.trackIds.filter(r=>r!=s)}}});export{m as P,w as a,p as u};
