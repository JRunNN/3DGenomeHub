import{d as C,K as F,r as o,b as j,c as s,h as l,g as r,an as c,F as m,j as B,t as v,A as M,x as z,C as A,L as N}from"./index-fe3c5ff0.js";const S={key:0,class:"flex items-center justify-center w-full"},V={key:0},U=["onDragover","onDragenter","onDragleave","onDrop"],K=N('<svg class="w-8 h-8 mb-4 text-gray-500 dark:text-gray-400" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 16"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 13h3a3 3 0 0 0 0-6h-.025A5.56 5.56 0 0 0 16 6.5 5.5 5.5 0 0 0 5.207 5.021C5.137 5.017 5.071 5 5 5a4 4 0 0 0 0 8h2.167M10 15V6m0 0L8 8m2-2 2 2"></path></svg><p class="mb-2 text-2xl text-gray-500 dark:text-gray-400"><span class="font-semibold">Click to upload</span> or drag and drop</p><p class="text-xs text-gray-500 dark:text-gray-400">Support bedpe file (MAX. number of chromatin loops: 5000) </p>',3),L=[K],I={class:"flex flex-col w-3/5"},O={key:1},T={class:"mt-8 items-center justify-between p-4 mb-4 space-y-4 bg-white rounded dark:bg-gray-700 sm:flex sm:space-y-0"},$={class:"text-2xl font-bold text-gray-900 dark:text-white"},E={class:"text-sm text-gray-500 dark:text-gray-400"},q=C({__name:"Uploads",setup(P){const x=z();F();const i=o(!1),y=e=>{i.value=!0,e.preventDefault()},b=e=>{i.value=!0},_=e=>{i.value=!1},u=o(""),p=o(""),k=e=>{i.value=!1;const t=e.dataTransfer.files;t.length>0&&(a.value=t[0],a.value&&(u.value=a.value.name,p.value=(a.value.size/1024).toFixed(2)+" KB"),h())},a=o(null),d=o(!1),n=o({percent:0,notation:"Start File uploading"});o(null);const g=e=>{a.value=e.target.files[0],a.value&&(u.value=a.value.name,p.value=(a.value.size/1024).toFixed(2)+" KB"),h()},f=o(""),h=()=>{if(!a.value)return;d.value=!0;const e=new FormData;e.append("file",a.value),A.post("/api/annotations/upload/",e,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:t=>{n.value.percent=parseInt(Math.round(t.loaded*100/t.total))/10}}).then(t=>{d.value=!1,f.value=t.data.task_id,console.log(t),n.value.percent=100,n.value.notation="Uploading completed"}).catch(t=>{console.error("Upload failed:",t),d.value=!1})},w=e=>{x.push(`task-info/${e}`)};return(e,t)=>{const D=j("n-progress");return s(),l(m,null,[(s(),l("div",S,[r("label",{for:"dropzone-file",onClick:g,class:"bg-white flex flex-col items-center justify-center w-full h-64 border-2 border-gray-300 border-dashed rounded-lg cursor-pointer bg-gray-50 dark:hover:bg-bray-800 dark:bg-gray-700 hover:bg-gray-100 dark:border-gray-600 dark:hover:border-gray-500 dark:hover:bg-gray-600"},[d.value?(s(),l(m,{key:1},[r("div",I,[B(D,{class:"w-16",type:"line","indicator-placement":"inside",percentage:n.value.percent,processing:"",height:40,"border-radius":8,"fill-border-radius":0},null,8,["percentage"])]),r("div",null,v(n.value.notation),1)],64)):(s(),l("div",V,[r("div",{class:"flex flex-col items-center justify-center pt-5 pb-6",onDragover:c(y,["prevent"]),onDragenter:c(b,["prevent"]),onDragleave:c(_,["prevent"]),onDrop:c(k,["prevent"])},L,40,U),r("input",{id:"dropzone-file",type:"file",class:"hidden",onChange:g},null,32)]))])])),n.value.percent===100?(s(),l("div",O,[r("div",T,[r("div",null,[r("div",$,v(u.value),1),r("div",E,v(p.value),1)]),r("button",{onClick:t[0]||(t[0]=R=>w(f.value)),class:"inline-flex items-center justify-center w-full px-5 py-3 text-base font-medium text-center text-white rounded-lg sm:w-auto bg-primary-700 hover:bg-primary-800 focus:ring-4 focus:ring-primary-300 dark:focus:ring-primary-900"}," Annotate ")])])):M("",!0)],64)}}});export{q as default};
