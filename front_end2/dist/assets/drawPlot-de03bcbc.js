(function(){"use strict";var he=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ra(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var An={},na=e=>e?typeof Symbol.observable=="symbol"&&typeof e[Symbol.observable]=="function"?e===e[Symbol.observable]():typeof e["@@observable"]=="function"?e===e["@@observable"]():!1:!1,xe={},Ge={};Object.defineProperty(Ge,"__esModule",{value:!0}),Ge.DefaultSerializer=Ge.extendSerializer=void 0;function ia(e,t){const r=e.deserialize.bind(e),n=e.serialize.bind(e);return{deserialize(i){return t.deserialize(i,r)},serialize(i){return t.serialize(i,n)}}}Ge.extendSerializer=ia;const Tn={deserialize(e){return Object.assign(Error(e.message),{name:e.name,stack:e.stack})},serialize(e){return{__error_marker:"$$error",message:e.message,name:e.name,stack:e.stack}}},oa=e=>e&&typeof e=="object"&&"__error_marker"in e&&e.__error_marker==="$$error";Ge.DefaultSerializer={deserialize(e){return oa(e)?Tn.deserialize(e):e},serialize(e){return e instanceof Error?Tn.serialize(e):e}},Object.defineProperty(xe,"__esModule",{value:!0}),xe.serialize=xe.deserialize=xe.registerSerializer=void 0;const Bn=Ge;let Ft=Bn.DefaultSerializer;function aa(e){Ft=Bn.extendSerializer(Ft,e)}xe.registerSerializer=aa;function sa(e){return Ft.deserialize(e)}xe.deserialize=sa;function fa(e){return Ft.serialize(e)}xe.serialize=fa;var Me={},ie={};Object.defineProperty(ie,"__esModule",{value:!0}),ie.$worker=ie.$transferable=ie.$terminate=ie.$events=ie.$errors=void 0,ie.$errors=Symbol("thread.errors"),ie.$events=Symbol("thread.events"),ie.$terminate=Symbol("thread.terminate"),ie.$transferable=Symbol("thread.transferable"),ie.$worker=Symbol("thread.worker"),Object.defineProperty(Me,"__esModule",{value:!0}),Me.Transfer=Me.isTransferDescriptor=void 0;const In=ie;function la(e){return!(!e||typeof e!="object")}function ua(e){return e&&typeof e=="object"&&e[In.$transferable]}Me.isTransferDescriptor=ua;function ha(e,t){if(!t){if(!la(e))throw Error();t=[e]}return{[In.$transferable]:!0,send:e,transferables:t}}Me.Transfer=ha;var Nn={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.WorkerMessageType=e.MasterMessageType=void 0,function(t){t.cancel="cancel",t.run="run"}(e.MasterMessageType||(e.MasterMessageType={})),function(t){t.error="error",t.init="init",t.result="result",t.running="running",t.uncaughtError="uncaughtError"}(e.WorkerMessageType||(e.WorkerMessageType={}))})(Nn);var wr={};Object.defineProperty(wr,"__esModule",{value:!0});const ca=function(){const t=typeof self<"u"&&typeof Window<"u"&&self instanceof Window;return!!(typeof self<"u"&&self.postMessage&&!t)},da=function(t,r){self.postMessage(t,r)},pa=function(t){const r=i=>{t(i.data)},n=()=>{self.removeEventListener("message",r)};return self.addEventListener("message",r),n};wr.default={isWorkerRuntime:ca,postMessageToMaster:da,subscribeToMasterMessages:pa},function(e){var t=he&&he.__awaiter||function(y,C,k,z){function V(P){return P instanceof k?P:new k(function(W){W(P)})}return new(k||(k=Promise))(function(P,W){function Ne(Y){try{me(z.next(Y))}catch(Ot){W(Ot)}}function Re(Y){try{me(z.throw(Y))}catch(Ot){W(Ot)}}function me(Y){Y.done?P(Y.value):V(Y.value).then(Ne,Re)}me((z=z.apply(y,C||[])).next())})},r=he&&he.__importDefault||function(y){return y&&y.__esModule?y:{default:y}};Object.defineProperty(e,"__esModule",{value:!0}),e.expose=e.isWorkerRuntime=e.Transfer=e.registerSerializer=void 0;const n=r(na),i=xe,o=Me,l=Nn,s=r(wr);var d=xe;Object.defineProperty(e,"registerSerializer",{enumerable:!0,get:function(){return d.registerSerializer}});var u=Me;Object.defineProperty(e,"Transfer",{enumerable:!0,get:function(){return u.Transfer}}),e.isWorkerRuntime=s.default.isWorkerRuntime;let c=!1;const w=new Map,_=y=>y&&y.type===l.MasterMessageType.cancel,b=y=>y&&y.type===l.MasterMessageType.run,x=y=>n.default(y)||$(y);function $(y){return y&&typeof y=="object"&&typeof y.subscribe=="function"}function N(y){return o.isTransferDescriptor(y)?{payload:y.send,transferables:y.transferables}:{payload:y,transferables:void 0}}function A(){const y={type:l.WorkerMessageType.init,exposed:{type:"function"}};s.default.postMessageToMaster(y)}function B(y){const C={type:l.WorkerMessageType.init,exposed:{type:"module",methods:y}};s.default.postMessageToMaster(C)}function I(y,C){const{payload:k,transferables:z}=N(C),V={type:l.WorkerMessageType.error,uid:y,error:i.serialize(k)};s.default.postMessageToMaster(V,z)}function E(y,C,k){const{payload:z,transferables:V}=N(k),P={type:l.WorkerMessageType.result,uid:y,complete:C?!0:void 0,payload:z};s.default.postMessageToMaster(P,V)}function T(y,C){const k={type:l.WorkerMessageType.running,uid:y,resultType:C};s.default.postMessageToMaster(k)}function O(y){try{const C={type:l.WorkerMessageType.uncaughtError,error:i.serialize(y)};s.default.postMessageToMaster(C)}catch(C){console.error(`Not reporting uncaught error back to master thread as it occured while reporting an uncaught error already.
Latest error:`,C,`
Original error:`,y)}}function S(y,C,k){return t(this,void 0,void 0,function*(){let z;try{z=C(...k)}catch(P){return I(y,P)}const V=x(z)?"observable":"promise";if(T(y,V),x(z)){const P=z.subscribe(W=>E(y,!1,i.serialize(W)),W=>{I(y,i.serialize(W)),w.delete(y)},()=>{E(y,!0),w.delete(y)});w.set(y,P)}else try{const P=yield z;E(y,!0,i.serialize(P))}catch(P){I(y,i.serialize(P))}})}function R(y){if(!s.default.isWorkerRuntime())throw Error("expose() called in the master thread.");if(c)throw Error("expose() called more than once. This is not possible. Pass an object to expose() if you want to expose multiple functions.");if(c=!0,typeof y=="function")s.default.subscribeToMasterMessages(C=>{b(C)&&!C.method&&S(C.uid,y,C.args.map(i.deserialize))}),A();else if(typeof y=="object"&&y){s.default.subscribeToMasterMessages(k=>{b(k)&&k.method&&S(k.uid,y[k.method],k.args.map(i.deserialize))});const C=Object.keys(y).filter(k=>typeof y[k]=="function");B(C)}else throw Error(`Invalid argument passed to expose(). Expected a function or an object, got: ${y}`);s.default.subscribeToMasterMessages(C=>{if(_(C)){const k=C.uid,z=w.get(k);z&&(z.unsubscribe(),w.delete(k))}})}e.expose=R,typeof self<"u"&&typeof self.addEventListener=="function"&&s.default.isWorkerRuntime()&&(self.addEventListener("error",y=>{setTimeout(()=>O(y.error||y),250)}),self.addEventListener("unhandledrejection",y=>{const C=y.reason;C&&typeof C.message=="string"&&setTimeout(()=>O(C),250)})),typeof process<"u"&&typeof process.on=="function"&&s.default.isWorkerRuntime()&&(process.on("uncaughtException",y=>{setTimeout(()=>O(y),250)}),process.on("unhandledRejection",y=>{y&&typeof y.message=="string"&&setTimeout(()=>O(y),250)}))}(An);var mr=ra(An);const ga=mr.expose;mr.registerSerializer,mr.Transfer;function zt(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function ba(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Rn(e){let t,r,n;e.length!==2?(t=zt,r=(s,d)=>zt(e(s),d),n=(s,d)=>e(s)-d):(t=e===zt||e===ba?e:_a,r=e,n=e);function i(s,d,u=0,c=s.length){if(u<c){if(t(d,d)!==0)return c;do{const w=u+c>>>1;r(s[w],d)<0?u=w+1:c=w}while(u<c)}return u}function o(s,d,u=0,c=s.length){if(u<c){if(t(d,d)!==0)return c;do{const w=u+c>>>1;r(s[w],d)<=0?u=w+1:c=w}while(u<c)}return u}function l(s,d,u=0,c=s.length){const w=i(s,d,u,c-1);return w>u&&n(s[w-1],d)>-n(s[w],d)?w-1:w}return{left:i,center:l,right:o}}function _a(){return 0}function wa(e){return e===null?NaN:+e}const ma=Rn(zt).right;Rn(wa).center;var On=ma;const ya=Math.sqrt(50),xa=Math.sqrt(10),va=Math.sqrt(2);function Ut(e,t,r){const n=(t-e)/Math.max(0,r),i=Math.floor(Math.log10(n)),o=n/Math.pow(10,i),l=o>=ya?10:o>=xa?5:o>=va?2:1;let s,d,u;return i<0?(u=Math.pow(10,-i)/l,s=Math.round(e*u),d=Math.round(t*u),s/u<e&&++s,d/u>t&&--d,u=-u):(u=Math.pow(10,i)*l,s=Math.round(e/u),d=Math.round(t/u),s*u<e&&++s,d*u>t&&--d),d<s&&.5<=r&&r<2?Ut(e,t,r*2):[s,d,u]}function Ea(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];const n=t<e,[i,o,l]=n?Ut(t,e,r):Ut(e,t,r);if(!(o>=i))return[];const s=o-i+1,d=new Array(s);if(n)if(l<0)for(let u=0;u<s;++u)d[u]=(o-u)/-l;else for(let u=0;u<s;++u)d[u]=(o-u)*l;else if(l<0)for(let u=0;u<s;++u)d[u]=(i+u)/-l;else for(let u=0;u<s;++u)d[u]=(i+u)*l;return d}function yr(e,t,r){return t=+t,e=+e,r=+r,Ut(e,t,r)[2]}function ka(e,t,r){t=+t,e=+e,r=+r;const n=t<e,i=n?yr(t,e,r):yr(e,t,r);return(n?-1:1)*(i<0?1/-i:i)}function $a(e,t){let r;if(t===void 0)for(const n of e)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);else{let n=-1;for(let i of e)(i=t(i,++n,e))!=null&&(r<i||r===void 0&&i>=i)&&(r=i)}return r}function Ca(e,t){let r;if(t===void 0)for(const n of e)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);else{let n=-1;for(let i of e)(i=t(i,++n,e))!=null&&(r>i||r===void 0&&i>=i)&&(r=i)}return r}function xr(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function Mn(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function lt(){}var ut=.7,Lt=1/ut,We="\\s*([+-]?\\d+)\\s*",ht="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ce="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Sa=/^#([0-9a-f]{3,8})$/,Aa=new RegExp(`^rgb\\(${We},${We},${We}\\)$`),Ta=new RegExp(`^rgb\\(${ce},${ce},${ce}\\)$`),Ba=new RegExp(`^rgba\\(${We},${We},${We},${ht}\\)$`),Ia=new RegExp(`^rgba\\(${ce},${ce},${ce},${ht}\\)$`),Na=new RegExp(`^hsl\\(${ht},${ce},${ce}\\)$`),Ra=new RegExp(`^hsla\\(${ht},${ce},${ce},${ht}\\)$`),Fn={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};xr(lt,ct,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:zn,formatHex:zn,formatHex8:Oa,formatHsl:Ma,formatRgb:Un,toString:Un});function zn(){return this.rgb().formatHex()}function Oa(){return this.rgb().formatHex8()}function Ma(){return Zn(this).formatHsl()}function Un(){return this.rgb().formatRgb()}function ct(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=Sa.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?Ln(t):r===3?new Q(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?Pt(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?Pt(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Aa.exec(e))?new Q(t[1],t[2],t[3],1):(t=Ta.exec(e))?new Q(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Ba.exec(e))?Pt(t[1],t[2],t[3],t[4]):(t=Ia.exec(e))?Pt(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Na.exec(e))?Vn(t[1],t[2]/100,t[3]/100,1):(t=Ra.exec(e))?Vn(t[1],t[2]/100,t[3]/100,t[4]):Fn.hasOwnProperty(e)?Ln(Fn[e]):e==="transparent"?new Q(NaN,NaN,NaN,0):null}function Ln(e){return new Q(e>>16&255,e>>8&255,e&255,1)}function Pt(e,t,r,n){return n<=0&&(e=t=r=NaN),new Q(e,t,r,n)}function Fa(e){return e instanceof lt||(e=ct(e)),e?(e=e.rgb(),new Q(e.r,e.g,e.b,e.opacity)):new Q}function vr(e,t,r,n){return arguments.length===1?Fa(e):new Q(e,t,r,n??1)}function Q(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}xr(Q,vr,Mn(lt,{brighter(e){return e=e==null?Lt:Math.pow(Lt,e),new Q(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?ut:Math.pow(ut,e),new Q(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Q(Fe(this.r),Fe(this.g),Fe(this.b),Dt(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Pn,formatHex:Pn,formatHex8:za,formatRgb:Dn,toString:Dn}));function Pn(){return`#${ze(this.r)}${ze(this.g)}${ze(this.b)}`}function za(){return`#${ze(this.r)}${ze(this.g)}${ze(this.b)}${ze((isNaN(this.opacity)?1:this.opacity)*255)}`}function Dn(){const e=Dt(this.opacity);return`${e===1?"rgb(":"rgba("}${Fe(this.r)}, ${Fe(this.g)}, ${Fe(this.b)}${e===1?")":`, ${e})`}`}function Dt(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Fe(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function ze(e){return e=Fe(e),(e<16?"0":"")+e.toString(16)}function Vn(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new fe(e,t,r,n)}function Zn(e){if(e instanceof fe)return new fe(e.h,e.s,e.l,e.opacity);if(e instanceof lt||(e=ct(e)),!e)return new fe;if(e instanceof fe)return e;e=e.rgb();var t=e.r/255,r=e.g/255,n=e.b/255,i=Math.min(t,r,n),o=Math.max(t,r,n),l=NaN,s=o-i,d=(o+i)/2;return s?(t===o?l=(r-n)/s+(r<n)*6:r===o?l=(n-t)/s+2:l=(t-r)/s+4,s/=d<.5?o+i:2-o-i,l*=60):s=d>0&&d<1?0:l,new fe(l,s,d,e.opacity)}function Ua(e,t,r,n){return arguments.length===1?Zn(e):new fe(e,t,r,n??1)}function fe(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}xr(fe,Ua,Mn(lt,{brighter(e){return e=e==null?Lt:Math.pow(Lt,e),new fe(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?ut:Math.pow(ut,e),new fe(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,i=2*r-n;return new Q(Er(e>=240?e-240:e+120,i,n),Er(e,i,n),Er(e<120?e+240:e-120,i,n),this.opacity)},clamp(){return new fe(jn(this.h),Vt(this.s),Vt(this.l),Dt(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Dt(this.opacity);return`${e===1?"hsl(":"hsla("}${jn(this.h)}, ${Vt(this.s)*100}%, ${Vt(this.l)*100}%${e===1?")":`, ${e})`}`}}));function jn(e){return e=(e||0)%360,e<0?e+360:e}function Vt(e){return Math.max(0,Math.min(1,e||0))}function Er(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}var kr=e=>()=>e;function La(e,t){return function(r){return e+r*t}}function Pa(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}function Da(e){return(e=+e)==1?Hn:function(t,r){return r-t?Pa(t,r,e):kr(isNaN(t)?r:t)}}function Hn(e,t){var r=t-e;return r?La(e,r):kr(isNaN(e)?t:e)}var Gn=function e(t){var r=Da(t);function n(i,o){var l=r((i=vr(i)).r,(o=vr(o)).r),s=r(i.g,o.g),d=r(i.b,o.b),u=Hn(i.opacity,o.opacity);return function(c){return i.r=l(c),i.g=s(c),i.b=d(c),i.opacity=u(c),i+""}}return n.gamma=e,n}(1);function Va(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,n=t.slice(),i;return function(o){for(i=0;i<r;++i)n[i]=e[i]*(1-o)+t[i]*o;return n}}function Za(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function ja(e,t){var r=t?t.length:0,n=e?Math.min(r,e.length):0,i=new Array(n),o=new Array(r),l;for(l=0;l<n;++l)i[l]=Sr(e[l],t[l]);for(;l<r;++l)o[l]=t[l];return function(s){for(l=0;l<n;++l)o[l]=i[l](s);return o}}function Ha(e,t){var r=new Date;return e=+e,t=+t,function(n){return r.setTime(e*(1-n)+t*n),r}}function Zt(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function Ga(e,t){var r={},n={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?r[i]=Sr(e[i],t[i]):n[i]=t[i];return function(o){for(i in r)n[i]=r[i](o);return n}}var $r=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Cr=new RegExp($r.source,"g");function Wa(e){return function(){return e}}function Ya(e){return function(t){return e(t)+""}}function qa(e,t){var r=$r.lastIndex=Cr.lastIndex=0,n,i,o,l=-1,s=[],d=[];for(e=e+"",t=t+"";(n=$r.exec(e))&&(i=Cr.exec(t));)(o=i.index)>r&&(o=t.slice(r,o),s[l]?s[l]+=o:s[++l]=o),(n=n[0])===(i=i[0])?s[l]?s[l]+=i:s[++l]=i:(s[++l]=null,d.push({i:l,x:Zt(n,i)})),r=Cr.lastIndex;return r<t.length&&(o=t.slice(r),s[l]?s[l]+=o:s[++l]=o),s.length<2?d[0]?Ya(d[0].x):Wa(t):(t=d.length,function(u){for(var c=0,w;c<t;++c)s[(w=d[c]).i]=w.x(u);return s.join("")})}function Sr(e,t){var r=typeof t,n;return t==null||r==="boolean"?kr(t):(r==="number"?Zt:r==="string"?(n=ct(t))?(t=n,Gn):qa:t instanceof ct?Gn:t instanceof Date?Ha:Za(t)?Va:Array.isArray(t)?ja:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?Ga:Zt)(e,t)}function Xa(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}function Ka(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function jt(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}function Ye(e){return e=jt(Math.abs(e)),e?e[1]:NaN}function Ja(e,t){return function(r,n){for(var i=r.length,o=[],l=0,s=e[0],d=0;i>0&&s>0&&(d+s+1>n&&(s=Math.max(1,n-d)),o.push(r.substring(i-=s,i+s)),!((d+=s+1)>n));)s=e[l=(l+1)%e.length];return o.reverse().join(t)}}function Qa(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var es=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Ht(e){if(!(t=es.exec(e)))throw new Error("invalid format: "+e);var t;return new Ar({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Ht.prototype=Ar.prototype;function Ar(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}Ar.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function ts(e){e:for(var t=e.length,r=1,n=-1,i;r<t;++r)switch(e[r]){case".":n=i=r;break;case"0":n===0&&(n=r),i=r;break;default:if(!+e[r])break e;n>0&&(n=0);break}return n>0?e.slice(0,n)+e.slice(i+1):e}var Wn;function rs(e,t){var r=jt(e,t);if(!r)return e+"";var n=r[0],i=r[1],o=i-(Wn=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,l=n.length;return o===l?n:o>l?n+new Array(o-l+1).join("0"):o>0?n.slice(0,o)+"."+n.slice(o):"0."+new Array(1-o).join("0")+jt(e,Math.max(0,t+o-1))[0]}function Yn(e,t){var r=jt(e,t);if(!r)return e+"";var n=r[0],i=r[1];return i<0?"0."+new Array(-i).join("0")+n:n.length>i+1?n.slice(0,i+1)+"."+n.slice(i+1):n+new Array(i-n.length+2).join("0")}var qn={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:Ka,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>Yn(e*100,t),r:Yn,s:rs,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function Xn(e){return e}var Kn=Array.prototype.map,Jn=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function ns(e){var t=e.grouping===void 0||e.thousands===void 0?Xn:Ja(Kn.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",n=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",o=e.numerals===void 0?Xn:Qa(Kn.call(e.numerals,String)),l=e.percent===void 0?"%":e.percent+"",s=e.minus===void 0?"−":e.minus+"",d=e.nan===void 0?"NaN":e.nan+"";function u(w){w=Ht(w);var _=w.fill,b=w.align,x=w.sign,$=w.symbol,N=w.zero,A=w.width,B=w.comma,I=w.precision,E=w.trim,T=w.type;T==="n"?(B=!0,T="g"):qn[T]||(I===void 0&&(I=12),E=!0,T="g"),(N||_==="0"&&b==="=")&&(N=!0,_="0",b="=");var O=$==="$"?r:$==="#"&&/[boxX]/.test(T)?"0"+T.toLowerCase():"",S=$==="$"?n:/[%p]/.test(T)?l:"",R=qn[T],y=/[defgprs%]/.test(T);I=I===void 0?6:/[gprs]/.test(T)?Math.max(1,Math.min(21,I)):Math.max(0,Math.min(20,I));function C(k){var z=O,V=S,P,W,Ne;if(T==="c")V=R(k)+V,k="";else{k=+k;var Re=k<0||1/k<0;if(k=isNaN(k)?d:R(Math.abs(k),I),E&&(k=ts(k)),Re&&+k==0&&x!=="+"&&(Re=!1),z=(Re?x==="("?x:s:x==="-"||x==="("?"":x)+z,V=(T==="s"?Jn[8+Wn/3]:"")+V+(Re&&x==="("?")":""),y){for(P=-1,W=k.length;++P<W;)if(Ne=k.charCodeAt(P),48>Ne||Ne>57){V=(Ne===46?i+k.slice(P+1):k.slice(P))+V,k=k.slice(0,P);break}}}B&&!N&&(k=t(k,1/0));var me=z.length+k.length+V.length,Y=me<A?new Array(A-me+1).join(_):"";switch(B&&N&&(k=t(Y+k,Y.length?A-V.length:1/0),Y=""),b){case"<":k=z+k+V+Y;break;case"=":k=z+Y+k+V;break;case"^":k=Y.slice(0,me=Y.length>>1)+z+k+V+Y.slice(me);break;default:k=Y+z+k+V;break}return o(k)}return C.toString=function(){return w+""},C}function c(w,_){var b=u((w=Ht(w),w.type="f",w)),x=Math.max(-8,Math.min(8,Math.floor(Ye(_)/3)))*3,$=Math.pow(10,-x),N=Jn[8+x/3];return function(A){return b($*A)+N}}return{format:u,formatPrefix:c}}var Gt,Qn,ei;is({thousands:",",grouping:[3],currency:["$",""]});function is(e){return Gt=ns(e),Qn=Gt.format,ei=Gt.formatPrefix,Gt}function os(e){return Math.max(0,-Ye(Math.abs(e)))}function as(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Ye(t)/3)))*3-Ye(Math.abs(e)))}function ss(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Ye(t)-Ye(e))+1}function ti(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function fs(e){return function(){return e}}function ls(e){return+e}var ri=[0,1];function qe(e){return e}function Tr(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:fs(isNaN(t)?NaN:.5)}function us(e,t){var r;return e>t&&(r=e,e=t,t=r),function(n){return Math.max(e,Math.min(t,n))}}function hs(e,t,r){var n=e[0],i=e[1],o=t[0],l=t[1];return i<n?(n=Tr(i,n),o=r(l,o)):(n=Tr(n,i),o=r(o,l)),function(s){return o(n(s))}}function cs(e,t,r){var n=Math.min(e.length,t.length)-1,i=new Array(n),o=new Array(n),l=-1;for(e[n]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++l<n;)i[l]=Tr(e[l],e[l+1]),o[l]=r(t[l],t[l+1]);return function(s){var d=On(e,s,1,n)-1;return o[d](i[d](s))}}function ds(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function ps(){var e=ri,t=ri,r=Sr,n,i,o,l=qe,s,d,u;function c(){var _=Math.min(e.length,t.length);return l!==qe&&(l=us(e[0],e[_-1])),s=_>2?cs:hs,d=u=null,w}function w(_){return _==null||isNaN(_=+_)?o:(d||(d=s(e.map(n),t,r)))(n(l(_)))}return w.invert=function(_){return l(i((u||(u=s(t,e.map(n),Zt)))(_)))},w.domain=function(_){return arguments.length?(e=Array.from(_,ls),c()):e.slice()},w.range=function(_){return arguments.length?(t=Array.from(_),c()):t.slice()},w.rangeRound=function(_){return t=Array.from(_),r=Xa,c()},w.clamp=function(_){return arguments.length?(l=_?!0:qe,c()):l!==qe},w.interpolate=function(_){return arguments.length?(r=_,c()):r},w.unknown=function(_){return arguments.length?(o=_,w):o},function(_,b){return n=_,i=b,c()}}function gs(){return ps()(qe,qe)}function bs(e,t,r,n){var i=ka(e,t,r),o;switch(n=Ht(n??",f"),n.type){case"s":{var l=Math.max(Math.abs(e),Math.abs(t));return n.precision==null&&!isNaN(o=as(i,l))&&(n.precision=o),ei(n,l)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(o=ss(i,Math.max(Math.abs(e),Math.abs(t))))&&(n.precision=o-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(o=os(i))&&(n.precision=o-(n.type==="%")*2);break}}return Qn(n)}function ni(e){var t=e.domain;return e.ticks=function(r){var n=t();return Ea(n[0],n[n.length-1],r??10)},e.tickFormat=function(r,n){var i=t();return bs(i[0],i[i.length-1],r??10,n)},e.nice=function(r){r==null&&(r=10);var n=t(),i=0,o=n.length-1,l=n[i],s=n[o],d,u,c=10;for(s<l&&(u=l,l=s,s=u,u=i,i=o,o=u);c-- >0;){if(u=yr(l,s,r),u===d)return n[i]=l,n[o]=s,t(n);if(u>0)l=Math.floor(l/u)*u,s=Math.ceil(s/u)*u;else if(u<0)l=Math.ceil(l*u)/u,s=Math.floor(s*u)/u;else break;d=u}return e},e}function ii(){var e=gs();return e.copy=function(){return ds(e,ii())},ti.apply(e,arguments),ni(e)}function oi(){var e=0,t=1,r=1,n=[.5],i=[0,1],o;function l(d){return d!=null&&d<=d?i[On(n,d,0,r)]:o}function s(){var d=-1;for(n=new Array(r);++d<r;)n[d]=((d+1)*t-(d-r)*e)/(r+1);return l}return l.domain=function(d){return arguments.length?([e,t]=d,e=+e,t=+t,s()):[e,t]},l.range=function(d){return arguments.length?(r=(i=Array.from(d)).length-1,s()):i.slice()},l.invertExtent=function(d){var u=i.indexOf(d);return u<0?[NaN,NaN]:u<1?[e,n[0]]:u>=r?[n[r-1],t]:[n[u-1],n[u]]},l.unknown=function(d){return arguments.length&&(o=d),l},l.thresholds=function(){return n.slice()},l.copy=function(){return oi().domain([e,t]).range(i).unknown(o)},ti.apply(ni(l),arguments)}function dt(e,t,r){this.k=e,this.x=t,this.y=r}dt.prototype={constructor:dt,scale:function(e){return e===1?this:new dt(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new dt(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}},dt.prototype;const Wt=BigInt(32);function _s(e,t,r){const n=+!!r,i=+!r;return BigInt(e.getInt32(t,r)*i+e.getInt32(t+4,r)*n)<<Wt|BigInt(e.getUint32(t,r)*n+e.getUint32(t+4,r)*i)}function ws(e,t,r){const n=e.getUint32(t,r),i=e.getUint32(t+4,r),o=+!!r,l=+!r;return BigInt(n*l+i*o)<<Wt|BigInt(n*o+i*l)}function ms(e,t,r,n){const i=Number(r>>Wt),o=Number(r&BigInt(4294967295));n?(e.setInt32(t+4,i,n),e.setUint32(t,o,n)):(e.setInt32(t,i,n),e.setUint32(t+4,o,n))}function ys(e,t,r,n){const i=Number(r>>Wt),o=Number(r&BigInt(4294967295));n?(e.setUint32(t+4,i,n),e.setUint32(t,o,n)):(e.setUint32(t,i,n),e.setUint32(t+4,o,n))}"getBigInt64"in DataView||(DataView.prototype.getBigInt64=function(e,t){return _s(this,e,t)}),"getBigUint64"in DataView||(DataView.prototype.getBigUint64=function(e,t){return ws(this,e,t)}),"setBigInt64"in DataView||(DataView.prototype.setBigInt64=function(e,t,r){ms(this,e,t,r)}),"setBigUint64"in DataView||(DataView.prototype.setBigUint64=function(e,t,r){ys(this,e,t,r)});var $e={},Yt={};Yt.byteLength=Es,Yt.toByteArray=$s,Yt.fromByteArray=As;for(var de=[],oe=[],xs=typeof Uint8Array<"u"?Uint8Array:Array,Br="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Xe=0,vs=Br.length;Xe<vs;++Xe)de[Xe]=Br[Xe],oe[Br.charCodeAt(Xe)]=Xe;oe["-".charCodeAt(0)]=62,oe["_".charCodeAt(0)]=63;function ai(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");r===-1&&(r=t);var n=r===t?0:4-r%4;return[r,n]}function Es(e){var t=ai(e),r=t[0],n=t[1];return(r+n)*3/4-n}function ks(e,t,r){return(t+r)*3/4-r}function $s(e){var t,r=ai(e),n=r[0],i=r[1],o=new xs(ks(e,n,i)),l=0,s=i>0?n-4:n,d;for(d=0;d<s;d+=4)t=oe[e.charCodeAt(d)]<<18|oe[e.charCodeAt(d+1)]<<12|oe[e.charCodeAt(d+2)]<<6|oe[e.charCodeAt(d+3)],o[l++]=t>>16&255,o[l++]=t>>8&255,o[l++]=t&255;return i===2&&(t=oe[e.charCodeAt(d)]<<2|oe[e.charCodeAt(d+1)]>>4,o[l++]=t&255),i===1&&(t=oe[e.charCodeAt(d)]<<10|oe[e.charCodeAt(d+1)]<<4|oe[e.charCodeAt(d+2)]>>2,o[l++]=t>>8&255,o[l++]=t&255),o}function Cs(e){return de[e>>18&63]+de[e>>12&63]+de[e>>6&63]+de[e&63]}function Ss(e,t,r){for(var n,i=[],o=t;o<r;o+=3)n=(e[o]<<16&16711680)+(e[o+1]<<8&65280)+(e[o+2]&255),i.push(Cs(n));return i.join("")}function As(e){for(var t,r=e.length,n=r%3,i=[],o=16383,l=0,s=r-n;l<s;l+=o)i.push(Ss(e,l,l+o>s?s:l+o));return n===1?(t=e[r-1],i.push(de[t>>2]+de[t<<4&63]+"==")):n===2&&(t=(e[r-2]<<8)+e[r-1],i.push(de[t>>10]+de[t>>4&63]+de[t<<2&63]+"=")),i.join("")}var Ir={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */Ir.read=function(e,t,r,n,i){var o,l,s=i*8-n-1,d=(1<<s)-1,u=d>>1,c=-7,w=r?i-1:0,_=r?-1:1,b=e[t+w];for(w+=_,o=b&(1<<-c)-1,b>>=-c,c+=s;c>0;o=o*256+e[t+w],w+=_,c-=8);for(l=o&(1<<-c)-1,o>>=-c,c+=n;c>0;l=l*256+e[t+w],w+=_,c-=8);if(o===0)o=1-u;else{if(o===d)return l?NaN:(b?-1:1)*(1/0);l=l+Math.pow(2,n),o=o-u}return(b?-1:1)*l*Math.pow(2,o-n)},Ir.write=function(e,t,r,n,i,o){var l,s,d,u=o*8-i-1,c=(1<<u)-1,w=c>>1,_=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,b=n?0:o-1,x=n?1:-1,$=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,l=c):(l=Math.floor(Math.log(t)/Math.LN2),t*(d=Math.pow(2,-l))<1&&(l--,d*=2),l+w>=1?t+=_/d:t+=_*Math.pow(2,1-w),t*d>=2&&(l++,d/=2),l+w>=c?(s=0,l=c):l+w>=1?(s=(t*d-1)*Math.pow(2,i),l=l+w):(s=t*Math.pow(2,w-1)*Math.pow(2,i),l=0));i>=8;e[r+b]=s&255,b+=x,s/=256,i-=8);for(l=l<<i|s,u+=i;u>0;e[r+b]=l&255,b+=x,l/=256,u-=8);e[r+b-x]|=$*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(e){const t=Yt,r=Ir,n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=s,e.SlowBuffer=B,e.INSPECT_MAX_BYTES=50;const i=2147483647;e.kMaxLength=i,s.TYPED_ARRAY_SUPPORT=o(),!s.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function o(){try{const h=new Uint8Array(1),a={foo:function(){return 42}};return Object.setPrototypeOf(a,Uint8Array.prototype),Object.setPrototypeOf(h,a),h.foo()===42}catch{return!1}}Object.defineProperty(s.prototype,"parent",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.buffer}}),Object.defineProperty(s.prototype,"offset",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.byteOffset}});function l(h){if(h>i)throw new RangeError('The value "'+h+'" is invalid for option "size"');const a=new Uint8Array(h);return Object.setPrototypeOf(a,s.prototype),a}function s(h,a,f){if(typeof h=="number"){if(typeof a=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return w(h)}return d(h,a,f)}s.poolSize=8192;function d(h,a,f){if(typeof h=="string")return _(h,a);if(ArrayBuffer.isView(h))return x(h);if(h==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof h);if(ye(h,ArrayBuffer)||h&&ye(h.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(ye(h,SharedArrayBuffer)||h&&ye(h.buffer,SharedArrayBuffer)))return $(h,a,f);if(typeof h=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const p=h.valueOf&&h.valueOf();if(p!=null&&p!==h)return s.from(p,a,f);const g=N(h);if(g)return g;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof h[Symbol.toPrimitive]=="function")return s.from(h[Symbol.toPrimitive]("string"),a,f);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof h)}s.from=function(h,a,f){return d(h,a,f)},Object.setPrototypeOf(s.prototype,Uint8Array.prototype),Object.setPrototypeOf(s,Uint8Array);function u(h){if(typeof h!="number")throw new TypeError('"size" argument must be of type number');if(h<0)throw new RangeError('The value "'+h+'" is invalid for option "size"')}function c(h,a,f){return u(h),h<=0?l(h):a!==void 0?typeof f=="string"?l(h).fill(a,f):l(h).fill(a):l(h)}s.alloc=function(h,a,f){return c(h,a,f)};function w(h){return u(h),l(h<0?0:A(h)|0)}s.allocUnsafe=function(h){return w(h)},s.allocUnsafeSlow=function(h){return w(h)};function _(h,a){if((typeof a!="string"||a==="")&&(a="utf8"),!s.isEncoding(a))throw new TypeError("Unknown encoding: "+a);const f=I(h,a)|0;let p=l(f);const g=p.write(h,a);return g!==f&&(p=p.slice(0,g)),p}function b(h){const a=h.length<0?0:A(h.length)|0,f=l(a);for(let p=0;p<a;p+=1)f[p]=h[p]&255;return f}function x(h){if(ye(h,Uint8Array)){const a=new Uint8Array(h);return $(a.buffer,a.byteOffset,a.byteLength)}return b(h)}function $(h,a,f){if(a<0||h.byteLength<a)throw new RangeError('"offset" is outside of buffer bounds');if(h.byteLength<a+(f||0))throw new RangeError('"length" is outside of buffer bounds');let p;return a===void 0&&f===void 0?p=new Uint8Array(h):f===void 0?p=new Uint8Array(h,a):p=new Uint8Array(h,a,f),Object.setPrototypeOf(p,s.prototype),p}function N(h){if(s.isBuffer(h)){const a=A(h.length)|0,f=l(a);return f.length===0||h.copy(f,0,0,a),f}if(h.length!==void 0)return typeof h.length!="number"||Sn(h.length)?l(0):b(h);if(h.type==="Buffer"&&Array.isArray(h.data))return b(h.data)}function A(h){if(h>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return h|0}function B(h){return+h!=h&&(h=0),s.alloc(+h)}s.isBuffer=function(a){return a!=null&&a._isBuffer===!0&&a!==s.prototype},s.compare=function(a,f){if(ye(a,Uint8Array)&&(a=s.from(a,a.offset,a.byteLength)),ye(f,Uint8Array)&&(f=s.from(f,f.offset,f.byteLength)),!s.isBuffer(a)||!s.isBuffer(f))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(a===f)return 0;let p=a.length,g=f.length;for(let m=0,v=Math.min(p,g);m<v;++m)if(a[m]!==f[m]){p=a[m],g=f[m];break}return p<g?-1:g<p?1:0},s.isEncoding=function(a){switch(String(a).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},s.concat=function(a,f){if(!Array.isArray(a))throw new TypeError('"list" argument must be an Array of Buffers');if(a.length===0)return s.alloc(0);let p;if(f===void 0)for(f=0,p=0;p<a.length;++p)f+=a[p].length;const g=s.allocUnsafe(f);let m=0;for(p=0;p<a.length;++p){let v=a[p];if(ye(v,Uint8Array))m+v.length>g.length?(s.isBuffer(v)||(v=s.from(v)),v.copy(g,m)):Uint8Array.prototype.set.call(g,v,m);else if(s.isBuffer(v))v.copy(g,m);else throw new TypeError('"list" argument must be an Array of Buffers');m+=v.length}return g};function I(h,a){if(s.isBuffer(h))return h.length;if(ArrayBuffer.isView(h)||ye(h,ArrayBuffer))return h.byteLength;if(typeof h!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof h);const f=h.length,p=arguments.length>2&&arguments[2]===!0;if(!p&&f===0)return 0;let g=!1;for(;;)switch(a){case"ascii":case"latin1":case"binary":return f;case"utf8":case"utf-8":return Cn(h).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return f*2;case"hex":return f>>>1;case"base64":return ta(h).length;default:if(g)return p?-1:Cn(h).length;a=(""+a).toLowerCase(),g=!0}}s.byteLength=I;function E(h,a,f){let p=!1;if((a===void 0||a<0)&&(a=0),a>this.length||((f===void 0||f>this.length)&&(f=this.length),f<=0)||(f>>>=0,a>>>=0,f<=a))return"";for(h||(h="utf8");;)switch(h){case"hex":return Y(this,a,f);case"utf8":case"utf-8":return P(this,a,f);case"ascii":return Re(this,a,f);case"latin1":case"binary":return me(this,a,f);case"base64":return V(this,a,f);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Ot(this,a,f);default:if(p)throw new TypeError("Unknown encoding: "+h);h=(h+"").toLowerCase(),p=!0}}s.prototype._isBuffer=!0;function T(h,a,f){const p=h[a];h[a]=h[f],h[f]=p}s.prototype.swap16=function(){const a=this.length;if(a%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let f=0;f<a;f+=2)T(this,f,f+1);return this},s.prototype.swap32=function(){const a=this.length;if(a%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let f=0;f<a;f+=4)T(this,f,f+3),T(this,f+1,f+2);return this},s.prototype.swap64=function(){const a=this.length;if(a%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let f=0;f<a;f+=8)T(this,f,f+7),T(this,f+1,f+6),T(this,f+2,f+5),T(this,f+3,f+4);return this},s.prototype.toString=function(){const a=this.length;return a===0?"":arguments.length===0?P(this,0,a):E.apply(this,arguments)},s.prototype.toLocaleString=s.prototype.toString,s.prototype.equals=function(a){if(!s.isBuffer(a))throw new TypeError("Argument must be a Buffer");return this===a?!0:s.compare(this,a)===0},s.prototype.inspect=function(){let a="";const f=e.INSPECT_MAX_BYTES;return a=this.toString("hex",0,f).replace(/(.{2})/g,"$1 ").trim(),this.length>f&&(a+=" ... "),"<Buffer "+a+">"},n&&(s.prototype[n]=s.prototype.inspect),s.prototype.compare=function(a,f,p,g,m){if(ye(a,Uint8Array)&&(a=s.from(a,a.offset,a.byteLength)),!s.isBuffer(a))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof a);if(f===void 0&&(f=0),p===void 0&&(p=a?a.length:0),g===void 0&&(g=0),m===void 0&&(m=this.length),f<0||p>a.length||g<0||m>this.length)throw new RangeError("out of range index");if(g>=m&&f>=p)return 0;if(g>=m)return-1;if(f>=p)return 1;if(f>>>=0,p>>>=0,g>>>=0,m>>>=0,this===a)return 0;let v=m-g,M=p-f;const H=Math.min(v,M),j=this.slice(g,m),G=a.slice(f,p);for(let D=0;D<H;++D)if(j[D]!==G[D]){v=j[D],M=G[D];break}return v<M?-1:M<v?1:0};function O(h,a,f,p,g){if(h.length===0)return-1;if(typeof f=="string"?(p=f,f=0):f>2147483647?f=2147483647:f<-2147483648&&(f=-2147483648),f=+f,Sn(f)&&(f=g?0:h.length-1),f<0&&(f=h.length+f),f>=h.length){if(g)return-1;f=h.length-1}else if(f<0)if(g)f=0;else return-1;if(typeof a=="string"&&(a=s.from(a,p)),s.isBuffer(a))return a.length===0?-1:S(h,a,f,p,g);if(typeof a=="number")return a=a&255,typeof Uint8Array.prototype.indexOf=="function"?g?Uint8Array.prototype.indexOf.call(h,a,f):Uint8Array.prototype.lastIndexOf.call(h,a,f):S(h,[a],f,p,g);throw new TypeError("val must be string, number or Buffer")}function S(h,a,f,p,g){let m=1,v=h.length,M=a.length;if(p!==void 0&&(p=String(p).toLowerCase(),p==="ucs2"||p==="ucs-2"||p==="utf16le"||p==="utf-16le")){if(h.length<2||a.length<2)return-1;m=2,v/=2,M/=2,f/=2}function H(G,D){return m===1?G[D]:G.readUInt16BE(D*m)}let j;if(g){let G=-1;for(j=f;j<v;j++)if(H(h,j)===H(a,G===-1?0:j-G)){if(G===-1&&(G=j),j-G+1===M)return G*m}else G!==-1&&(j-=j-G),G=-1}else for(f+M>v&&(f=v-M),j=f;j>=0;j--){let G=!0;for(let D=0;D<M;D++)if(H(h,j+D)!==H(a,D)){G=!1;break}if(G)return j}return-1}s.prototype.includes=function(a,f,p){return this.indexOf(a,f,p)!==-1},s.prototype.indexOf=function(a,f,p){return O(this,a,f,p,!0)},s.prototype.lastIndexOf=function(a,f,p){return O(this,a,f,p,!1)};function R(h,a,f,p){f=Number(f)||0;const g=h.length-f;p?(p=Number(p),p>g&&(p=g)):p=g;const m=a.length;p>m/2&&(p=m/2);let v;for(v=0;v<p;++v){const M=parseInt(a.substr(v*2,2),16);if(Sn(M))return v;h[f+v]=M}return v}function y(h,a,f,p){return _r(Cn(a,h.length-f),h,f,p)}function C(h,a,f,p){return _r(oh(a),h,f,p)}function k(h,a,f,p){return _r(ta(a),h,f,p)}function z(h,a,f,p){return _r(ah(a,h.length-f),h,f,p)}s.prototype.write=function(a,f,p,g){if(f===void 0)g="utf8",p=this.length,f=0;else if(p===void 0&&typeof f=="string")g=f,p=this.length,f=0;else if(isFinite(f))f=f>>>0,isFinite(p)?(p=p>>>0,g===void 0&&(g="utf8")):(g=p,p=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const m=this.length-f;if((p===void 0||p>m)&&(p=m),a.length>0&&(p<0||f<0)||f>this.length)throw new RangeError("Attempt to write outside buffer bounds");g||(g="utf8");let v=!1;for(;;)switch(g){case"hex":return R(this,a,f,p);case"utf8":case"utf-8":return y(this,a,f,p);case"ascii":case"latin1":case"binary":return C(this,a,f,p);case"base64":return k(this,a,f,p);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return z(this,a,f,p);default:if(v)throw new TypeError("Unknown encoding: "+g);g=(""+g).toLowerCase(),v=!0}},s.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function V(h,a,f){return a===0&&f===h.length?t.fromByteArray(h):t.fromByteArray(h.slice(a,f))}function P(h,a,f){f=Math.min(h.length,f);const p=[];let g=a;for(;g<f;){const m=h[g];let v=null,M=m>239?4:m>223?3:m>191?2:1;if(g+M<=f){let H,j,G,D;switch(M){case 1:m<128&&(v=m);break;case 2:H=h[g+1],(H&192)===128&&(D=(m&31)<<6|H&63,D>127&&(v=D));break;case 3:H=h[g+1],j=h[g+2],(H&192)===128&&(j&192)===128&&(D=(m&15)<<12|(H&63)<<6|j&63,D>2047&&(D<55296||D>57343)&&(v=D));break;case 4:H=h[g+1],j=h[g+2],G=h[g+3],(H&192)===128&&(j&192)===128&&(G&192)===128&&(D=(m&15)<<18|(H&63)<<12|(j&63)<<6|G&63,D>65535&&D<1114112&&(v=D))}}v===null?(v=65533,M=1):v>65535&&(v-=65536,p.push(v>>>10&1023|55296),v=56320|v&1023),p.push(v),g+=M}return Ne(p)}const W=4096;function Ne(h){const a=h.length;if(a<=W)return String.fromCharCode.apply(String,h);let f="",p=0;for(;p<a;)f+=String.fromCharCode.apply(String,h.slice(p,p+=W));return f}function Re(h,a,f){let p="";f=Math.min(h.length,f);for(let g=a;g<f;++g)p+=String.fromCharCode(h[g]&127);return p}function me(h,a,f){let p="";f=Math.min(h.length,f);for(let g=a;g<f;++g)p+=String.fromCharCode(h[g]);return p}function Y(h,a,f){const p=h.length;(!a||a<0)&&(a=0),(!f||f<0||f>p)&&(f=p);let g="";for(let m=a;m<f;++m)g+=sh[h[m]];return g}function Ot(h,a,f){const p=h.slice(a,f);let g="";for(let m=0;m<p.length-1;m+=2)g+=String.fromCharCode(p[m]+p[m+1]*256);return g}s.prototype.slice=function(a,f){const p=this.length;a=~~a,f=f===void 0?p:~~f,a<0?(a+=p,a<0&&(a=0)):a>p&&(a=p),f<0?(f+=p,f<0&&(f=0)):f>p&&(f=p),f<a&&(f=a);const g=this.subarray(a,f);return Object.setPrototypeOf(g,s.prototype),g};function X(h,a,f){if(h%1!==0||h<0)throw new RangeError("offset is not uint");if(h+a>f)throw new RangeError("Trying to access beyond buffer length")}s.prototype.readUintLE=s.prototype.readUIntLE=function(a,f,p){a=a>>>0,f=f>>>0,p||X(a,f,this.length);let g=this[a],m=1,v=0;for(;++v<f&&(m*=256);)g+=this[a+v]*m;return g},s.prototype.readUintBE=s.prototype.readUIntBE=function(a,f,p){a=a>>>0,f=f>>>0,p||X(a,f,this.length);let g=this[a+--f],m=1;for(;f>0&&(m*=256);)g+=this[a+--f]*m;return g},s.prototype.readUint8=s.prototype.readUInt8=function(a,f){return a=a>>>0,f||X(a,1,this.length),this[a]},s.prototype.readUint16LE=s.prototype.readUInt16LE=function(a,f){return a=a>>>0,f||X(a,2,this.length),this[a]|this[a+1]<<8},s.prototype.readUint16BE=s.prototype.readUInt16BE=function(a,f){return a=a>>>0,f||X(a,2,this.length),this[a]<<8|this[a+1]},s.prototype.readUint32LE=s.prototype.readUInt32LE=function(a,f){return a=a>>>0,f||X(a,4,this.length),(this[a]|this[a+1]<<8|this[a+2]<<16)+this[a+3]*16777216},s.prototype.readUint32BE=s.prototype.readUInt32BE=function(a,f){return a=a>>>0,f||X(a,4,this.length),this[a]*16777216+(this[a+1]<<16|this[a+2]<<8|this[a+3])},s.prototype.readBigUInt64LE=Oe(function(a){a=a>>>0,ft(a,"offset");const f=this[a],p=this[a+7];(f===void 0||p===void 0)&&Mt(a,this.length-8);const g=f+this[++a]*2**8+this[++a]*2**16+this[++a]*2**24,m=this[++a]+this[++a]*2**8+this[++a]*2**16+p*2**24;return BigInt(g)+(BigInt(m)<<BigInt(32))}),s.prototype.readBigUInt64BE=Oe(function(a){a=a>>>0,ft(a,"offset");const f=this[a],p=this[a+7];(f===void 0||p===void 0)&&Mt(a,this.length-8);const g=f*2**24+this[++a]*2**16+this[++a]*2**8+this[++a],m=this[++a]*2**24+this[++a]*2**16+this[++a]*2**8+p;return(BigInt(g)<<BigInt(32))+BigInt(m)}),s.prototype.readIntLE=function(a,f,p){a=a>>>0,f=f>>>0,p||X(a,f,this.length);let g=this[a],m=1,v=0;for(;++v<f&&(m*=256);)g+=this[a+v]*m;return m*=128,g>=m&&(g-=Math.pow(2,8*f)),g},s.prototype.readIntBE=function(a,f,p){a=a>>>0,f=f>>>0,p||X(a,f,this.length);let g=f,m=1,v=this[a+--g];for(;g>0&&(m*=256);)v+=this[a+--g]*m;return m*=128,v>=m&&(v-=Math.pow(2,8*f)),v},s.prototype.readInt8=function(a,f){return a=a>>>0,f||X(a,1,this.length),this[a]&128?(255-this[a]+1)*-1:this[a]},s.prototype.readInt16LE=function(a,f){a=a>>>0,f||X(a,2,this.length);const p=this[a]|this[a+1]<<8;return p&32768?p|4294901760:p},s.prototype.readInt16BE=function(a,f){a=a>>>0,f||X(a,2,this.length);const p=this[a+1]|this[a]<<8;return p&32768?p|4294901760:p},s.prototype.readInt32LE=function(a,f){return a=a>>>0,f||X(a,4,this.length),this[a]|this[a+1]<<8|this[a+2]<<16|this[a+3]<<24},s.prototype.readInt32BE=function(a,f){return a=a>>>0,f||X(a,4,this.length),this[a]<<24|this[a+1]<<16|this[a+2]<<8|this[a+3]},s.prototype.readBigInt64LE=Oe(function(a){a=a>>>0,ft(a,"offset");const f=this[a],p=this[a+7];(f===void 0||p===void 0)&&Mt(a,this.length-8);const g=this[a+4]+this[a+5]*2**8+this[a+6]*2**16+(p<<24);return(BigInt(g)<<BigInt(32))+BigInt(f+this[++a]*2**8+this[++a]*2**16+this[++a]*2**24)}),s.prototype.readBigInt64BE=Oe(function(a){a=a>>>0,ft(a,"offset");const f=this[a],p=this[a+7];(f===void 0||p===void 0)&&Mt(a,this.length-8);const g=(f<<24)+this[++a]*2**16+this[++a]*2**8+this[++a];return(BigInt(g)<<BigInt(32))+BigInt(this[++a]*2**24+this[++a]*2**16+this[++a]*2**8+p)}),s.prototype.readFloatLE=function(a,f){return a=a>>>0,f||X(a,4,this.length),r.read(this,a,!0,23,4)},s.prototype.readFloatBE=function(a,f){return a=a>>>0,f||X(a,4,this.length),r.read(this,a,!1,23,4)},s.prototype.readDoubleLE=function(a,f){return a=a>>>0,f||X(a,8,this.length),r.read(this,a,!0,52,8)},s.prototype.readDoubleBE=function(a,f){return a=a>>>0,f||X(a,8,this.length),r.read(this,a,!1,52,8)};function te(h,a,f,p,g,m){if(!s.isBuffer(h))throw new TypeError('"buffer" argument must be a Buffer instance');if(a>g||a<m)throw new RangeError('"value" argument is out of bounds');if(f+p>h.length)throw new RangeError("Index out of range")}s.prototype.writeUintLE=s.prototype.writeUIntLE=function(a,f,p,g){if(a=+a,f=f>>>0,p=p>>>0,!g){const M=Math.pow(2,8*p)-1;te(this,a,f,p,M,0)}let m=1,v=0;for(this[f]=a&255;++v<p&&(m*=256);)this[f+v]=a/m&255;return f+p},s.prototype.writeUintBE=s.prototype.writeUIntBE=function(a,f,p,g){if(a=+a,f=f>>>0,p=p>>>0,!g){const M=Math.pow(2,8*p)-1;te(this,a,f,p,M,0)}let m=p-1,v=1;for(this[f+m]=a&255;--m>=0&&(v*=256);)this[f+m]=a/v&255;return f+p},s.prototype.writeUint8=s.prototype.writeUInt8=function(a,f,p){return a=+a,f=f>>>0,p||te(this,a,f,1,255,0),this[f]=a&255,f+1},s.prototype.writeUint16LE=s.prototype.writeUInt16LE=function(a,f,p){return a=+a,f=f>>>0,p||te(this,a,f,2,65535,0),this[f]=a&255,this[f+1]=a>>>8,f+2},s.prototype.writeUint16BE=s.prototype.writeUInt16BE=function(a,f,p){return a=+a,f=f>>>0,p||te(this,a,f,2,65535,0),this[f]=a>>>8,this[f+1]=a&255,f+2},s.prototype.writeUint32LE=s.prototype.writeUInt32LE=function(a,f,p){return a=+a,f=f>>>0,p||te(this,a,f,4,4294967295,0),this[f+3]=a>>>24,this[f+2]=a>>>16,this[f+1]=a>>>8,this[f]=a&255,f+4},s.prototype.writeUint32BE=s.prototype.writeUInt32BE=function(a,f,p){return a=+a,f=f>>>0,p||te(this,a,f,4,4294967295,0),this[f]=a>>>24,this[f+1]=a>>>16,this[f+2]=a>>>8,this[f+3]=a&255,f+4};function Yo(h,a,f,p,g){ea(a,p,g,h,f,7);let m=Number(a&BigInt(4294967295));h[f++]=m,m=m>>8,h[f++]=m,m=m>>8,h[f++]=m,m=m>>8,h[f++]=m;let v=Number(a>>BigInt(32)&BigInt(4294967295));return h[f++]=v,v=v>>8,h[f++]=v,v=v>>8,h[f++]=v,v=v>>8,h[f++]=v,f}function qo(h,a,f,p,g){ea(a,p,g,h,f,7);let m=Number(a&BigInt(4294967295));h[f+7]=m,m=m>>8,h[f+6]=m,m=m>>8,h[f+5]=m,m=m>>8,h[f+4]=m;let v=Number(a>>BigInt(32)&BigInt(4294967295));return h[f+3]=v,v=v>>8,h[f+2]=v,v=v>>8,h[f+1]=v,v=v>>8,h[f]=v,f+8}s.prototype.writeBigUInt64LE=Oe(function(a,f=0){return Yo(this,a,f,BigInt(0),BigInt("0xffffffffffffffff"))}),s.prototype.writeBigUInt64BE=Oe(function(a,f=0){return qo(this,a,f,BigInt(0),BigInt("0xffffffffffffffff"))}),s.prototype.writeIntLE=function(a,f,p,g){if(a=+a,f=f>>>0,!g){const H=Math.pow(2,8*p-1);te(this,a,f,p,H-1,-H)}let m=0,v=1,M=0;for(this[f]=a&255;++m<p&&(v*=256);)a<0&&M===0&&this[f+m-1]!==0&&(M=1),this[f+m]=(a/v>>0)-M&255;return f+p},s.prototype.writeIntBE=function(a,f,p,g){if(a=+a,f=f>>>0,!g){const H=Math.pow(2,8*p-1);te(this,a,f,p,H-1,-H)}let m=p-1,v=1,M=0;for(this[f+m]=a&255;--m>=0&&(v*=256);)a<0&&M===0&&this[f+m+1]!==0&&(M=1),this[f+m]=(a/v>>0)-M&255;return f+p},s.prototype.writeInt8=function(a,f,p){return a=+a,f=f>>>0,p||te(this,a,f,1,127,-128),a<0&&(a=255+a+1),this[f]=a&255,f+1},s.prototype.writeInt16LE=function(a,f,p){return a=+a,f=f>>>0,p||te(this,a,f,2,32767,-32768),this[f]=a&255,this[f+1]=a>>>8,f+2},s.prototype.writeInt16BE=function(a,f,p){return a=+a,f=f>>>0,p||te(this,a,f,2,32767,-32768),this[f]=a>>>8,this[f+1]=a&255,f+2},s.prototype.writeInt32LE=function(a,f,p){return a=+a,f=f>>>0,p||te(this,a,f,4,2147483647,-2147483648),this[f]=a&255,this[f+1]=a>>>8,this[f+2]=a>>>16,this[f+3]=a>>>24,f+4},s.prototype.writeInt32BE=function(a,f,p){return a=+a,f=f>>>0,p||te(this,a,f,4,2147483647,-2147483648),a<0&&(a=4294967295+a+1),this[f]=a>>>24,this[f+1]=a>>>16,this[f+2]=a>>>8,this[f+3]=a&255,f+4},s.prototype.writeBigInt64LE=Oe(function(a,f=0){return Yo(this,a,f,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),s.prototype.writeBigInt64BE=Oe(function(a,f=0){return qo(this,a,f,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Xo(h,a,f,p,g,m){if(f+p>h.length)throw new RangeError("Index out of range");if(f<0)throw new RangeError("Index out of range")}function Ko(h,a,f,p,g){return a=+a,f=f>>>0,g||Xo(h,a,f,4),r.write(h,a,f,p,23,4),f+4}s.prototype.writeFloatLE=function(a,f,p){return Ko(this,a,f,!0,p)},s.prototype.writeFloatBE=function(a,f,p){return Ko(this,a,f,!1,p)};function Jo(h,a,f,p,g){return a=+a,f=f>>>0,g||Xo(h,a,f,8),r.write(h,a,f,p,52,8),f+8}s.prototype.writeDoubleLE=function(a,f,p){return Jo(this,a,f,!0,p)},s.prototype.writeDoubleBE=function(a,f,p){return Jo(this,a,f,!1,p)},s.prototype.copy=function(a,f,p,g){if(!s.isBuffer(a))throw new TypeError("argument should be a Buffer");if(p||(p=0),!g&&g!==0&&(g=this.length),f>=a.length&&(f=a.length),f||(f=0),g>0&&g<p&&(g=p),g===p||a.length===0||this.length===0)return 0;if(f<0)throw new RangeError("targetStart out of bounds");if(p<0||p>=this.length)throw new RangeError("Index out of range");if(g<0)throw new RangeError("sourceEnd out of bounds");g>this.length&&(g=this.length),a.length-f<g-p&&(g=a.length-f+p);const m=g-p;return this===a&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(f,p,g):Uint8Array.prototype.set.call(a,this.subarray(p,g),f),m},s.prototype.fill=function(a,f,p,g){if(typeof a=="string"){if(typeof f=="string"?(g=f,f=0,p=this.length):typeof p=="string"&&(g=p,p=this.length),g!==void 0&&typeof g!="string")throw new TypeError("encoding must be a string");if(typeof g=="string"&&!s.isEncoding(g))throw new TypeError("Unknown encoding: "+g);if(a.length===1){const v=a.charCodeAt(0);(g==="utf8"&&v<128||g==="latin1")&&(a=v)}}else typeof a=="number"?a=a&255:typeof a=="boolean"&&(a=Number(a));if(f<0||this.length<f||this.length<p)throw new RangeError("Out of range index");if(p<=f)return this;f=f>>>0,p=p===void 0?this.length:p>>>0,a||(a=0);let m;if(typeof a=="number")for(m=f;m<p;++m)this[m]=a;else{const v=s.isBuffer(a)?a:s.from(a,g),M=v.length;if(M===0)throw new TypeError('The value "'+a+'" is invalid for argument "value"');for(m=0;m<p-f;++m)this[m+f]=v[m%M]}return this};const st={};function $n(h,a,f){st[h]=class extends f{constructor(){super(),Object.defineProperty(this,"message",{value:a.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${h}]`,this.stack,delete this.name}get code(){return h}set code(g){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:g,writable:!0})}toString(){return`${this.name} [${h}]: ${this.message}`}}}$n("ERR_BUFFER_OUT_OF_BOUNDS",function(h){return h?`${h} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),$n("ERR_INVALID_ARG_TYPE",function(h,a){return`The "${h}" argument must be of type number. Received type ${typeof a}`},TypeError),$n("ERR_OUT_OF_RANGE",function(h,a,f){let p=`The value of "${h}" is out of range.`,g=f;return Number.isInteger(f)&&Math.abs(f)>2**32?g=Qo(String(f)):typeof f=="bigint"&&(g=String(f),(f>BigInt(2)**BigInt(32)||f<-(BigInt(2)**BigInt(32)))&&(g=Qo(g)),g+="n"),p+=` It must be ${a}. Received ${g}`,p},RangeError);function Qo(h){let a="",f=h.length;const p=h[0]==="-"?1:0;for(;f>=p+4;f-=3)a=`_${h.slice(f-3,f)}${a}`;return`${h.slice(0,f)}${a}`}function rh(h,a,f){ft(a,"offset"),(h[a]===void 0||h[a+f]===void 0)&&Mt(a,h.length-(f+1))}function ea(h,a,f,p,g,m){if(h>f||h<a){const v=typeof a=="bigint"?"n":"";let M;throw m>3?a===0||a===BigInt(0)?M=`>= 0${v} and < 2${v} ** ${(m+1)*8}${v}`:M=`>= -(2${v} ** ${(m+1)*8-1}${v}) and < 2 ** ${(m+1)*8-1}${v}`:M=`>= ${a}${v} and <= ${f}${v}`,new st.ERR_OUT_OF_RANGE("value",M,h)}rh(p,g,m)}function ft(h,a){if(typeof h!="number")throw new st.ERR_INVALID_ARG_TYPE(a,"number",h)}function Mt(h,a,f){throw Math.floor(h)!==h?(ft(h,f),new st.ERR_OUT_OF_RANGE(f||"offset","an integer",h)):a<0?new st.ERR_BUFFER_OUT_OF_BOUNDS:new st.ERR_OUT_OF_RANGE(f||"offset",`>= ${f?1:0} and <= ${a}`,h)}const nh=/[^+/0-9A-Za-z-_]/g;function ih(h){if(h=h.split("=")[0],h=h.trim().replace(nh,""),h.length<2)return"";for(;h.length%4!==0;)h=h+"=";return h}function Cn(h,a){a=a||1/0;let f;const p=h.length;let g=null;const m=[];for(let v=0;v<p;++v){if(f=h.charCodeAt(v),f>55295&&f<57344){if(!g){if(f>56319){(a-=3)>-1&&m.push(239,191,189);continue}else if(v+1===p){(a-=3)>-1&&m.push(239,191,189);continue}g=f;continue}if(f<56320){(a-=3)>-1&&m.push(239,191,189),g=f;continue}f=(g-55296<<10|f-56320)+65536}else g&&(a-=3)>-1&&m.push(239,191,189);if(g=null,f<128){if((a-=1)<0)break;m.push(f)}else if(f<2048){if((a-=2)<0)break;m.push(f>>6|192,f&63|128)}else if(f<65536){if((a-=3)<0)break;m.push(f>>12|224,f>>6&63|128,f&63|128)}else if(f<1114112){if((a-=4)<0)break;m.push(f>>18|240,f>>12&63|128,f>>6&63|128,f&63|128)}else throw new Error("Invalid code point")}return m}function oh(h){const a=[];for(let f=0;f<h.length;++f)a.push(h.charCodeAt(f)&255);return a}function ah(h,a){let f,p,g;const m=[];for(let v=0;v<h.length&&!((a-=2)<0);++v)f=h.charCodeAt(v),p=f>>8,g=f%256,m.push(g),m.push(p);return m}function ta(h){return t.toByteArray(ih(h))}function _r(h,a,f,p){let g;for(g=0;g<p&&!(g+f>=a.length||g>=h.length);++g)a[g+f]=h[g];return g}function ye(h,a){return h instanceof a||h!=null&&h.constructor!=null&&h.constructor.name!=null&&h.constructor.name===a.name}function Sn(h){return h!==h}const sh=function(){const h="0123456789abcdef",a=new Array(256);for(let f=0;f<16;++f){const p=f*16;for(let g=0;g<16;++g)a[p+g]=h[f]+h[g]}return a}();function Oe(h){return typeof BigInt>"u"?fh:h}function fh(){throw new Error("BigInt not supported")}})($e);class Ts{constructor(t,r){this.code="",this.scopes=[["vars"]],this.bitFields=[],this.tmpVariableCount=0,this.references=new Map,this.imports=[],this.reverseImports=new Map,this.useContextVariables=!1,this.importPath=t,this.useContextVariables=r}generateVariable(t){const r=[...this.scopes[this.scopes.length-1]];return t&&r.push(t),r.join(".")}generateOption(t){switch(typeof t){case"number":return t.toString();case"string":return this.generateVariable(t);case"function":return`${this.addImport(t)}.call(${this.generateVariable()}, vars)`}}generateError(t){this.pushCode(`throw new Error(${t});`)}generateTmpVariable(){return"$tmp"+this.tmpVariableCount++}pushCode(t){this.code+=t+`
`}pushPath(t){t&&this.scopes[this.scopes.length-1].push(t)}popPath(t){t&&this.scopes[this.scopes.length-1].pop()}pushScope(t){this.scopes.push([t])}popScope(){this.scopes.pop()}addImport(t){if(!this.importPath)return`(${t})`;let r=this.reverseImports.get(t);return r||(r=this.imports.push(t)-1,this.reverseImports.set(t,r)),`${this.importPath}[${r}]`}addReference(t){this.references.has(t)||this.references.set(t,{resolved:!1,requested:!1})}markResolved(t){const r=this.references.get(t);r&&(r.resolved=!0)}markRequested(t){t.forEach(r=>{const n=this.references.get(r);n&&(n.requested=!0)})}getUnresolvedReferences(){return Array.from(this.references).filter(([t,r])=>!r.resolved&&!r.requested).map(([t,r])=>t)}}const le=new Map,Ue="___parser_",ue={uint8:1,uint16le:2,uint16be:2,uint32le:4,uint32be:4,int8:1,int16le:2,int16be:2,int32le:4,int32be:4,int64be:8,int64le:8,uint64be:8,uint64le:8,floatle:4,floatbe:4,doublele:8,doublebe:8},qt={uint8:"Uint8",uint16le:"Uint16",uint16be:"Uint16",uint32le:"Uint32",uint32be:"Uint32",int8:"Int8",int16le:"Int16",int16be:"Int16",int32le:"Int32",int32be:"Int32",int64be:"BigInt64",int64le:"BigInt64",uint64be:"BigUint64",uint64le:"BigUint64",floatle:"Float32",floatbe:"Float32",doublele:"Float64",doublebe:"Float64"},Xt={uint8:!1,uint16le:!0,uint16be:!1,uint32le:!0,uint32be:!1,int8:!1,int16le:!0,int16be:!1,int32le:!0,int32be:!1,int64be:!1,int64le:!0,uint64be:!1,uint64le:!0,floatle:!0,floatbe:!1,doublele:!0,doublebe:!1};class U{constructor(){this.varName="",this.type="",this.options={},this.endian="be",this.useContextVariables=!1}static start(){return new U}primitiveGenerateN(t,r){const n=qt[t],i=Xt[t];r.pushCode(`${r.generateVariable(this.varName)} = dataView.get${n}(offset, ${i});`),r.pushCode(`offset += ${ue[t]};`)}primitiveN(t,r,n){return this.setNextParser(t,r,n)}useThisEndian(t){return t+this.endian.toLowerCase()}uint8(t,r={}){return this.primitiveN("uint8",t,r)}uint16(t,r={}){return this.primitiveN(this.useThisEndian("uint16"),t,r)}uint16le(t,r={}){return this.primitiveN("uint16le",t,r)}uint16be(t,r={}){return this.primitiveN("uint16be",t,r)}uint32(t,r={}){return this.primitiveN(this.useThisEndian("uint32"),t,r)}uint32le(t,r={}){return this.primitiveN("uint32le",t,r)}uint32be(t,r={}){return this.primitiveN("uint32be",t,r)}int8(t,r={}){return this.primitiveN("int8",t,r)}int16(t,r={}){return this.primitiveN(this.useThisEndian("int16"),t,r)}int16le(t,r={}){return this.primitiveN("int16le",t,r)}int16be(t,r={}){return this.primitiveN("int16be",t,r)}int32(t,r={}){return this.primitiveN(this.useThisEndian("int32"),t,r)}int32le(t,r={}){return this.primitiveN("int32le",t,r)}int32be(t,r={}){return this.primitiveN("int32be",t,r)}bigIntVersionCheck(){if(!DataView.prototype.getBigInt64)throw new Error("BigInt64 is unsupported on this runtime")}int64(t,r={}){return this.bigIntVersionCheck(),this.primitiveN(this.useThisEndian("int64"),t,r)}int64be(t,r={}){return this.bigIntVersionCheck(),this.primitiveN("int64be",t,r)}int64le(t,r={}){return this.bigIntVersionCheck(),this.primitiveN("int64le",t,r)}uint64(t,r={}){return this.bigIntVersionCheck(),this.primitiveN(this.useThisEndian("uint64"),t,r)}uint64be(t,r={}){return this.bigIntVersionCheck(),this.primitiveN("uint64be",t,r)}uint64le(t,r={}){return this.bigIntVersionCheck(),this.primitiveN("uint64le",t,r)}floatle(t,r={}){return this.primitiveN("floatle",t,r)}floatbe(t,r={}){return this.primitiveN("floatbe",t,r)}doublele(t,r={}){return this.primitiveN("doublele",t,r)}doublebe(t,r={}){return this.primitiveN("doublebe",t,r)}bitN(t,r,n){return n.length=t,this.setNextParser("bit",r,n)}bit1(t,r={}){return this.bitN(1,t,r)}bit2(t,r={}){return this.bitN(2,t,r)}bit3(t,r={}){return this.bitN(3,t,r)}bit4(t,r={}){return this.bitN(4,t,r)}bit5(t,r={}){return this.bitN(5,t,r)}bit6(t,r={}){return this.bitN(6,t,r)}bit7(t,r={}){return this.bitN(7,t,r)}bit8(t,r={}){return this.bitN(8,t,r)}bit9(t,r={}){return this.bitN(9,t,r)}bit10(t,r={}){return this.bitN(10,t,r)}bit11(t,r={}){return this.bitN(11,t,r)}bit12(t,r={}){return this.bitN(12,t,r)}bit13(t,r={}){return this.bitN(13,t,r)}bit14(t,r={}){return this.bitN(14,t,r)}bit15(t,r={}){return this.bitN(15,t,r)}bit16(t,r={}){return this.bitN(16,t,r)}bit17(t,r={}){return this.bitN(17,t,r)}bit18(t,r={}){return this.bitN(18,t,r)}bit19(t,r={}){return this.bitN(19,t,r)}bit20(t,r={}){return this.bitN(20,t,r)}bit21(t,r={}){return this.bitN(21,t,r)}bit22(t,r={}){return this.bitN(22,t,r)}bit23(t,r={}){return this.bitN(23,t,r)}bit24(t,r={}){return this.bitN(24,t,r)}bit25(t,r={}){return this.bitN(25,t,r)}bit26(t,r={}){return this.bitN(26,t,r)}bit27(t,r={}){return this.bitN(27,t,r)}bit28(t,r={}){return this.bitN(28,t,r)}bit29(t,r={}){return this.bitN(29,t,r)}bit30(t,r={}){return this.bitN(30,t,r)}bit31(t,r={}){return this.bitN(31,t,r)}bit32(t,r={}){return this.bitN(32,t,r)}namely(t){return le.set(t,this),this.alias=t,this}skip(t,r={}){return this.seek(t,r)}seek(t,r={}){if(r.assert)throw new Error("assert option on seek is not allowed.");return this.setNextParser("seek","",{length:t})}string(t,r){if(!r.zeroTerminated&&!r.length&&!r.greedy)throw new Error("One of length, zeroTerminated, or greedy must be defined for string.");if((r.zeroTerminated||r.length)&&r.greedy)throw new Error("greedy is mutually exclusive with length and zeroTerminated for string.");if(r.stripNull&&!(r.length||r.greedy))throw new Error("length or greedy must be defined if stripNull is enabled.");return r.encoding=r.encoding||"utf8",this.setNextParser("string",t,r)}buffer(t,r){if(!r.length&&!r.readUntil)throw new Error("length or readUntil must be defined for buffer.");return this.setNextParser("buffer",t,r)}wrapped(t,r){if(typeof r!="object"&&typeof t=="object"&&(r=t,t=""),!r||!r.wrapper||!r.type)throw new Error("Both wrapper and type must be defined for wrapped.");if(!r.length&&!r.readUntil)throw new Error("length or readUntil must be defined for wrapped.");return this.setNextParser("wrapper",t,r)}array(t,r){if(!r.readUntil&&!r.length&&!r.lengthInBytes)throw new Error("One of readUntil, length and lengthInBytes must be defined for array.");if(!r.type)throw new Error("type is required for array.");if(typeof r.type=="string"&&!le.has(r.type)&&!(r.type in ue))throw new Error(`Array element type "${r.type}" is unkown.`);return this.setNextParser("array",t,r)}choice(t,r){if(typeof r!="object"&&typeof t=="object"&&(r=t,t=""),!r)throw new Error("tag and choices are are required for choice.");if(!r.tag)throw new Error("tag is requird for choice.");if(!r.choices)throw new Error("choices is required for choice.");for(const n in r.choices){const i=parseInt(n,10),o=r.choices[i];if(isNaN(i))throw new Error(`Choice key "${n}" is not a number.`);if(typeof o=="string"&&!le.has(o)&&!(o in ue))throw new Error(`Choice type "${o}" is unkown.`)}return this.setNextParser("choice",t,r)}nest(t,r){if(typeof r!="object"&&typeof t=="object"&&(r=t,t=""),!r||!r.type)throw new Error("type is required for nest.");if(!(r.type instanceof U)&&!le.has(r.type))throw new Error("type must be a known parser name or a Parser object.");if(!(r.type instanceof U)&&!t)throw new Error("type must be a Parser object if the variable name is omitted.");return this.setNextParser("nest",t,r)}pointer(t,r){if(!r.offset)throw new Error("offset is required for pointer.");if(!r.type)throw new Error("type is required for pointer.");if(typeof r.type=="string"&&!(r.type in ue)&&!le.has(r.type))throw new Error(`Pointer type "${r.type}" is unkown.`);return this.setNextParser("pointer",t,r)}saveOffset(t,r={}){return this.setNextParser("saveOffset",t,r)}endianness(t){switch(t.toLowerCase()){case"little":this.endian="le";break;case"big":this.endian="be";break;default:throw new Error('endianness must be one of "little" or "big"')}return this}endianess(t){return this.endianness(t)}useContextVars(t=!0){return this.useContextVariables=t,this}create(t){if(!(t instanceof Function))throw new Error("Constructor must be a Function object.");return this.constructorFn=t,this}getContext(t){const r=new Ts(t,this.useContextVariables);return r.pushCode("var dataView = new DataView(buffer.buffer, buffer.byteOffset, buffer.length);"),this.alias?(this.addAliasedCode(r),r.pushCode(`return ${Ue+this.alias}(0).result;`)):this.addRawCode(r),r}getCode(){const t="imports";return this.getContext(t).code}addRawCode(t){t.pushCode("var offset = 0;"),t.pushCode(`var vars = ${this.constructorFn?"new constructorFn()":"{}"};`),t.pushCode("vars.$parent = null;"),t.pushCode("vars.$root = vars;"),this.generate(t),this.resolveReferences(t),t.pushCode("delete vars.$parent;"),t.pushCode("delete vars.$root;"),t.pushCode("return vars;")}addAliasedCode(t){return t.pushCode(`function ${Ue+this.alias}(offset, context) {`),t.pushCode(`var vars = ${this.constructorFn?"new constructorFn()":"{}"};`),t.pushCode("var ctx = Object.assign({$parent: null, $root: vars}, context || {});"),t.pushCode("vars = Object.assign(vars, ctx);"),this.generate(t),t.markResolved(this.alias),this.resolveReferences(t),t.pushCode("Object.keys(ctx).forEach(function (item) { delete vars[item]; });"),t.pushCode("return { offset: offset, result: vars };"),t.pushCode("}"),t}resolveReferences(t){const r=t.getUnresolvedReferences();t.markRequested(r),r.forEach(n=>{var i;(i=le.get(n))===null||i===void 0||i.addAliasedCode(t)})}compile(){const t="imports",r=this.getContext(t);this.compiled=new Function(t,"TextDecoder",`return function (buffer, constructorFn) { ${r.code} };`)(r.imports,TextDecoder)}sizeOf(){let t=NaN;if(Object.keys(ue).indexOf(this.type)>=0)t=ue[this.type];else if(this.type==="string"&&typeof this.options.length=="number")t=this.options.length;else if(this.type==="buffer"&&typeof this.options.length=="number")t=this.options.length;else if(this.type==="array"&&typeof this.options.length=="number"){let r=NaN;typeof this.options.type=="string"?r=ue[this.options.type]:this.options.type instanceof U&&(r=this.options.type.sizeOf()),t=this.options.length*r}else this.type==="seek"?t=this.options.length:this.type==="nest"?t=this.options.type.sizeOf():this.type||(t=0);return this.next&&(t+=this.next.sizeOf()),t}parse(t){return this.compiled||this.compile(),this.compiled(t,this.constructorFn)}setNextParser(t,r,n){const i=new U;return i.type=t,i.varName=r,i.options=n,i.endian=this.endian,this.head?this.head.next=i:this.next=i,this.head=i,this}generate(t){if(this.type){switch(this.type){case"uint8":case"uint16le":case"uint16be":case"uint32le":case"uint32be":case"int8":case"int16le":case"int16be":case"int32le":case"int32be":case"int64be":case"int64le":case"uint64be":case"uint64le":case"floatle":case"floatbe":case"doublele":case"doublebe":this.primitiveGenerateN(this.type,t);break;case"bit":this.generateBit(t);break;case"string":this.generateString(t);break;case"buffer":this.generateBuffer(t);break;case"seek":this.generateSeek(t);break;case"nest":this.generateNest(t);break;case"array":this.generateArray(t);break;case"choice":this.generateChoice(t);break;case"pointer":this.generatePointer(t);break;case"saveOffset":this.generateSaveOffset(t);break;case"wrapper":this.generateWrapper(t);break}this.type!=="bit"&&this.generateAssert(t)}const r=t.generateVariable(this.varName);return this.options.formatter&&this.type!=="bit"&&this.generateFormatter(t,r,this.options.formatter),this.generateNext(t)}generateAssert(t){if(!this.options.assert)return;const r=t.generateVariable(this.varName);switch(typeof this.options.assert){case"function":{const n=t.addImport(this.options.assert);t.pushCode(`if (!${n}.call(vars, ${r})) {`)}break;case"number":t.pushCode(`if (${this.options.assert} !== ${r}) {`);break;case"string":t.pushCode(`if (${JSON.stringify(this.options.assert)} !== ${r}) {`);break;default:throw new Error("assert option must be a string, number or a function.")}t.generateError(`"Assertion error: ${r} is " + ${JSON.stringify(this.options.assert.toString())}`),t.pushCode("}")}generateNext(t){return this.next&&(t=this.next.generate(t)),t}generateBit(t){const r=JSON.parse(JSON.stringify(this));if(r.options=this.options,r.generateAssert=this.generateAssert.bind(this),r.generateFormatter=this.generateFormatter.bind(this),r.varName=t.generateVariable(r.varName),t.bitFields.push(r),!this.next||this.next&&["bit","nest"].indexOf(this.next.type)<0){const n=t.generateTmpVariable();t.pushCode(`var ${n} = 0;`);const i=(c=0)=>{let w=0;for(let _=c;_<t.bitFields.length;_++){const b=t.bitFields[_].options.length;if(w+b>32)break;w+=b}return w},o=c=>(c<=8?(t.pushCode(`${n} = dataView.getUint8(offset);`),c=8):c<=16?(t.pushCode(`${n} = dataView.getUint16(offset);`),c=16):c<=24?(t.pushCode(`${n} = (dataView.getUint16(offset) << 8) | dataView.getUint8(offset + 2);`),c=24):(t.pushCode(`${n} = dataView.getUint32(offset);`),c=32),t.pushCode(`offset += ${c/8};`),c);let l=0;const s=this.endian==="be";let d=0,u=0;t.bitFields.forEach((c,w)=>{let _=c.options.length;if(_>u){if(u){const $=-1>>>32-u;t.pushCode(`${c.varName} = (${n} & 0x${$.toString(16)}) << ${_-u};`),_-=u}l=0,u=d=o(i(w)-u)}const b=s?d-l-_:l,x=-1>>>32-_;t.pushCode(`${c.varName} ${_<c.options.length?"|=":"="} ${n} >> ${b} & 0x${x.toString(16)};`),c.options.length===32&&t.pushCode(`${c.varName} >>>= 0`),c.options.assert&&c.generateAssert(t),c.options.formatter&&c.generateFormatter(t,c.varName,c.options.formatter),l+=_,u-=_}),t.bitFields=[]}}generateSeek(t){const r=t.generateOption(this.options.length);t.pushCode(`offset += ${r};`)}generateString(t){const r=t.generateVariable(this.varName),n=t.generateTmpVariable(),i=this.options.encoding,o=i.toLowerCase()==="hex",l='b => b.toString(16).padStart(2, "0")';if(this.options.length&&this.options.zeroTerminated){const s=this.options.length;t.pushCode(`var ${n} = offset;`),t.pushCode(`while(dataView.getUint8(offset++) !== 0 && offset - ${n} < ${s});`);const d=`offset - ${n} < ${s} ? offset - 1 : offset`;t.pushCode(o?`${r} = Array.from(buffer.subarray(${n}, ${d}), ${l}).join('');`:`${r} = new TextDecoder('${i}').decode(buffer.subarray(${n}, ${d}));`)}else if(this.options.length){const s=t.generateOption(this.options.length);t.pushCode(o?`${r} = Array.from(buffer.subarray(offset, offset + ${s}), ${l}).join('');`:`${r} = new TextDecoder('${i}').decode(buffer.subarray(offset, offset + ${s}));`),t.pushCode(`offset += ${s};`)}else this.options.zeroTerminated?(t.pushCode(`var ${n} = offset;`),t.pushCode("while(dataView.getUint8(offset++) !== 0);"),t.pushCode(o?`${r} = Array.from(buffer.subarray(${n}, offset - 1), ${l}).join('');`:`${r} = new TextDecoder('${i}').decode(buffer.subarray(${n}, offset - 1));`)):this.options.greedy&&(t.pushCode(`var ${n} = offset;`),t.pushCode("while(buffer.length > offset++);"),t.pushCode(o?`${r} = Array.from(buffer.subarray(${n}, offset), ${l}).join('');`:`${r} = new TextDecoder('${i}').decode(buffer.subarray(${n}, offset));`));this.options.stripNull&&t.pushCode(`${r} = ${r}.replace(/\\x00+$/g, '')`)}generateBuffer(t){const r=t.generateVariable(this.varName);if(typeof this.options.readUntil=="function"){const n=this.options.readUntil,i=t.generateTmpVariable(),o=t.generateTmpVariable();t.pushCode(`var ${i} = offset;`),t.pushCode(`var ${o} = 0;`),t.pushCode("while (offset < buffer.length) {"),t.pushCode(`${o} = dataView.getUint8(offset);`);const l=t.addImport(n);t.pushCode(`if (${l}.call(${t.generateVariable()}, ${o}, buffer.subarray(offset))) break;`),t.pushCode("offset += 1;"),t.pushCode("}"),t.pushCode(`${r} = buffer.subarray(${i}, offset);`)}else if(this.options.readUntil==="eof")t.pushCode(`${r} = buffer.subarray(offset);`);else{const n=t.generateOption(this.options.length);t.pushCode(`${r} = buffer.subarray(offset, offset + ${n});`),t.pushCode(`offset += ${n};`)}this.options.clone&&t.pushCode(`${r} = buffer.constructor.from(${r});`)}generateArray(t){const r=t.generateOption(this.options.length),n=t.generateOption(this.options.lengthInBytes),i=this.options.type,o=t.generateTmpVariable(),l=t.generateVariable(this.varName),s=t.generateTmpVariable(),d=this.options.key,u=typeof d=="string";if(u?t.pushCode(`${l} = {};`):t.pushCode(`${l} = [];`),typeof this.options.readUntil=="function"?t.pushCode("do {"):this.options.readUntil==="eof"?t.pushCode(`for (var ${o} = 0; offset < buffer.length; ${o}++) {`):n!==void 0?t.pushCode(`for (var ${o} = offset + ${n}; offset < ${o}; ) {`):t.pushCode(`for (var ${o} = ${r}; ${o} > 0; ${o}--) {`),typeof i=="string")if(le.get(i)){const c=t.generateTmpVariable();if(t.pushCode(`var ${c} = ${Ue+i}(offset, {`),t.useContextVariables){const w=t.generateVariable();t.pushCode(`$parent: ${w},`),t.pushCode(`$root: ${w}.$root,`),!this.options.readUntil&&n===void 0&&t.pushCode(`$index: ${r} - ${o},`)}t.pushCode("});"),t.pushCode(`var ${s} = ${c}.result; offset = ${c}.offset;`),i!==this.alias&&t.addReference(i)}else{const c=qt[i],w=Xt[i];t.pushCode(`var ${s} = dataView.get${c}(offset, ${w});`),t.pushCode(`offset += ${ue[i]};`)}else if(i instanceof U){t.pushCode(`var ${s} = {};`);const c=t.generateVariable();t.pushScope(s),t.useContextVariables&&(t.pushCode(`${s}.$parent = ${c};`),t.pushCode(`${s}.$root = ${c}.$root;`),!this.options.readUntil&&n===void 0&&t.pushCode(`${s}.$index = ${r} - ${o};`)),i.generate(t),t.useContextVariables&&(t.pushCode(`delete ${s}.$parent;`),t.pushCode(`delete ${s}.$root;`),t.pushCode(`delete ${s}.$index;`)),t.popScope()}if(u?t.pushCode(`${l}[${s}.${d}] = ${s};`):t.pushCode(`${l}.push(${s});`),t.pushCode("}"),typeof this.options.readUntil=="function"){const c=this.options.readUntil,w=t.addImport(c);t.pushCode(`while (!${w}.call(${t.generateVariable()}, ${s}, buffer.subarray(offset)));`)}}generateChoiceCase(t,r,n){if(typeof n=="string"){const i=t.generateVariable(this.varName);if(le.has(n)){const o=t.generateTmpVariable();t.pushCode(`var ${o} = ${Ue+n}(offset, {`),t.useContextVariables&&(t.pushCode(`$parent: ${i}.$parent,`),t.pushCode(`$root: ${i}.$root,`)),t.pushCode("});"),t.pushCode(`${i} = ${o}.result; offset = ${o}.offset;`),n!==this.alias&&t.addReference(n)}else{const o=qt[n],l=Xt[n];t.pushCode(`${i} = dataView.get${o}(offset, ${l});`),t.pushCode(`offset += ${ue[n]}`)}}else n instanceof U&&(t.pushPath(r),n.generate(t),t.popPath(r))}generateChoice(t){const r=t.generateOption(this.options.tag),n=t.generateVariable(this.varName);if(this.varName&&(t.pushCode(`${n} = {};`),t.useContextVariables)){const i=t.generateVariable();t.pushCode(`${n}.$parent = ${i};`),t.pushCode(`${n}.$root = ${i}.$root;`)}t.pushCode(`switch(${r}) {`);for(const i in this.options.choices){const o=parseInt(i,10),l=this.options.choices[o];t.pushCode(`case ${o}:`),this.generateChoiceCase(t,this.varName,l),t.pushCode("break;")}t.pushCode("default:"),this.options.defaultChoice?this.generateChoiceCase(t,this.varName,this.options.defaultChoice):t.generateError(`"Met undefined tag value " + ${r} + " at choice"`),t.pushCode("}"),this.varName&&t.useContextVariables&&(t.pushCode(`delete ${n}.$parent;`),t.pushCode(`delete ${n}.$root;`))}generateNest(t){const r=t.generateVariable(this.varName);if(this.options.type instanceof U){if(this.varName&&(t.pushCode(`${r} = {};`),t.useContextVariables)){const n=t.generateVariable();t.pushCode(`${r}.$parent = ${n};`),t.pushCode(`${r}.$root = ${n}.$root;`)}t.pushPath(this.varName),this.options.type.generate(t),t.popPath(this.varName),this.varName&&t.useContextVariables&&t.useContextVariables&&(t.pushCode(`delete ${r}.$parent;`),t.pushCode(`delete ${r}.$root;`))}else if(le.has(this.options.type)){const n=t.generateTmpVariable();if(t.pushCode(`var ${n} = ${Ue+this.options.type}(offset, {`),t.useContextVariables){const i=t.generateVariable();t.pushCode(`$parent: ${i},`),t.pushCode(`$root: ${i}.$root,`)}t.pushCode("});"),t.pushCode(`${r} = ${n}.result; offset = ${n}.offset;`),this.options.type!==this.alias&&t.addReference(this.options.type)}}generateWrapper(t){const r=t.generateVariable(this.varName),n=t.generateTmpVariable();if(typeof this.options.readUntil=="function"){const d=this.options.readUntil,u=t.generateTmpVariable(),c=t.generateTmpVariable();t.pushCode(`var ${u} = offset;`),t.pushCode(`var ${c} = 0;`),t.pushCode("while (offset < buffer.length) {"),t.pushCode(`${c} = dataView.getUint8(offset);`);const w=t.addImport(d);t.pushCode(`if (${w}.call(${t.generateVariable()}, ${c}, buffer.subarray(offset))) break;`),t.pushCode("offset += 1;"),t.pushCode("}"),t.pushCode(`${n} = buffer.subarray(${u}, offset);`)}else if(this.options.readUntil==="eof")t.pushCode(`${n} = buffer.subarray(offset);`);else{const d=t.generateOption(this.options.length);t.pushCode(`${n} = buffer.subarray(offset, offset + ${d});`),t.pushCode(`offset += ${d};`)}this.options.clone&&t.pushCode(`${n} = buffer.constructor.from(${n});`);const i=t.generateTmpVariable(),o=t.generateTmpVariable(),l=t.generateTmpVariable(),s=t.addImport(this.options.wrapper);if(t.pushCode(`${n} = ${s}.call(this, ${n}).subarray(0);`),t.pushCode(`var ${i} = buffer;`),t.pushCode(`var ${o} = offset;`),t.pushCode(`var ${l} = dataView;`),t.pushCode(`buffer = ${n};`),t.pushCode("offset = 0;"),t.pushCode("dataView = new DataView(buffer.buffer, buffer.byteOffset, buffer.length);"),this.options.type instanceof U)this.varName&&t.pushCode(`${r} = {};`),t.pushPath(this.varName),this.options.type.generate(t),t.popPath(this.varName);else if(le.has(this.options.type)){const d=t.generateTmpVariable();t.pushCode(`var ${d} = ${Ue+this.options.type}(0);`),t.pushCode(`${r} = ${d}.result;`),this.options.type!==this.alias&&t.addReference(this.options.type)}t.pushCode(`buffer = ${i};`),t.pushCode(`dataView = ${l};`),t.pushCode(`offset = ${o};`)}generateFormatter(t,r,n){if(typeof n=="function"){const i=t.addImport(n);t.pushCode(`${r} = ${i}.call(${t.generateVariable()}, ${r});`)}}generatePointer(t){const r=this.options.type,n=t.generateOption(this.options.offset),i=t.generateTmpVariable(),o=t.generateVariable(this.varName);if(t.pushCode(`var ${i} = offset;`),t.pushCode(`offset = ${n};`),this.options.type instanceof U){if(t.pushCode(`${o} = {};`),t.useContextVariables){const l=t.generateVariable();t.pushCode(`${o}.$parent = ${l};`),t.pushCode(`${o}.$root = ${l}.$root;`)}t.pushPath(this.varName),this.options.type.generate(t),t.popPath(this.varName),t.useContextVariables&&(t.pushCode(`delete ${o}.$parent;`),t.pushCode(`delete ${o}.$root;`))}else if(le.has(this.options.type)){const l=t.generateTmpVariable();if(t.pushCode(`var ${l} = ${Ue+this.options.type}(offset, {`),t.useContextVariables){const s=t.generateVariable();t.pushCode(`$parent: ${s},`),t.pushCode(`$root: ${s}.$root,`)}t.pushCode("});"),t.pushCode(`${o} = ${l}.result; offset = ${l}.offset;`),this.options.type!==this.alias&&t.addReference(this.options.type)}else if(Object.keys(ue).indexOf(this.options.type)>=0){const l=qt[r],s=Xt[r];t.pushCode(`${o} = dataView.get${l}(offset, ${s});`),t.pushCode(`offset += ${ue[r]};`)}t.pushCode(`offset = ${i};`)}generateSaveOffset(t){const r=t.generateVariable(this.varName);t.pushCode(`${r} = offset`)}}var si={},Nr={},Le={},pt={};Object.defineProperty(pt,"__esModule",{value:!0});function Rr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function fi(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Or(e,t,r){return t&&fi(e.prototype,t),r&&fi(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Bs(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Mr(e,t)}function Ke(e){return Ke=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Ke(e)}function Mr(e,t){return Mr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},Mr(e,t)}function Is(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function gt(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ns(e,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return gt(e)}function Rs(e){var t=Is();return function(){var n=Ke(e),i;if(t){var o=Ke(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return Ns(this,i)}}function Os(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&(e=Ke(e),e!==null););return e}function Kt(){return typeof Reflect<"u"&&Reflect.get?Kt=Reflect.get.bind():Kt=function(t,r,n){var i=Os(t,r);if(i){var o=Object.getOwnPropertyDescriptor(i,r);return o.get?o.get.call(arguments.length<3?t:n):o.value}},Kt.apply(this,arguments)}var li=function(){function e(){Rr(this,e),Object.defineProperty(this,"listeners",{value:{},writable:!0,configurable:!0})}return Or(e,[{key:"addEventListener",value:function(r,n,i){r in this.listeners||(this.listeners[r]=[]),this.listeners[r].push({callback:n,options:i})}},{key:"removeEventListener",value:function(r,n){if(r in this.listeners){for(var i=this.listeners[r],o=0,l=i.length;o<l;o++)if(i[o].callback===n){i.splice(o,1);return}}}},{key:"dispatchEvent",value:function(r){if(r.type in this.listeners){for(var n=this.listeners[r.type],i=n.slice(),o=0,l=i.length;o<l;o++){var s=i[o];try{s.callback.call(this,r)}catch(d){Promise.resolve().then(function(){throw d})}s.options&&s.options.once&&this.removeEventListener(r.type,s.callback)}return!r.defaultPrevented}}}]),e}(),Fr=function(e){Bs(r,e);var t=Rs(r);function r(){var n;return Rr(this,r),n=t.call(this),n.listeners||li.call(gt(n)),Object.defineProperty(gt(n),"aborted",{value:!1,writable:!0,configurable:!0}),Object.defineProperty(gt(n),"onabort",{value:null,writable:!0,configurable:!0}),Object.defineProperty(gt(n),"reason",{value:void 0,writable:!0,configurable:!0}),n}return Or(r,[{key:"toString",value:function(){return"[object AbortSignal]"}},{key:"dispatchEvent",value:function(i){i.type==="abort"&&(this.aborted=!0,typeof this.onabort=="function"&&this.onabort.call(this,i)),Kt(Ke(r.prototype),"dispatchEvent",this).call(this,i)}}]),r}(li),ui=function(){function e(){Rr(this,e),Object.defineProperty(this,"signal",{value:new Fr,writable:!0,configurable:!0})}return Or(e,[{key:"abort",value:function(r){var n;try{n=new Event("abort")}catch{typeof document<"u"?document.createEvent?(n=document.createEvent("Event"),n.initEvent("abort",!1,!1)):(n=document.createEventObject(),n.type="abort"):n={type:"abort",bubbles:!1,cancelable:!1}}var i=r;if(i===void 0)if(typeof document>"u")i=new Error("This operation was aborted"),i.name="AbortError";else try{i=new DOMException("signal is aborted without reason")}catch{i=new Error("This operation was aborted"),i.name="AbortError"}this.signal.reason=i,this.signal.dispatchEvent(n)}},{key:"toString",value:function(){return"[object AbortController]"}}]),e}();typeof Symbol<"u"&&Symbol.toStringTag&&(ui.prototype[Symbol.toStringTag]="AbortController",Fr.prototype[Symbol.toStringTag]="AbortSignal");function Ms(e){return e.__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL?(console.log("__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL=true is set, will force install polyfill"),!0):typeof e.Request=="function"&&!e.Request.prototype.hasOwnProperty("signal")||!e.AbortController}function Fs(e){typeof e=="function"&&(e={fetch:e});var t=e,r=t.fetch,n=t.Request,i=n===void 0?r.Request:n,o=t.AbortController,l=t.__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL,s=l===void 0?!1:l;if(!Ms({fetch:r,Request:i,AbortController:o,__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL:s}))return{fetch:r,Request:d};var d=i;(d&&!d.prototype.hasOwnProperty("signal")||s)&&(d=function(_,b){var x;b&&b.signal&&(x=b.signal,delete b.signal);var $=new i(_,b);return x&&Object.defineProperty($,"signal",{writable:!1,enumerable:!1,configurable:!0,value:x}),$},d.prototype=i.prototype);var u=r,c=function(_,b){var x=d&&d.prototype.isPrototypeOf(_)?_.signal:b?b.signal:void 0;if(x){var $;try{$=new DOMException("Aborted","AbortError")}catch{$=new Error("Aborted"),$.name="AbortError"}if(x.aborted)return Promise.reject($);var N=new Promise(function(A,B){x.addEventListener("abort",function(){return B($)},{once:!0})});return b&&b.signal&&delete b.signal,Promise.race([N,u(_,b)])}return u(_,b)};return{fetch:c,Request:d}}pt.AbortController=ui,pt.AbortSignal=Fr,pt.abortableFetch=Fs,Object.defineProperty(Le,"__esModule",{value:!0}),Le.AbortSignal=Le.AbortController=void 0;const hi=pt;var Jt=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof he<"u")return he;throw new Error("unable to locate global object")};let zs=typeof Jt().AbortController>"u"?hi.AbortController:Jt().AbortController;Le.AbortController=zs;let Us=typeof Jt().AbortController>"u"?hi.AbortSignal:Jt().AbortSignal;Le.AbortSignal=Us;var zr={};Object.defineProperty(zr,"__esModule",{value:!0});const Ls=Le;class Ps{}class Ds{constructor(){this.signals=new Set,this.abortController=new Ls.AbortController}addSignal(t=new Ps){if(this.signal.aborted)throw new Error("cannot add a signal, already aborted!");this.signals.add(t),t.aborted?this.handleAborted(t):typeof t.addEventListener=="function"&&t.addEventListener("abort",()=>{this.handleAborted(t)})}handleAborted(t){this.signals.delete(t),this.signals.size===0&&this.abortController.abort()}get signal(){return this.abortController.signal}abort(){this.abortController.abort()}}zr.default=Ds;var Ur={};Object.defineProperty(Ur,"__esModule",{value:!0});class Vs{constructor(){this.callbacks=new Set}addCallback(t=()=>{}){this.callbacks.add(t),t(this.currentMessage)}callback(t){this.currentMessage=t,this.callbacks.forEach(r=>{r(t)})}}Ur.default=Vs;var ci=he&&he.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Nr,"__esModule",{value:!0});const Zs=Le,js=ci(zr),Hs=ci(Ur);class Qt{constructor({fill:t,cache:r}){if(typeof t!="function")throw new TypeError("must pass a fill function");if(typeof r!="object")throw new TypeError("must pass a cache object");if(typeof r.get!="function"||typeof r.set!="function"||typeof r.delete!="function")throw new TypeError("cache must implement get(key), set(key, val), and and delete(key)");this.cache=r,this.fillCallback=t}static isAbortException(t){return t.name==="AbortError"||t.code==="ERR_ABORTED"||t.message==="AbortError: aborted"||t.message==="Error: aborted"}evict(t,r){this.cache.get(t)===r&&this.cache.delete(t)}fill(t,r,n,i){const o=new js.default,l=new Hs.default;l.addCallback(i);const s={aborter:o,promise:this.fillCallback(r,o.signal,d=>{l.callback(d)}),settled:!1,statusReporter:l,get aborted(){return this.aborter.signal.aborted}};s.aborter.addSignal(n),s.aborter.signal.addEventListener("abort",()=>{s.settled||this.evict(t,s)}),s.promise.then(()=>{s.settled=!0},()=>{s.settled=!0,this.evict(t,s)}).catch(d=>{throw console.error(d),d}),this.cache.set(t,s)}static checkSinglePromise(t,r){function n(){if(r&&r.aborted)throw Object.assign(new Error("aborted"),{code:"ERR_ABORTED"})}return t.then(i=>(n(),i),i=>{throw n(),i})}has(t){return this.cache.has(t)}get(t,r,n,i){if(!n&&r instanceof Zs.AbortSignal)throw new TypeError("second get argument appears to be an AbortSignal, perhaps you meant to pass `null` for the fill data?");const o=this.cache.get(t);return o?o.aborted&&!o.settled?(this.evict(t,o),this.get(t,r,n,i)):o.settled?o.promise:(o.aborter.addSignal(n),o.statusReporter.addCallback(i),Qt.checkSinglePromise(o.promise,n)):(this.fill(t,r,n,i),Qt.checkSinglePromise(this.cache.get(t).promise,n))}delete(t){const r=this.cache.get(t);r&&(r.settled||r.aborter.abort(),this.cache.delete(t))}clear(){const t=this.cache.keys();let r=0;for(let n=t.next();!n.done;n=t.next())this.delete(n.value),r+=1;return r}}Nr.default=Qt;var Gs=he&&he.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(si,"__esModule",{value:!0});const Ws=Gs(Nr);var Ys=si.default=Ws.default;class qs{constructor(t={}){if(!(t.maxSize&&t.maxSize>0))throw new TypeError("`maxSize` must be a number greater than 0");this.maxSize=t.maxSize,this.cache=new Map,this.oldCache=new Map,this._size=0}_set(t,r){this.cache.set(t,r),this._size++,this._size>=this.maxSize&&(this._size=0,this.oldCache=this.cache,this.cache=new Map)}get(t){if(this.cache.has(t))return this.cache.get(t);if(this.oldCache.has(t)){const r=this.oldCache.get(t);return this.oldCache.delete(t),this._set(t,r),r}}set(t,r){return this.cache.has(t)?this.cache.set(t,r):this._set(t,r),this}has(t){return this.cache.has(t)||this.oldCache.has(t)}peek(t){if(this.cache.has(t))return this.cache.get(t);if(this.oldCache.has(t))return this.oldCache.get(t)}delete(t){const r=this.cache.delete(t);return r&&this._size--,this.oldCache.delete(t)||r}clear(){this.cache.clear(),this.oldCache.clear(),this._size=0}*keys(){for(const[t]of this)yield t}*values(){for(const[,t]of this)yield t}*[Symbol.iterator](){for(const t of this.cache)yield t;for(const t of this.oldCache){const[r]=t;this.cache.has(r)||(yield t)}}get size(){let t=0;for(const r of this.oldCache.keys())this.cache.has(r)||t++;return this._size+t}}var Xs=qs;class Ce{constructor(t,r){this.ranges=arguments.length===2?[{min:t,max:r}]:0 in t?Object.assign({},t):[t]}min(){return this.ranges[0].min}max(){return this.ranges[this.ranges.length-1].max}contains(t){for(let r=0;r<this.ranges.length;r+=1){const n=this.ranges[r];if(n.min<=t&&n.max>=t)return!0}return!1}isContiguous(){return this.ranges.length>1}getRanges(){return this.ranges.map(t=>new Ce(t.min,t.max))}toString(){return this.ranges.map(t=>`[${t.min}-${t.max}]`).join(",")}union(t){const r=this.getRanges().concat(t.getRanges()).sort(this.rangeOrder),n=[];let i=r[0];for(let o=1;o<r.length;o+=1){const l=r[o];l.min()>i.max()+1?(n.push(i),i=l):l.max()>i.max()&&(i=new Ce(i.min(),l.max()))}return n.push(i),n.length===1?n[0]:new Ce(n)}intersection(t){let r=this,n=t;const i=this.ranges(),o=n.ranges(),l=i.length,s=o.length;let d=0,u=0;const c=[];for(;d<l&&u<s;){r=i[d],n=o[u];const w=Math.max(r.min(),n.min()),_=Math.min(r.max(),n.max());_>=w&&c.push(new Ce(w,_)),r.max()>n.max()?u+=1:d+=1}if(c.length===0)throw new Error("found range of length 0");return c.length===1?c[0]:new Ce(c)}coverage(){let t=0;const r=this.ranges();for(const n of r)t+=n.max()-n.min()+1;return t}rangeOrder(t,r){let n=t,i=r;return arguments.length<2&&(i=n,n=this),n.min()<i.min()?-1:n.min()>i.min()?1:n.max()<i.max()?-1:i.max()>n.max()?1:0}}/*! pako 2.1.0 https://github.com/nodeca/pako @license (MIT AND Zlib) */const Ks=4,di=0,pi=1,Js=2;function Je(e){let t=e.length;for(;--t>=0;)e[t]=0}const Qs=0,gi=1,ef=2,tf=3,rf=258,Lr=29,bt=256,_t=bt+1+Lr,Qe=30,Pr=19,bi=2*_t+1,Pe=15,Dr=16,nf=7,Vr=256,_i=16,wi=17,mi=18,Zr=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),er=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),of=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),yi=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),af=512,ve=new Array((_t+2)*2);Je(ve);const wt=new Array(Qe*2);Je(wt);const mt=new Array(af);Je(mt);const yt=new Array(rf-tf+1);Je(yt);const jr=new Array(Lr);Je(jr);const tr=new Array(Qe);Je(tr);function Hr(e,t,r,n,i){this.static_tree=e,this.extra_bits=t,this.extra_base=r,this.elems=n,this.max_length=i,this.has_stree=e&&e.length}let xi,vi,Ei;function Gr(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}const ki=e=>e<256?mt[e]:mt[256+(e>>>7)],xt=(e,t)=>{e.pending_buf[e.pending++]=t&255,e.pending_buf[e.pending++]=t>>>8&255},ee=(e,t,r)=>{e.bi_valid>Dr-r?(e.bi_buf|=t<<e.bi_valid&65535,xt(e,e.bi_buf),e.bi_buf=t>>Dr-e.bi_valid,e.bi_valid+=r-Dr):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=r)},pe=(e,t,r)=>{ee(e,r[t*2],r[t*2+1])},$i=(e,t)=>{let r=0;do r|=e&1,e>>>=1,r<<=1;while(--t>0);return r>>>1},sf=e=>{e.bi_valid===16?(xt(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=e.bi_buf&255,e.bi_buf>>=8,e.bi_valid-=8)},ff=(e,t)=>{const r=t.dyn_tree,n=t.max_code,i=t.stat_desc.static_tree,o=t.stat_desc.has_stree,l=t.stat_desc.extra_bits,s=t.stat_desc.extra_base,d=t.stat_desc.max_length;let u,c,w,_,b,x,$=0;for(_=0;_<=Pe;_++)e.bl_count[_]=0;for(r[e.heap[e.heap_max]*2+1]=0,u=e.heap_max+1;u<bi;u++)c=e.heap[u],_=r[r[c*2+1]*2+1]+1,_>d&&(_=d,$++),r[c*2+1]=_,!(c>n)&&(e.bl_count[_]++,b=0,c>=s&&(b=l[c-s]),x=r[c*2],e.opt_len+=x*(_+b),o&&(e.static_len+=x*(i[c*2+1]+b)));if($!==0){do{for(_=d-1;e.bl_count[_]===0;)_--;e.bl_count[_]--,e.bl_count[_+1]+=2,e.bl_count[d]--,$-=2}while($>0);for(_=d;_!==0;_--)for(c=e.bl_count[_];c!==0;)w=e.heap[--u],!(w>n)&&(r[w*2+1]!==_&&(e.opt_len+=(_-r[w*2+1])*r[w*2],r[w*2+1]=_),c--)}},Ci=(e,t,r)=>{const n=new Array(Pe+1);let i=0,o,l;for(o=1;o<=Pe;o++)i=i+r[o-1]<<1,n[o]=i;for(l=0;l<=t;l++){let s=e[l*2+1];s!==0&&(e[l*2]=$i(n[s]++,s))}},lf=()=>{let e,t,r,n,i;const o=new Array(Pe+1);for(r=0,n=0;n<Lr-1;n++)for(jr[n]=r,e=0;e<1<<Zr[n];e++)yt[r++]=n;for(yt[r-1]=n,i=0,n=0;n<16;n++)for(tr[n]=i,e=0;e<1<<er[n];e++)mt[i++]=n;for(i>>=7;n<Qe;n++)for(tr[n]=i<<7,e=0;e<1<<er[n]-7;e++)mt[256+i++]=n;for(t=0;t<=Pe;t++)o[t]=0;for(e=0;e<=143;)ve[e*2+1]=8,e++,o[8]++;for(;e<=255;)ve[e*2+1]=9,e++,o[9]++;for(;e<=279;)ve[e*2+1]=7,e++,o[7]++;for(;e<=287;)ve[e*2+1]=8,e++,o[8]++;for(Ci(ve,_t+1,o),e=0;e<Qe;e++)wt[e*2+1]=5,wt[e*2]=$i(e,5);xi=new Hr(ve,Zr,bt+1,_t,Pe),vi=new Hr(wt,er,0,Qe,Pe),Ei=new Hr(new Array(0),of,0,Pr,nf)},Si=e=>{let t;for(t=0;t<_t;t++)e.dyn_ltree[t*2]=0;for(t=0;t<Qe;t++)e.dyn_dtree[t*2]=0;for(t=0;t<Pr;t++)e.bl_tree[t*2]=0;e.dyn_ltree[Vr*2]=1,e.opt_len=e.static_len=0,e.sym_next=e.matches=0},Ai=e=>{e.bi_valid>8?xt(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0},Ti=(e,t,r,n)=>{const i=t*2,o=r*2;return e[i]<e[o]||e[i]===e[o]&&n[t]<=n[r]},Wr=(e,t,r)=>{const n=e.heap[r];let i=r<<1;for(;i<=e.heap_len&&(i<e.heap_len&&Ti(t,e.heap[i+1],e.heap[i],e.depth)&&i++,!Ti(t,n,e.heap[i],e.depth));)e.heap[r]=e.heap[i],r=i,i<<=1;e.heap[r]=n},Bi=(e,t,r)=>{let n,i,o=0,l,s;if(e.sym_next!==0)do n=e.pending_buf[e.sym_buf+o++]&255,n+=(e.pending_buf[e.sym_buf+o++]&255)<<8,i=e.pending_buf[e.sym_buf+o++],n===0?pe(e,i,t):(l=yt[i],pe(e,l+bt+1,t),s=Zr[l],s!==0&&(i-=jr[l],ee(e,i,s)),n--,l=ki(n),pe(e,l,r),s=er[l],s!==0&&(n-=tr[l],ee(e,n,s)));while(o<e.sym_next);pe(e,Vr,t)},Yr=(e,t)=>{const r=t.dyn_tree,n=t.stat_desc.static_tree,i=t.stat_desc.has_stree,o=t.stat_desc.elems;let l,s,d=-1,u;for(e.heap_len=0,e.heap_max=bi,l=0;l<o;l++)r[l*2]!==0?(e.heap[++e.heap_len]=d=l,e.depth[l]=0):r[l*2+1]=0;for(;e.heap_len<2;)u=e.heap[++e.heap_len]=d<2?++d:0,r[u*2]=1,e.depth[u]=0,e.opt_len--,i&&(e.static_len-=n[u*2+1]);for(t.max_code=d,l=e.heap_len>>1;l>=1;l--)Wr(e,r,l);u=o;do l=e.heap[1],e.heap[1]=e.heap[e.heap_len--],Wr(e,r,1),s=e.heap[1],e.heap[--e.heap_max]=l,e.heap[--e.heap_max]=s,r[u*2]=r[l*2]+r[s*2],e.depth[u]=(e.depth[l]>=e.depth[s]?e.depth[l]:e.depth[s])+1,r[l*2+1]=r[s*2+1]=u,e.heap[1]=u++,Wr(e,r,1);while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],ff(e,t),Ci(r,d,e.bl_count)},Ii=(e,t,r)=>{let n,i=-1,o,l=t[0*2+1],s=0,d=7,u=4;for(l===0&&(d=138,u=3),t[(r+1)*2+1]=65535,n=0;n<=r;n++)o=l,l=t[(n+1)*2+1],!(++s<d&&o===l)&&(s<u?e.bl_tree[o*2]+=s:o!==0?(o!==i&&e.bl_tree[o*2]++,e.bl_tree[_i*2]++):s<=10?e.bl_tree[wi*2]++:e.bl_tree[mi*2]++,s=0,i=o,l===0?(d=138,u=3):o===l?(d=6,u=3):(d=7,u=4))},Ni=(e,t,r)=>{let n,i=-1,o,l=t[0*2+1],s=0,d=7,u=4;for(l===0&&(d=138,u=3),n=0;n<=r;n++)if(o=l,l=t[(n+1)*2+1],!(++s<d&&o===l)){if(s<u)do pe(e,o,e.bl_tree);while(--s!==0);else o!==0?(o!==i&&(pe(e,o,e.bl_tree),s--),pe(e,_i,e.bl_tree),ee(e,s-3,2)):s<=10?(pe(e,wi,e.bl_tree),ee(e,s-3,3)):(pe(e,mi,e.bl_tree),ee(e,s-11,7));s=0,i=o,l===0?(d=138,u=3):o===l?(d=6,u=3):(d=7,u=4)}},uf=e=>{let t;for(Ii(e,e.dyn_ltree,e.l_desc.max_code),Ii(e,e.dyn_dtree,e.d_desc.max_code),Yr(e,e.bl_desc),t=Pr-1;t>=3&&e.bl_tree[yi[t]*2+1]===0;t--);return e.opt_len+=3*(t+1)+5+5+4,t},hf=(e,t,r,n)=>{let i;for(ee(e,t-257,5),ee(e,r-1,5),ee(e,n-4,4),i=0;i<n;i++)ee(e,e.bl_tree[yi[i]*2+1],3);Ni(e,e.dyn_ltree,t-1),Ni(e,e.dyn_dtree,r-1)},cf=e=>{let t=4093624447,r;for(r=0;r<=31;r++,t>>>=1)if(t&1&&e.dyn_ltree[r*2]!==0)return di;if(e.dyn_ltree[9*2]!==0||e.dyn_ltree[10*2]!==0||e.dyn_ltree[13*2]!==0)return pi;for(r=32;r<bt;r++)if(e.dyn_ltree[r*2]!==0)return pi;return di};let Ri=!1;const df=e=>{Ri||(lf(),Ri=!0),e.l_desc=new Gr(e.dyn_ltree,xi),e.d_desc=new Gr(e.dyn_dtree,vi),e.bl_desc=new Gr(e.bl_tree,Ei),e.bi_buf=0,e.bi_valid=0,Si(e)},Oi=(e,t,r,n)=>{ee(e,(Qs<<1)+(n?1:0),3),Ai(e),xt(e,r),xt(e,~r),r&&e.pending_buf.set(e.window.subarray(t,t+r),e.pending),e.pending+=r},pf=e=>{ee(e,gi<<1,3),pe(e,Vr,ve),sf(e)},gf=(e,t,r,n)=>{let i,o,l=0;e.level>0?(e.strm.data_type===Js&&(e.strm.data_type=cf(e)),Yr(e,e.l_desc),Yr(e,e.d_desc),l=uf(e),i=e.opt_len+3+7>>>3,o=e.static_len+3+7>>>3,o<=i&&(i=o)):i=o=r+5,r+4<=i&&t!==-1?Oi(e,t,r,n):e.strategy===Ks||o===i?(ee(e,(gi<<1)+(n?1:0),3),Bi(e,ve,wt)):(ee(e,(ef<<1)+(n?1:0),3),hf(e,e.l_desc.max_code+1,e.d_desc.max_code+1,l+1),Bi(e,e.dyn_ltree,e.dyn_dtree)),Si(e),n&&Ai(e)},bf=(e,t,r)=>(e.pending_buf[e.sym_buf+e.sym_next++]=t,e.pending_buf[e.sym_buf+e.sym_next++]=t>>8,e.pending_buf[e.sym_buf+e.sym_next++]=r,t===0?e.dyn_ltree[r*2]++:(e.matches++,t--,e.dyn_ltree[(yt[r]+bt+1)*2]++,e.dyn_dtree[ki(t)*2]++),e.sym_next===e.sym_end);var _f=df,wf=Oi,mf=gf,yf=bf,xf=pf,vf={_tr_init:_f,_tr_stored_block:wf,_tr_flush_block:mf,_tr_tally:yf,_tr_align:xf},vt=(e,t,r,n)=>{let i=e&65535|0,o=e>>>16&65535|0,l=0;for(;r!==0;){l=r>2e3?2e3:r,r-=l;do i=i+t[n++]|0,o=o+i|0;while(--l);i%=65521,o%=65521}return i|o<<16|0};const Ef=()=>{let e,t=[];for(var r=0;r<256;r++){e=r;for(var n=0;n<8;n++)e=e&1?3988292384^e>>>1:e>>>1;t[r]=e}return t},kf=new Uint32Array(Ef());var q=(e,t,r,n)=>{const i=kf,o=n+r;e^=-1;for(let l=n;l<o;l++)e=e>>>8^i[(e^t[l])&255];return e^-1},et={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},Et={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:$f,_tr_stored_block:qr,_tr_flush_block:Cf,_tr_tally:Se,_tr_align:Sf}=vf,{Z_NO_FLUSH:Ae,Z_PARTIAL_FLUSH:Af,Z_FULL_FLUSH:Tf,Z_FINISH:ae,Z_BLOCK:Mi,Z_OK:K,Z_STREAM_END:Fi,Z_STREAM_ERROR:ge,Z_DATA_ERROR:Bf,Z_BUF_ERROR:Xr,Z_DEFAULT_COMPRESSION:If,Z_FILTERED:Nf,Z_HUFFMAN_ONLY:rr,Z_RLE:Rf,Z_FIXED:Of,Z_DEFAULT_STRATEGY:Mf,Z_UNKNOWN:Ff,Z_DEFLATED:nr}=Et,zf=9,Uf=15,Lf=8,Pf=29,Kr=256+1+Pf,Df=30,Vf=19,Zf=2*Kr+1,jf=15,F=3,Te=258,be=Te+F+1,Hf=32,tt=42,Jr=57,Qr=69,en=73,tn=91,rn=103,De=113,kt=666,J=1,rt=2,Ve=3,nt=4,Gf=3,Ze=(e,t)=>(e.msg=et[t],t),zi=e=>e*2-(e>4?9:0),Be=e=>{let t=e.length;for(;--t>=0;)e[t]=0},Wf=e=>{let t,r,n,i=e.w_size;t=e.hash_size,n=t;do r=e.head[--n],e.head[n]=r>=i?r-i:0;while(--t);t=i,n=t;do r=e.prev[--n],e.prev[n]=r>=i?r-i:0;while(--t)};let Ie=(e,t,r)=>(t<<e.hash_shift^r)&e.hash_mask;const re=e=>{const t=e.state;let r=t.pending;r>e.avail_out&&(r=e.avail_out),r!==0&&(e.output.set(t.pending_buf.subarray(t.pending_out,t.pending_out+r),e.next_out),e.next_out+=r,t.pending_out+=r,e.total_out+=r,e.avail_out-=r,t.pending-=r,t.pending===0&&(t.pending_out=0))},ne=(e,t)=>{Cf(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,re(e.strm)},L=(e,t)=>{e.pending_buf[e.pending++]=t},$t=(e,t)=>{e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=t&255},nn=(e,t,r,n)=>{let i=e.avail_in;return i>n&&(i=n),i===0?0:(e.avail_in-=i,t.set(e.input.subarray(e.next_in,e.next_in+i),r),e.state.wrap===1?e.adler=vt(e.adler,t,i,r):e.state.wrap===2&&(e.adler=q(e.adler,t,i,r)),e.next_in+=i,e.total_in+=i,i)},Ui=(e,t)=>{let r=e.max_chain_length,n=e.strstart,i,o,l=e.prev_length,s=e.nice_match;const d=e.strstart>e.w_size-be?e.strstart-(e.w_size-be):0,u=e.window,c=e.w_mask,w=e.prev,_=e.strstart+Te;let b=u[n+l-1],x=u[n+l];e.prev_length>=e.good_match&&(r>>=2),s>e.lookahead&&(s=e.lookahead);do if(i=t,!(u[i+l]!==x||u[i+l-1]!==b||u[i]!==u[n]||u[++i]!==u[n+1])){n+=2,i++;do;while(u[++n]===u[++i]&&u[++n]===u[++i]&&u[++n]===u[++i]&&u[++n]===u[++i]&&u[++n]===u[++i]&&u[++n]===u[++i]&&u[++n]===u[++i]&&u[++n]===u[++i]&&n<_);if(o=Te-(_-n),n=_-Te,o>l){if(e.match_start=t,l=o,o>=s)break;b=u[n+l-1],x=u[n+l]}}while((t=w[t&c])>d&&--r!==0);return l<=e.lookahead?l:e.lookahead},it=e=>{const t=e.w_size;let r,n,i;do{if(n=e.window_size-e.lookahead-e.strstart,e.strstart>=t+(t-be)&&(e.window.set(e.window.subarray(t,t+t-n),0),e.match_start-=t,e.strstart-=t,e.block_start-=t,e.insert>e.strstart&&(e.insert=e.strstart),Wf(e),n+=t),e.strm.avail_in===0)break;if(r=nn(e.strm,e.window,e.strstart+e.lookahead,n),e.lookahead+=r,e.lookahead+e.insert>=F)for(i=e.strstart-e.insert,e.ins_h=e.window[i],e.ins_h=Ie(e,e.ins_h,e.window[i+1]);e.insert&&(e.ins_h=Ie(e,e.ins_h,e.window[i+F-1]),e.prev[i&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=i,i++,e.insert--,!(e.lookahead+e.insert<F)););}while(e.lookahead<be&&e.strm.avail_in!==0)},Li=(e,t)=>{let r=e.pending_buf_size-5>e.w_size?e.w_size:e.pending_buf_size-5,n,i,o,l=0,s=e.strm.avail_in;do{if(n=65535,o=e.bi_valid+42>>3,e.strm.avail_out<o||(o=e.strm.avail_out-o,i=e.strstart-e.block_start,n>i+e.strm.avail_in&&(n=i+e.strm.avail_in),n>o&&(n=o),n<r&&(n===0&&t!==ae||t===Ae||n!==i+e.strm.avail_in)))break;l=t===ae&&n===i+e.strm.avail_in?1:0,qr(e,0,0,l),e.pending_buf[e.pending-4]=n,e.pending_buf[e.pending-3]=n>>8,e.pending_buf[e.pending-2]=~n,e.pending_buf[e.pending-1]=~n>>8,re(e.strm),i&&(i>n&&(i=n),e.strm.output.set(e.window.subarray(e.block_start,e.block_start+i),e.strm.next_out),e.strm.next_out+=i,e.strm.avail_out-=i,e.strm.total_out+=i,e.block_start+=i,n-=i),n&&(nn(e.strm,e.strm.output,e.strm.next_out,n),e.strm.next_out+=n,e.strm.avail_out-=n,e.strm.total_out+=n)}while(l===0);return s-=e.strm.avail_in,s&&(s>=e.w_size?(e.matches=2,e.window.set(e.strm.input.subarray(e.strm.next_in-e.w_size,e.strm.next_in),0),e.strstart=e.w_size,e.insert=e.strstart):(e.window_size-e.strstart<=s&&(e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,e.insert>e.strstart&&(e.insert=e.strstart)),e.window.set(e.strm.input.subarray(e.strm.next_in-s,e.strm.next_in),e.strstart),e.strstart+=s,e.insert+=s>e.w_size-e.insert?e.w_size-e.insert:s),e.block_start=e.strstart),e.high_water<e.strstart&&(e.high_water=e.strstart),l?nt:t!==Ae&&t!==ae&&e.strm.avail_in===0&&e.strstart===e.block_start?rt:(o=e.window_size-e.strstart,e.strm.avail_in>o&&e.block_start>=e.w_size&&(e.block_start-=e.w_size,e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,o+=e.w_size,e.insert>e.strstart&&(e.insert=e.strstart)),o>e.strm.avail_in&&(o=e.strm.avail_in),o&&(nn(e.strm,e.window,e.strstart,o),e.strstart+=o,e.insert+=o>e.w_size-e.insert?e.w_size-e.insert:o),e.high_water<e.strstart&&(e.high_water=e.strstart),o=e.bi_valid+42>>3,o=e.pending_buf_size-o>65535?65535:e.pending_buf_size-o,r=o>e.w_size?e.w_size:o,i=e.strstart-e.block_start,(i>=r||(i||t===ae)&&t!==Ae&&e.strm.avail_in===0&&i<=o)&&(n=i>o?o:i,l=t===ae&&e.strm.avail_in===0&&n===i?1:0,qr(e,e.block_start,n,l),e.block_start+=n,re(e.strm)),l?Ve:J)},on=(e,t)=>{let r,n;for(;;){if(e.lookahead<be){if(it(e),e.lookahead<be&&t===Ae)return J;if(e.lookahead===0)break}if(r=0,e.lookahead>=F&&(e.ins_h=Ie(e,e.ins_h,e.window[e.strstart+F-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),r!==0&&e.strstart-r<=e.w_size-be&&(e.match_length=Ui(e,r)),e.match_length>=F)if(n=Se(e,e.strstart-e.match_start,e.match_length-F),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=F){e.match_length--;do e.strstart++,e.ins_h=Ie(e,e.ins_h,e.window[e.strstart+F-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart;while(--e.match_length!==0);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=Ie(e,e.ins_h,e.window[e.strstart+1]);else n=Se(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(n&&(ne(e,!1),e.strm.avail_out===0))return J}return e.insert=e.strstart<F-1?e.strstart:F-1,t===ae?(ne(e,!0),e.strm.avail_out===0?Ve:nt):e.sym_next&&(ne(e,!1),e.strm.avail_out===0)?J:rt},ot=(e,t)=>{let r,n,i;for(;;){if(e.lookahead<be){if(it(e),e.lookahead<be&&t===Ae)return J;if(e.lookahead===0)break}if(r=0,e.lookahead>=F&&(e.ins_h=Ie(e,e.ins_h,e.window[e.strstart+F-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=F-1,r!==0&&e.prev_length<e.max_lazy_match&&e.strstart-r<=e.w_size-be&&(e.match_length=Ui(e,r),e.match_length<=5&&(e.strategy===Nf||e.match_length===F&&e.strstart-e.match_start>4096)&&(e.match_length=F-1)),e.prev_length>=F&&e.match_length<=e.prev_length){i=e.strstart+e.lookahead-F,n=Se(e,e.strstart-1-e.prev_match,e.prev_length-F),e.lookahead-=e.prev_length-1,e.prev_length-=2;do++e.strstart<=i&&(e.ins_h=Ie(e,e.ins_h,e.window[e.strstart+F-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart);while(--e.prev_length!==0);if(e.match_available=0,e.match_length=F-1,e.strstart++,n&&(ne(e,!1),e.strm.avail_out===0))return J}else if(e.match_available){if(n=Se(e,0,e.window[e.strstart-1]),n&&ne(e,!1),e.strstart++,e.lookahead--,e.strm.avail_out===0)return J}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(n=Se(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<F-1?e.strstart:F-1,t===ae?(ne(e,!0),e.strm.avail_out===0?Ve:nt):e.sym_next&&(ne(e,!1),e.strm.avail_out===0)?J:rt},Yf=(e,t)=>{let r,n,i,o;const l=e.window;for(;;){if(e.lookahead<=Te){if(it(e),e.lookahead<=Te&&t===Ae)return J;if(e.lookahead===0)break}if(e.match_length=0,e.lookahead>=F&&e.strstart>0&&(i=e.strstart-1,n=l[i],n===l[++i]&&n===l[++i]&&n===l[++i])){o=e.strstart+Te;do;while(n===l[++i]&&n===l[++i]&&n===l[++i]&&n===l[++i]&&n===l[++i]&&n===l[++i]&&n===l[++i]&&n===l[++i]&&i<o);e.match_length=Te-(o-i),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=F?(r=Se(e,1,e.match_length-F),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(r=Se(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),r&&(ne(e,!1),e.strm.avail_out===0))return J}return e.insert=0,t===ae?(ne(e,!0),e.strm.avail_out===0?Ve:nt):e.sym_next&&(ne(e,!1),e.strm.avail_out===0)?J:rt},qf=(e,t)=>{let r;for(;;){if(e.lookahead===0&&(it(e),e.lookahead===0)){if(t===Ae)return J;break}if(e.match_length=0,r=Se(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,r&&(ne(e,!1),e.strm.avail_out===0))return J}return e.insert=0,t===ae?(ne(e,!0),e.strm.avail_out===0?Ve:nt):e.sym_next&&(ne(e,!1),e.strm.avail_out===0)?J:rt};function _e(e,t,r,n,i){this.good_length=e,this.max_lazy=t,this.nice_length=r,this.max_chain=n,this.func=i}const Ct=[new _e(0,0,0,0,Li),new _e(4,4,8,4,on),new _e(4,5,16,8,on),new _e(4,6,32,32,on),new _e(4,4,16,16,ot),new _e(8,16,32,32,ot),new _e(8,16,128,128,ot),new _e(8,32,128,256,ot),new _e(32,128,258,1024,ot),new _e(32,258,258,4096,ot)],Xf=e=>{e.window_size=2*e.w_size,Be(e.head),e.max_lazy_match=Ct[e.level].max_lazy,e.good_match=Ct[e.level].good_length,e.nice_match=Ct[e.level].nice_length,e.max_chain_length=Ct[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=F-1,e.match_available=0,e.ins_h=0};function Kf(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=nr,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(Zf*2),this.dyn_dtree=new Uint16Array((2*Df+1)*2),this.bl_tree=new Uint16Array((2*Vf+1)*2),Be(this.dyn_ltree),Be(this.dyn_dtree),Be(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(jf+1),this.heap=new Uint16Array(2*Kr+1),Be(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*Kr+1),Be(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const St=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.status!==tt&&t.status!==Jr&&t.status!==Qr&&t.status!==en&&t.status!==tn&&t.status!==rn&&t.status!==De&&t.status!==kt?1:0},Pi=e=>{if(St(e))return Ze(e,ge);e.total_in=e.total_out=0,e.data_type=Ff;const t=e.state;return t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap===2?Jr:t.wrap?tt:De,e.adler=t.wrap===2?0:1,t.last_flush=-2,$f(t),K},Di=e=>{const t=Pi(e);return t===K&&Xf(e.state),t},Jf=(e,t)=>St(e)||e.state.wrap!==2?ge:(e.state.gzhead=t,K),Vi=(e,t,r,n,i,o)=>{if(!e)return ge;let l=1;if(t===If&&(t=6),n<0?(l=0,n=-n):n>15&&(l=2,n-=16),i<1||i>zf||r!==nr||n<8||n>15||t<0||t>9||o<0||o>Of||n===8&&l!==1)return Ze(e,ge);n===8&&(n=9);const s=new Kf;return e.state=s,s.strm=e,s.status=tt,s.wrap=l,s.gzhead=null,s.w_bits=n,s.w_size=1<<s.w_bits,s.w_mask=s.w_size-1,s.hash_bits=i+7,s.hash_size=1<<s.hash_bits,s.hash_mask=s.hash_size-1,s.hash_shift=~~((s.hash_bits+F-1)/F),s.window=new Uint8Array(s.w_size*2),s.head=new Uint16Array(s.hash_size),s.prev=new Uint16Array(s.w_size),s.lit_bufsize=1<<i+6,s.pending_buf_size=s.lit_bufsize*4,s.pending_buf=new Uint8Array(s.pending_buf_size),s.sym_buf=s.lit_bufsize,s.sym_end=(s.lit_bufsize-1)*3,s.level=t,s.strategy=o,s.method=r,Di(e)},Qf=(e,t)=>Vi(e,t,nr,Uf,Lf,Mf),el=(e,t)=>{if(St(e)||t>Mi||t<0)return e?Ze(e,ge):ge;const r=e.state;if(!e.output||e.avail_in!==0&&!e.input||r.status===kt&&t!==ae)return Ze(e,e.avail_out===0?Xr:ge);const n=r.last_flush;if(r.last_flush=t,r.pending!==0){if(re(e),e.avail_out===0)return r.last_flush=-1,K}else if(e.avail_in===0&&zi(t)<=zi(n)&&t!==ae)return Ze(e,Xr);if(r.status===kt&&e.avail_in!==0)return Ze(e,Xr);if(r.status===tt&&r.wrap===0&&(r.status=De),r.status===tt){let i=nr+(r.w_bits-8<<4)<<8,o=-1;if(r.strategy>=rr||r.level<2?o=0:r.level<6?o=1:r.level===6?o=2:o=3,i|=o<<6,r.strstart!==0&&(i|=Hf),i+=31-i%31,$t(r,i),r.strstart!==0&&($t(r,e.adler>>>16),$t(r,e.adler&65535)),e.adler=1,r.status=De,re(e),r.pending!==0)return r.last_flush=-1,K}if(r.status===Jr){if(e.adler=0,L(r,31),L(r,139),L(r,8),r.gzhead)L(r,(r.gzhead.text?1:0)+(r.gzhead.hcrc?2:0)+(r.gzhead.extra?4:0)+(r.gzhead.name?8:0)+(r.gzhead.comment?16:0)),L(r,r.gzhead.time&255),L(r,r.gzhead.time>>8&255),L(r,r.gzhead.time>>16&255),L(r,r.gzhead.time>>24&255),L(r,r.level===9?2:r.strategy>=rr||r.level<2?4:0),L(r,r.gzhead.os&255),r.gzhead.extra&&r.gzhead.extra.length&&(L(r,r.gzhead.extra.length&255),L(r,r.gzhead.extra.length>>8&255)),r.gzhead.hcrc&&(e.adler=q(e.adler,r.pending_buf,r.pending,0)),r.gzindex=0,r.status=Qr;else if(L(r,0),L(r,0),L(r,0),L(r,0),L(r,0),L(r,r.level===9?2:r.strategy>=rr||r.level<2?4:0),L(r,Gf),r.status=De,re(e),r.pending!==0)return r.last_flush=-1,K}if(r.status===Qr){if(r.gzhead.extra){let i=r.pending,o=(r.gzhead.extra.length&65535)-r.gzindex;for(;r.pending+o>r.pending_buf_size;){let s=r.pending_buf_size-r.pending;if(r.pending_buf.set(r.gzhead.extra.subarray(r.gzindex,r.gzindex+s),r.pending),r.pending=r.pending_buf_size,r.gzhead.hcrc&&r.pending>i&&(e.adler=q(e.adler,r.pending_buf,r.pending-i,i)),r.gzindex+=s,re(e),r.pending!==0)return r.last_flush=-1,K;i=0,o-=s}let l=new Uint8Array(r.gzhead.extra);r.pending_buf.set(l.subarray(r.gzindex,r.gzindex+o),r.pending),r.pending+=o,r.gzhead.hcrc&&r.pending>i&&(e.adler=q(e.adler,r.pending_buf,r.pending-i,i)),r.gzindex=0}r.status=en}if(r.status===en){if(r.gzhead.name){let i=r.pending,o;do{if(r.pending===r.pending_buf_size){if(r.gzhead.hcrc&&r.pending>i&&(e.adler=q(e.adler,r.pending_buf,r.pending-i,i)),re(e),r.pending!==0)return r.last_flush=-1,K;i=0}r.gzindex<r.gzhead.name.length?o=r.gzhead.name.charCodeAt(r.gzindex++)&255:o=0,L(r,o)}while(o!==0);r.gzhead.hcrc&&r.pending>i&&(e.adler=q(e.adler,r.pending_buf,r.pending-i,i)),r.gzindex=0}r.status=tn}if(r.status===tn){if(r.gzhead.comment){let i=r.pending,o;do{if(r.pending===r.pending_buf_size){if(r.gzhead.hcrc&&r.pending>i&&(e.adler=q(e.adler,r.pending_buf,r.pending-i,i)),re(e),r.pending!==0)return r.last_flush=-1,K;i=0}r.gzindex<r.gzhead.comment.length?o=r.gzhead.comment.charCodeAt(r.gzindex++)&255:o=0,L(r,o)}while(o!==0);r.gzhead.hcrc&&r.pending>i&&(e.adler=q(e.adler,r.pending_buf,r.pending-i,i))}r.status=rn}if(r.status===rn){if(r.gzhead.hcrc){if(r.pending+2>r.pending_buf_size&&(re(e),r.pending!==0))return r.last_flush=-1,K;L(r,e.adler&255),L(r,e.adler>>8&255),e.adler=0}if(r.status=De,re(e),r.pending!==0)return r.last_flush=-1,K}if(e.avail_in!==0||r.lookahead!==0||t!==Ae&&r.status!==kt){let i=r.level===0?Li(r,t):r.strategy===rr?qf(r,t):r.strategy===Rf?Yf(r,t):Ct[r.level].func(r,t);if((i===Ve||i===nt)&&(r.status=kt),i===J||i===Ve)return e.avail_out===0&&(r.last_flush=-1),K;if(i===rt&&(t===Af?Sf(r):t!==Mi&&(qr(r,0,0,!1),t===Tf&&(Be(r.head),r.lookahead===0&&(r.strstart=0,r.block_start=0,r.insert=0))),re(e),e.avail_out===0))return r.last_flush=-1,K}return t!==ae?K:r.wrap<=0?Fi:(r.wrap===2?(L(r,e.adler&255),L(r,e.adler>>8&255),L(r,e.adler>>16&255),L(r,e.adler>>24&255),L(r,e.total_in&255),L(r,e.total_in>>8&255),L(r,e.total_in>>16&255),L(r,e.total_in>>24&255)):($t(r,e.adler>>>16),$t(r,e.adler&65535)),re(e),r.wrap>0&&(r.wrap=-r.wrap),r.pending!==0?K:Fi)},tl=e=>{if(St(e))return ge;const t=e.state.status;return e.state=null,t===De?Ze(e,Bf):K},rl=(e,t)=>{let r=t.length;if(St(e))return ge;const n=e.state,i=n.wrap;if(i===2||i===1&&n.status!==tt||n.lookahead)return ge;if(i===1&&(e.adler=vt(e.adler,t,r,0)),n.wrap=0,r>=n.w_size){i===0&&(Be(n.head),n.strstart=0,n.block_start=0,n.insert=0);let d=new Uint8Array(n.w_size);d.set(t.subarray(r-n.w_size,r),0),t=d,r=n.w_size}const o=e.avail_in,l=e.next_in,s=e.input;for(e.avail_in=r,e.next_in=0,e.input=t,it(n);n.lookahead>=F;){let d=n.strstart,u=n.lookahead-(F-1);do n.ins_h=Ie(n,n.ins_h,n.window[d+F-1]),n.prev[d&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=d,d++;while(--u);n.strstart=d,n.lookahead=F-1,it(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=F-1,n.match_available=0,e.next_in=l,e.input=s,e.avail_in=o,n.wrap=i,K};var nl=Qf,il=Vi,ol=Di,al=Pi,sl=Jf,fl=el,ll=tl,ul=rl,hl="pako deflate (from Nodeca project)",At={deflateInit:nl,deflateInit2:il,deflateReset:ol,deflateResetKeep:al,deflateSetHeader:sl,deflate:fl,deflateEnd:ll,deflateSetDictionary:ul,deflateInfo:hl};const cl=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var dl=function(e){const t=Array.prototype.slice.call(arguments,1);for(;t.length;){const r=t.shift();if(r){if(typeof r!="object")throw new TypeError(r+"must be non-object");for(const n in r)cl(r,n)&&(e[n]=r[n])}}return e},pl=e=>{let t=0;for(let n=0,i=e.length;n<i;n++)t+=e[n].length;const r=new Uint8Array(t);for(let n=0,i=0,o=e.length;n<o;n++){let l=e[n];r.set(l,i),i+=l.length}return r},ir={assign:dl,flattenChunks:pl};let Zi=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{Zi=!1}const Tt=new Uint8Array(256);for(let e=0;e<256;e++)Tt[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;Tt[254]=Tt[254]=1;var gl=e=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(e);let t,r,n,i,o,l=e.length,s=0;for(i=0;i<l;i++)r=e.charCodeAt(i),(r&64512)===55296&&i+1<l&&(n=e.charCodeAt(i+1),(n&64512)===56320&&(r=65536+(r-55296<<10)+(n-56320),i++)),s+=r<128?1:r<2048?2:r<65536?3:4;for(t=new Uint8Array(s),o=0,i=0;o<s;i++)r=e.charCodeAt(i),(r&64512)===55296&&i+1<l&&(n=e.charCodeAt(i+1),(n&64512)===56320&&(r=65536+(r-55296<<10)+(n-56320),i++)),r<128?t[o++]=r:r<2048?(t[o++]=192|r>>>6,t[o++]=128|r&63):r<65536?(t[o++]=224|r>>>12,t[o++]=128|r>>>6&63,t[o++]=128|r&63):(t[o++]=240|r>>>18,t[o++]=128|r>>>12&63,t[o++]=128|r>>>6&63,t[o++]=128|r&63);return t};const bl=(e,t)=>{if(t<65534&&e.subarray&&Zi)return String.fromCharCode.apply(null,e.length===t?e:e.subarray(0,t));let r="";for(let n=0;n<t;n++)r+=String.fromCharCode(e[n]);return r};var _l=(e,t)=>{const r=t||e.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(e.subarray(0,t));let n,i;const o=new Array(r*2);for(i=0,n=0;n<r;){let l=e[n++];if(l<128){o[i++]=l;continue}let s=Tt[l];if(s>4){o[i++]=65533,n+=s-1;continue}for(l&=s===2?31:s===3?15:7;s>1&&n<r;)l=l<<6|e[n++]&63,s--;if(s>1){o[i++]=65533;continue}l<65536?o[i++]=l:(l-=65536,o[i++]=55296|l>>10&1023,o[i++]=56320|l&1023)}return bl(o,i)},wl=(e,t)=>{t=t||e.length,t>e.length&&(t=e.length);let r=t-1;for(;r>=0&&(e[r]&192)===128;)r--;return r<0||r===0?t:r+Tt[e[r]]>t?r:t},Bt={string2buf:gl,buf2string:_l,utf8border:wl};function ml(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var ji=ml;const Hi=Object.prototype.toString,{Z_NO_FLUSH:yl,Z_SYNC_FLUSH:xl,Z_FULL_FLUSH:vl,Z_FINISH:El,Z_OK:or,Z_STREAM_END:kl,Z_DEFAULT_COMPRESSION:$l,Z_DEFAULT_STRATEGY:Cl,Z_DEFLATED:Sl}=Et;function an(e){this.options=ir.assign({level:$l,method:Sl,chunkSize:16384,windowBits:15,memLevel:8,strategy:Cl},e||{});let t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new ji,this.strm.avail_out=0;let r=At.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(r!==or)throw new Error(et[r]);if(t.header&&At.deflateSetHeader(this.strm,t.header),t.dictionary){let n;if(typeof t.dictionary=="string"?n=Bt.string2buf(t.dictionary):Hi.call(t.dictionary)==="[object ArrayBuffer]"?n=new Uint8Array(t.dictionary):n=t.dictionary,r=At.deflateSetDictionary(this.strm,n),r!==or)throw new Error(et[r]);this._dict_set=!0}}an.prototype.push=function(e,t){const r=this.strm,n=this.options.chunkSize;let i,o;if(this.ended)return!1;for(t===~~t?o=t:o=t===!0?El:yl,typeof e=="string"?r.input=Bt.string2buf(e):Hi.call(e)==="[object ArrayBuffer]"?r.input=new Uint8Array(e):r.input=e,r.next_in=0,r.avail_in=r.input.length;;){if(r.avail_out===0&&(r.output=new Uint8Array(n),r.next_out=0,r.avail_out=n),(o===xl||o===vl)&&r.avail_out<=6){this.onData(r.output.subarray(0,r.next_out)),r.avail_out=0;continue}if(i=At.deflate(r,o),i===kl)return r.next_out>0&&this.onData(r.output.subarray(0,r.next_out)),i=At.deflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===or;if(r.avail_out===0){this.onData(r.output);continue}if(o>0&&r.next_out>0){this.onData(r.output.subarray(0,r.next_out)),r.avail_out=0;continue}if(r.avail_in===0)break}return!0},an.prototype.onData=function(e){this.chunks.push(e)},an.prototype.onEnd=function(e){e===or&&(this.result=ir.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};const ar=16209,Al=16191;var Tl=function(t,r){let n,i,o,l,s,d,u,c,w,_,b,x,$,N,A,B,I,E,T,O,S,R,y,C;const k=t.state;n=t.next_in,y=t.input,i=n+(t.avail_in-5),o=t.next_out,C=t.output,l=o-(r-t.avail_out),s=o+(t.avail_out-257),d=k.dmax,u=k.wsize,c=k.whave,w=k.wnext,_=k.window,b=k.hold,x=k.bits,$=k.lencode,N=k.distcode,A=(1<<k.lenbits)-1,B=(1<<k.distbits)-1;e:do{x<15&&(b+=y[n++]<<x,x+=8,b+=y[n++]<<x,x+=8),I=$[b&A];t:for(;;){if(E=I>>>24,b>>>=E,x-=E,E=I>>>16&255,E===0)C[o++]=I&65535;else if(E&16){T=I&65535,E&=15,E&&(x<E&&(b+=y[n++]<<x,x+=8),T+=b&(1<<E)-1,b>>>=E,x-=E),x<15&&(b+=y[n++]<<x,x+=8,b+=y[n++]<<x,x+=8),I=N[b&B];r:for(;;){if(E=I>>>24,b>>>=E,x-=E,E=I>>>16&255,E&16){if(O=I&65535,E&=15,x<E&&(b+=y[n++]<<x,x+=8,x<E&&(b+=y[n++]<<x,x+=8)),O+=b&(1<<E)-1,O>d){t.msg="invalid distance too far back",k.mode=ar;break e}if(b>>>=E,x-=E,E=o-l,O>E){if(E=O-E,E>c&&k.sane){t.msg="invalid distance too far back",k.mode=ar;break e}if(S=0,R=_,w===0){if(S+=u-E,E<T){T-=E;do C[o++]=_[S++];while(--E);S=o-O,R=C}}else if(w<E){if(S+=u+w-E,E-=w,E<T){T-=E;do C[o++]=_[S++];while(--E);if(S=0,w<T){E=w,T-=E;do C[o++]=_[S++];while(--E);S=o-O,R=C}}}else if(S+=w-E,E<T){T-=E;do C[o++]=_[S++];while(--E);S=o-O,R=C}for(;T>2;)C[o++]=R[S++],C[o++]=R[S++],C[o++]=R[S++],T-=3;T&&(C[o++]=R[S++],T>1&&(C[o++]=R[S++]))}else{S=o-O;do C[o++]=C[S++],C[o++]=C[S++],C[o++]=C[S++],T-=3;while(T>2);T&&(C[o++]=C[S++],T>1&&(C[o++]=C[S++]))}}else if(E&64){t.msg="invalid distance code",k.mode=ar;break e}else{I=N[(I&65535)+(b&(1<<E)-1)];continue r}break}}else if(E&64)if(E&32){k.mode=Al;break e}else{t.msg="invalid literal/length code",k.mode=ar;break e}else{I=$[(I&65535)+(b&(1<<E)-1)];continue t}break}}while(n<i&&o<s);T=x>>3,n-=T,x-=T<<3,b&=(1<<x)-1,t.next_in=n,t.next_out=o,t.avail_in=n<i?5+(i-n):5-(n-i),t.avail_out=o<s?257+(s-o):257-(o-s),k.hold=b,k.bits=x};const at=15,Gi=852,Wi=592,Yi=0,sn=1,qi=2,Bl=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),Il=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),Nl=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),Rl=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);var It=(e,t,r,n,i,o,l,s)=>{const d=s.bits;let u=0,c=0,w=0,_=0,b=0,x=0,$=0,N=0,A=0,B=0,I,E,T,O,S,R=null,y;const C=new Uint16Array(at+1),k=new Uint16Array(at+1);let z=null,V,P,W;for(u=0;u<=at;u++)C[u]=0;for(c=0;c<n;c++)C[t[r+c]]++;for(b=d,_=at;_>=1&&C[_]===0;_--);if(b>_&&(b=_),_===0)return i[o++]=1<<24|64<<16|0,i[o++]=1<<24|64<<16|0,s.bits=1,0;for(w=1;w<_&&C[w]===0;w++);for(b<w&&(b=w),N=1,u=1;u<=at;u++)if(N<<=1,N-=C[u],N<0)return-1;if(N>0&&(e===Yi||_!==1))return-1;for(k[1]=0,u=1;u<at;u++)k[u+1]=k[u]+C[u];for(c=0;c<n;c++)t[r+c]!==0&&(l[k[t[r+c]]++]=c);if(e===Yi?(R=z=l,y=20):e===sn?(R=Bl,z=Il,y=257):(R=Nl,z=Rl,y=0),B=0,c=0,u=w,S=o,x=b,$=0,T=-1,A=1<<b,O=A-1,e===sn&&A>Gi||e===qi&&A>Wi)return 1;for(;;){V=u-$,l[c]+1<y?(P=0,W=l[c]):l[c]>=y?(P=z[l[c]-y],W=R[l[c]-y]):(P=32+64,W=0),I=1<<u-$,E=1<<x,w=E;do E-=I,i[S+(B>>$)+E]=V<<24|P<<16|W|0;while(E!==0);for(I=1<<u-1;B&I;)I>>=1;if(I!==0?(B&=I-1,B+=I):B=0,c++,--C[u]===0){if(u===_)break;u=t[r+l[c]]}if(u>b&&(B&O)!==T){for($===0&&($=b),S+=w,x=u-$,N=1<<x;x+$<_&&(N-=C[x+$],!(N<=0));)x++,N<<=1;if(A+=1<<x,e===sn&&A>Gi||e===qi&&A>Wi)return 1;T=B&O,i[T]=b<<24|x<<16|S-o|0}}return B!==0&&(i[S+B]=u-$<<24|64<<16|0),s.bits=b,0};const Ol=0,Xi=1,Ki=2,{Z_FINISH:Ji,Z_BLOCK:Ml,Z_TREES:sr,Z_OK:je,Z_STREAM_END:Fl,Z_NEED_DICT:zl,Z_STREAM_ERROR:se,Z_DATA_ERROR:Qi,Z_MEM_ERROR:eo,Z_BUF_ERROR:Ul,Z_DEFLATED:to}=Et,fr=16180,ro=16181,no=16182,io=16183,oo=16184,ao=16185,so=16186,fo=16187,lo=16188,uo=16189,lr=16190,Ee=16191,fn=16192,ho=16193,ln=16194,co=16195,po=16196,go=16197,bo=16198,ur=16199,hr=16200,_o=16201,wo=16202,mo=16203,yo=16204,xo=16205,un=16206,vo=16207,Eo=16208,Z=16209,ko=16210,$o=16211,Ll=852,Pl=592,Dl=15,Co=e=>(e>>>24&255)+(e>>>8&65280)+((e&65280)<<8)+((e&255)<<24);function Vl(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const He=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.mode<fr||t.mode>$o?1:0},So=e=>{if(He(e))return se;const t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=t.wrap&1),t.mode=fr,t.last=0,t.havedict=0,t.flags=-1,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(Ll),t.distcode=t.distdyn=new Int32Array(Pl),t.sane=1,t.back=-1,je},Ao=e=>{if(He(e))return se;const t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,So(e)},To=(e,t)=>{let r;if(He(e))return se;const n=e.state;return t<0?(r=0,t=-t):(r=(t>>4)+5,t<48&&(t&=15)),t&&(t<8||t>15)?se:(n.window!==null&&n.wbits!==t&&(n.window=null),n.wrap=r,n.wbits=t,Ao(e))},Bo=(e,t)=>{if(!e)return se;const r=new Vl;e.state=r,r.strm=e,r.window=null,r.mode=fr;const n=To(e,t);return n!==je&&(e.state=null),n},Zl=e=>Bo(e,Dl);let Io=!0,hn,cn;const jl=e=>{if(Io){hn=new Int32Array(512),cn=new Int32Array(32);let t=0;for(;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(It(Xi,e.lens,0,288,hn,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;It(Ki,e.lens,0,32,cn,0,e.work,{bits:5}),Io=!1}e.lencode=hn,e.lenbits=9,e.distcode=cn,e.distbits=5},No=(e,t,r,n)=>{let i;const o=e.state;return o.window===null&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new Uint8Array(o.wsize)),n>=o.wsize?(o.window.set(t.subarray(r-o.wsize,r),0),o.wnext=0,o.whave=o.wsize):(i=o.wsize-o.wnext,i>n&&(i=n),o.window.set(t.subarray(r-n,r-n+i),o.wnext),n-=i,n?(o.window.set(t.subarray(r-n,r),0),o.wnext=n,o.whave=o.wsize):(o.wnext+=i,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=i))),0},Hl=(e,t)=>{let r,n,i,o,l,s,d,u,c,w,_,b,x,$,N=0,A,B,I,E,T,O,S,R;const y=new Uint8Array(4);let C,k;const z=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(He(e)||!e.output||!e.input&&e.avail_in!==0)return se;r=e.state,r.mode===Ee&&(r.mode=fn),l=e.next_out,i=e.output,d=e.avail_out,o=e.next_in,n=e.input,s=e.avail_in,u=r.hold,c=r.bits,w=s,_=d,R=je;e:for(;;)switch(r.mode){case fr:if(r.wrap===0){r.mode=fn;break}for(;c<16;){if(s===0)break e;s--,u+=n[o++]<<c,c+=8}if(r.wrap&2&&u===35615){r.wbits===0&&(r.wbits=15),r.check=0,y[0]=u&255,y[1]=u>>>8&255,r.check=q(r.check,y,2,0),u=0,c=0,r.mode=ro;break}if(r.head&&(r.head.done=!1),!(r.wrap&1)||(((u&255)<<8)+(u>>8))%31){e.msg="incorrect header check",r.mode=Z;break}if((u&15)!==to){e.msg="unknown compression method",r.mode=Z;break}if(u>>>=4,c-=4,S=(u&15)+8,r.wbits===0&&(r.wbits=S),S>15||S>r.wbits){e.msg="invalid window size",r.mode=Z;break}r.dmax=1<<r.wbits,r.flags=0,e.adler=r.check=1,r.mode=u&512?uo:Ee,u=0,c=0;break;case ro:for(;c<16;){if(s===0)break e;s--,u+=n[o++]<<c,c+=8}if(r.flags=u,(r.flags&255)!==to){e.msg="unknown compression method",r.mode=Z;break}if(r.flags&57344){e.msg="unknown header flags set",r.mode=Z;break}r.head&&(r.head.text=u>>8&1),r.flags&512&&r.wrap&4&&(y[0]=u&255,y[1]=u>>>8&255,r.check=q(r.check,y,2,0)),u=0,c=0,r.mode=no;case no:for(;c<32;){if(s===0)break e;s--,u+=n[o++]<<c,c+=8}r.head&&(r.head.time=u),r.flags&512&&r.wrap&4&&(y[0]=u&255,y[1]=u>>>8&255,y[2]=u>>>16&255,y[3]=u>>>24&255,r.check=q(r.check,y,4,0)),u=0,c=0,r.mode=io;case io:for(;c<16;){if(s===0)break e;s--,u+=n[o++]<<c,c+=8}r.head&&(r.head.xflags=u&255,r.head.os=u>>8),r.flags&512&&r.wrap&4&&(y[0]=u&255,y[1]=u>>>8&255,r.check=q(r.check,y,2,0)),u=0,c=0,r.mode=oo;case oo:if(r.flags&1024){for(;c<16;){if(s===0)break e;s--,u+=n[o++]<<c,c+=8}r.length=u,r.head&&(r.head.extra_len=u),r.flags&512&&r.wrap&4&&(y[0]=u&255,y[1]=u>>>8&255,r.check=q(r.check,y,2,0)),u=0,c=0}else r.head&&(r.head.extra=null);r.mode=ao;case ao:if(r.flags&1024&&(b=r.length,b>s&&(b=s),b&&(r.head&&(S=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Uint8Array(r.head.extra_len)),r.head.extra.set(n.subarray(o,o+b),S)),r.flags&512&&r.wrap&4&&(r.check=q(r.check,n,b,o)),s-=b,o+=b,r.length-=b),r.length))break e;r.length=0,r.mode=so;case so:if(r.flags&2048){if(s===0)break e;b=0;do S=n[o+b++],r.head&&S&&r.length<65536&&(r.head.name+=String.fromCharCode(S));while(S&&b<s);if(r.flags&512&&r.wrap&4&&(r.check=q(r.check,n,b,o)),s-=b,o+=b,S)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=fo;case fo:if(r.flags&4096){if(s===0)break e;b=0;do S=n[o+b++],r.head&&S&&r.length<65536&&(r.head.comment+=String.fromCharCode(S));while(S&&b<s);if(r.flags&512&&r.wrap&4&&(r.check=q(r.check,n,b,o)),s-=b,o+=b,S)break e}else r.head&&(r.head.comment=null);r.mode=lo;case lo:if(r.flags&512){for(;c<16;){if(s===0)break e;s--,u+=n[o++]<<c,c+=8}if(r.wrap&4&&u!==(r.check&65535)){e.msg="header crc mismatch",r.mode=Z;break}u=0,c=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),e.adler=r.check=0,r.mode=Ee;break;case uo:for(;c<32;){if(s===0)break e;s--,u+=n[o++]<<c,c+=8}e.adler=r.check=Co(u),u=0,c=0,r.mode=lr;case lr:if(r.havedict===0)return e.next_out=l,e.avail_out=d,e.next_in=o,e.avail_in=s,r.hold=u,r.bits=c,zl;e.adler=r.check=1,r.mode=Ee;case Ee:if(t===Ml||t===sr)break e;case fn:if(r.last){u>>>=c&7,c-=c&7,r.mode=un;break}for(;c<3;){if(s===0)break e;s--,u+=n[o++]<<c,c+=8}switch(r.last=u&1,u>>>=1,c-=1,u&3){case 0:r.mode=ho;break;case 1:if(jl(r),r.mode=ur,t===sr){u>>>=2,c-=2;break e}break;case 2:r.mode=po;break;case 3:e.msg="invalid block type",r.mode=Z}u>>>=2,c-=2;break;case ho:for(u>>>=c&7,c-=c&7;c<32;){if(s===0)break e;s--,u+=n[o++]<<c,c+=8}if((u&65535)!==(u>>>16^65535)){e.msg="invalid stored block lengths",r.mode=Z;break}if(r.length=u&65535,u=0,c=0,r.mode=ln,t===sr)break e;case ln:r.mode=co;case co:if(b=r.length,b){if(b>s&&(b=s),b>d&&(b=d),b===0)break e;i.set(n.subarray(o,o+b),l),s-=b,o+=b,d-=b,l+=b,r.length-=b;break}r.mode=Ee;break;case po:for(;c<14;){if(s===0)break e;s--,u+=n[o++]<<c,c+=8}if(r.nlen=(u&31)+257,u>>>=5,c-=5,r.ndist=(u&31)+1,u>>>=5,c-=5,r.ncode=(u&15)+4,u>>>=4,c-=4,r.nlen>286||r.ndist>30){e.msg="too many length or distance symbols",r.mode=Z;break}r.have=0,r.mode=go;case go:for(;r.have<r.ncode;){for(;c<3;){if(s===0)break e;s--,u+=n[o++]<<c,c+=8}r.lens[z[r.have++]]=u&7,u>>>=3,c-=3}for(;r.have<19;)r.lens[z[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,C={bits:r.lenbits},R=It(Ol,r.lens,0,19,r.lencode,0,r.work,C),r.lenbits=C.bits,R){e.msg="invalid code lengths set",r.mode=Z;break}r.have=0,r.mode=bo;case bo:for(;r.have<r.nlen+r.ndist;){for(;N=r.lencode[u&(1<<r.lenbits)-1],A=N>>>24,B=N>>>16&255,I=N&65535,!(A<=c);){if(s===0)break e;s--,u+=n[o++]<<c,c+=8}if(I<16)u>>>=A,c-=A,r.lens[r.have++]=I;else{if(I===16){for(k=A+2;c<k;){if(s===0)break e;s--,u+=n[o++]<<c,c+=8}if(u>>>=A,c-=A,r.have===0){e.msg="invalid bit length repeat",r.mode=Z;break}S=r.lens[r.have-1],b=3+(u&3),u>>>=2,c-=2}else if(I===17){for(k=A+3;c<k;){if(s===0)break e;s--,u+=n[o++]<<c,c+=8}u>>>=A,c-=A,S=0,b=3+(u&7),u>>>=3,c-=3}else{for(k=A+7;c<k;){if(s===0)break e;s--,u+=n[o++]<<c,c+=8}u>>>=A,c-=A,S=0,b=11+(u&127),u>>>=7,c-=7}if(r.have+b>r.nlen+r.ndist){e.msg="invalid bit length repeat",r.mode=Z;break}for(;b--;)r.lens[r.have++]=S}}if(r.mode===Z)break;if(r.lens[256]===0){e.msg="invalid code -- missing end-of-block",r.mode=Z;break}if(r.lenbits=9,C={bits:r.lenbits},R=It(Xi,r.lens,0,r.nlen,r.lencode,0,r.work,C),r.lenbits=C.bits,R){e.msg="invalid literal/lengths set",r.mode=Z;break}if(r.distbits=6,r.distcode=r.distdyn,C={bits:r.distbits},R=It(Ki,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,C),r.distbits=C.bits,R){e.msg="invalid distances set",r.mode=Z;break}if(r.mode=ur,t===sr)break e;case ur:r.mode=hr;case hr:if(s>=6&&d>=258){e.next_out=l,e.avail_out=d,e.next_in=o,e.avail_in=s,r.hold=u,r.bits=c,Tl(e,_),l=e.next_out,i=e.output,d=e.avail_out,o=e.next_in,n=e.input,s=e.avail_in,u=r.hold,c=r.bits,r.mode===Ee&&(r.back=-1);break}for(r.back=0;N=r.lencode[u&(1<<r.lenbits)-1],A=N>>>24,B=N>>>16&255,I=N&65535,!(A<=c);){if(s===0)break e;s--,u+=n[o++]<<c,c+=8}if(B&&!(B&240)){for(E=A,T=B,O=I;N=r.lencode[O+((u&(1<<E+T)-1)>>E)],A=N>>>24,B=N>>>16&255,I=N&65535,!(E+A<=c);){if(s===0)break e;s--,u+=n[o++]<<c,c+=8}u>>>=E,c-=E,r.back+=E}if(u>>>=A,c-=A,r.back+=A,r.length=I,B===0){r.mode=xo;break}if(B&32){r.back=-1,r.mode=Ee;break}if(B&64){e.msg="invalid literal/length code",r.mode=Z;break}r.extra=B&15,r.mode=_o;case _o:if(r.extra){for(k=r.extra;c<k;){if(s===0)break e;s--,u+=n[o++]<<c,c+=8}r.length+=u&(1<<r.extra)-1,u>>>=r.extra,c-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=wo;case wo:for(;N=r.distcode[u&(1<<r.distbits)-1],A=N>>>24,B=N>>>16&255,I=N&65535,!(A<=c);){if(s===0)break e;s--,u+=n[o++]<<c,c+=8}if(!(B&240)){for(E=A,T=B,O=I;N=r.distcode[O+((u&(1<<E+T)-1)>>E)],A=N>>>24,B=N>>>16&255,I=N&65535,!(E+A<=c);){if(s===0)break e;s--,u+=n[o++]<<c,c+=8}u>>>=E,c-=E,r.back+=E}if(u>>>=A,c-=A,r.back+=A,B&64){e.msg="invalid distance code",r.mode=Z;break}r.offset=I,r.extra=B&15,r.mode=mo;case mo:if(r.extra){for(k=r.extra;c<k;){if(s===0)break e;s--,u+=n[o++]<<c,c+=8}r.offset+=u&(1<<r.extra)-1,u>>>=r.extra,c-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){e.msg="invalid distance too far back",r.mode=Z;break}r.mode=yo;case yo:if(d===0)break e;if(b=_-d,r.offset>b){if(b=r.offset-b,b>r.whave&&r.sane){e.msg="invalid distance too far back",r.mode=Z;break}b>r.wnext?(b-=r.wnext,x=r.wsize-b):x=r.wnext-b,b>r.length&&(b=r.length),$=r.window}else $=i,x=l-r.offset,b=r.length;b>d&&(b=d),d-=b,r.length-=b;do i[l++]=$[x++];while(--b);r.length===0&&(r.mode=hr);break;case xo:if(d===0)break e;i[l++]=r.length,d--,r.mode=hr;break;case un:if(r.wrap){for(;c<32;){if(s===0)break e;s--,u|=n[o++]<<c,c+=8}if(_-=d,e.total_out+=_,r.total+=_,r.wrap&4&&_&&(e.adler=r.check=r.flags?q(r.check,i,_,l-_):vt(r.check,i,_,l-_)),_=d,r.wrap&4&&(r.flags?u:Co(u))!==r.check){e.msg="incorrect data check",r.mode=Z;break}u=0,c=0}r.mode=vo;case vo:if(r.wrap&&r.flags){for(;c<32;){if(s===0)break e;s--,u+=n[o++]<<c,c+=8}if(r.wrap&4&&u!==(r.total&4294967295)){e.msg="incorrect length check",r.mode=Z;break}u=0,c=0}r.mode=Eo;case Eo:R=Fl;break e;case Z:R=Qi;break e;case ko:return eo;case $o:default:return se}return e.next_out=l,e.avail_out=d,e.next_in=o,e.avail_in=s,r.hold=u,r.bits=c,(r.wsize||_!==e.avail_out&&r.mode<Z&&(r.mode<un||t!==Ji))&&No(e,e.output,e.next_out,_-e.avail_out),w-=e.avail_in,_-=e.avail_out,e.total_in+=w,e.total_out+=_,r.total+=_,r.wrap&4&&_&&(e.adler=r.check=r.flags?q(r.check,i,_,e.next_out-_):vt(r.check,i,_,e.next_out-_)),e.data_type=r.bits+(r.last?64:0)+(r.mode===Ee?128:0)+(r.mode===ur||r.mode===ln?256:0),(w===0&&_===0||t===Ji)&&R===je&&(R=Ul),R},Gl=e=>{if(He(e))return se;let t=e.state;return t.window&&(t.window=null),e.state=null,je},Wl=(e,t)=>{if(He(e))return se;const r=e.state;return r.wrap&2?(r.head=t,t.done=!1,je):se},Yl=(e,t)=>{const r=t.length;let n,i,o;return He(e)||(n=e.state,n.wrap!==0&&n.mode!==lr)?se:n.mode===lr&&(i=1,i=vt(i,t,r,0),i!==n.check)?Qi:(o=No(e,t,r,r),o?(n.mode=ko,eo):(n.havedict=1,je))};var ql=Ao,Xl=To,Kl=So,Jl=Zl,Ql=Bo,eu=Hl,tu=Gl,ru=Wl,nu=Yl,iu="pako inflate (from Nodeca project)",ke={inflateReset:ql,inflateReset2:Xl,inflateResetKeep:Kl,inflateInit:Jl,inflateInit2:Ql,inflate:eu,inflateEnd:tu,inflateGetHeader:ru,inflateSetDictionary:nu,inflateInfo:iu};function ou(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var au=ou;const Ro=Object.prototype.toString,{Z_NO_FLUSH:su,Z_FINISH:fu,Z_OK:Nt,Z_STREAM_END:dn,Z_NEED_DICT:pn,Z_STREAM_ERROR:lu,Z_DATA_ERROR:Oo,Z_MEM_ERROR:uu}=Et;function Rt(e){this.options=ir.assign({chunkSize:1024*64,windowBits:15,to:""},e||{});const t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,t.windowBits===0&&(t.windowBits=-15)),t.windowBits>=0&&t.windowBits<16&&!(e&&e.windowBits)&&(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&(t.windowBits&15||(t.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new ji,this.strm.avail_out=0;let r=ke.inflateInit2(this.strm,t.windowBits);if(r!==Nt)throw new Error(et[r]);if(this.header=new au,ke.inflateGetHeader(this.strm,this.header),t.dictionary&&(typeof t.dictionary=="string"?t.dictionary=Bt.string2buf(t.dictionary):Ro.call(t.dictionary)==="[object ArrayBuffer]"&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(r=ke.inflateSetDictionary(this.strm,t.dictionary),r!==Nt)))throw new Error(et[r])}Rt.prototype.push=function(e,t){const r=this.strm,n=this.options.chunkSize,i=this.options.dictionary;let o,l,s;if(this.ended)return!1;for(t===~~t?l=t:l=t===!0?fu:su,Ro.call(e)==="[object ArrayBuffer]"?r.input=new Uint8Array(e):r.input=e,r.next_in=0,r.avail_in=r.input.length;;){for(r.avail_out===0&&(r.output=new Uint8Array(n),r.next_out=0,r.avail_out=n),o=ke.inflate(r,l),o===pn&&i&&(o=ke.inflateSetDictionary(r,i),o===Nt?o=ke.inflate(r,l):o===Oo&&(o=pn));r.avail_in>0&&o===dn&&r.state.wrap>0&&e[r.next_in]!==0;)ke.inflateReset(r),o=ke.inflate(r,l);switch(o){case lu:case Oo:case pn:case uu:return this.onEnd(o),this.ended=!0,!1}if(s=r.avail_out,r.next_out&&(r.avail_out===0||o===dn))if(this.options.to==="string"){let d=Bt.utf8border(r.output,r.next_out),u=r.next_out-d,c=Bt.buf2string(r.output,d);r.next_out=u,r.avail_out=n-u,u&&r.output.set(r.output.subarray(d,d+u),0),this.onData(c)}else this.onData(r.output.length===r.next_out?r.output:r.output.subarray(0,r.next_out));if(!(o===Nt&&s===0)){if(o===dn)return o=ke.inflateEnd(this.strm),this.onEnd(o),this.ended=!0,!0;if(r.avail_in===0)break}}return!0},Rt.prototype.onData=function(e){this.chunks.push(e)},Rt.prototype.onEnd=function(e){e===Nt&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=ir.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};function gn(e,t){const r=new Rt(t);if(r.push(e),r.err)throw r.msg||et[r.err];return r.result}function hu(e,t){return t=t||{},t.raw=!0,gn(e,t)}var cu=Rt,du=gn,pu=hu,gu=gn,bu=Et,_u={Inflate:cu,inflate:du,inflateRaw:pu,ungzip:gu,constants:bu};const{Inflate:bh,inflate:_h,inflateRaw:wu,ungzip:wh}=_u;var mu=wu;function yu(e){return mu(e.subarray(2))}class xu extends Error{constructor(t){super(t),this.code="ERR_ABORTED"}}function vu(e){e.sort((i,o)=>Number(i.offset)-Number(o.offset));const t=[];let r,n;for(const i of e)r&&n&&Number(i.offset)-n<=2e3?(r.length=BigInt(Number(r.length)+Number(i.length)-n+Number(i.offset)),r.blocks.push(i)):t.push(r={blocks:[i],length:i.length,offset:i.offset}),n=Number(r.offset)+Number(r.length);return t}function cr(e){if(e&&e.aborted)if(typeof DOMException>"u"){const t=new xu("aborted");throw t.code="ERR_ABORTED",t}else throw new DOMException("aborted","AbortError")}const Eu=1,ku=2,$u=3;function bn(e,t,r,n){return e<n&&t>=r}function Cu(e){const t=e?"big":"little",r=new U().endianess(t).uint32("chromId").uint32("start").uint32("end").uint32("validCnt").floatle("minScore").floatle("maxScore").floatle("sumData").floatle("sumSqData").saveOffset("offset"),n=new U().endianess(t).uint8("isLeaf").skip(1).uint16("cnt").choice({tag:"isLeaf",choices:{1:new U().endianess(t).array("blocksToFetch",{length:"cnt",type:new U().endianess(t).uint32("startChrom").uint32("startBase").uint32("endChrom").uint32("endBase").uint64("blockOffset").uint64("blockSize").saveOffset("offset")}),0:new U().array("recurOffsets",{length:"cnt",type:new U().endianess(t).uint32("startChrom").uint32("startBase").uint32("endChrom").uint32("endBase").uint64("blockOffset").saveOffset("offset")})}}),i=new U().endianess(t).uint32("chromId").int32("start").int32("end").string("rest",{zeroTerminated:!0}).saveOffset("offset");return{bigWigParser:new U().endianess(t).skip(4).int32("blockStart").skip(4).uint32("itemStep").uint32("itemSpan").uint8("blockType").skip(1).uint16("itemCount").choice({tag:"blockType",choices:{[$u]:new U().array("items",{length:"itemCount",type:new U().floatle("score")}),[ku]:new U().array("items",{length:"itemCount",type:new U().endianess(t).int32("start").floatle("score")}),[Eu]:new U().array("items",{length:"itemCount",type:new U().endianess(t).int32("start").int32("end").floatle("score")})}}),bigBedParser:i,summaryParser:r,leafParser:n}}class Mo{constructor(t,r,n,i,o,l){if(this.bbi=t,this.refsByName=r,this.cirTreeOffset=n,this.isBigEndian=i,this.isCompressed=o,this.blockType=l,this.featureCache=new Ys({cache:new Xs({maxSize:1e3}),fill:async(d,u)=>{const c=Number(d.length),w=Number(d.offset),{buffer:_}=await this.bbi.read($e.Buffer.alloc(c),0,c,w,{signal:u});return _}}),!(n>=0))throw new Error("invalid cirTreeOffset!");const s=Cu(i);this.leafParser=s.leafParser,this.bigBedParser=s.bigBedParser}async readWigData(t,r,n,i,o){try{const{refsByName:l,bbi:s,cirTreeOffset:d,isBigEndian:u}=this,c=l[t];c===void 0&&i.complete();const w={chrId:c,start:r,end:n};this.cirTreePromise||(this.cirTreePromise=s.read($e.Buffer.alloc(48),0,48,Number(d),o));const{buffer:_}=await this.cirTreePromise,b=u?_.readUInt32BE(4):_.readUInt32LE(4);let x=[],$=0;const N=(E,T,O)=>{try{const S=E.subarray(T),R=this.leafParser.parse(S);if(R.blocksToFetch&&(x=x.concat(R.blocksToFetch.filter(y=>A(y)).map(y=>({offset:y.blockOffset,length:y.blockSize})))),R.recurOffsets){const y=R.recurOffsets.filter(C=>A(C)).map(C=>Number(C.blockOffset));y.length>0&&I(y,O+1)}}catch(S){i.error(S)}},A=E=>{const{startChrom:T,startBase:O,endChrom:S,endBase:R}=E;return(T<c||T===c&&O<=n)&&(S>c||S===c&&R>=r)},B=async(E,T,O)=>{try{const S=T.max()-T.min(),R=T.min(),y=await this.featureCache.get(`${S}_${R}`,{length:S,offset:R},o==null?void 0:o.signal);for(const C of E)T.contains(C)&&(N(y,C-R,O),$-=1,$===0&&this.readFeatures(i,x,{...o,request:w}))}catch(S){i.error(S)}},I=(E,T)=>{try{$+=E.length;const O=4+Number(b)*32;let S=new Ce(E[0],E[0]+O);for(let R=1;R<E.length;R+=1){const y=new Ce(E[R],E[R]+O);S=S.union(y)}S.getRanges().map(R=>B(E,R,T))}catch(O){i.error(O)}};return I([Number(d)+48],1)}catch(l){i.error(l)}}parseSummaryBlock(t,r,n){const i=[];let o=r;const l=new DataView(t.buffer,t.byteOffset,t.length);for(;o<t.byteLength;){const s=l.getUint32(o,!0);o+=4;const d=l.getUint32(o,!0);o+=4;const u=l.getUint32(o,!0);o+=4;const c=l.getUint32(o,!0);o+=4;const w=l.getFloat32(o,!0);o+=4;const _=l.getFloat32(o,!0);o+=4;const b=l.getFloat32(o,!0);o+=4,o+=4,(!n||s===n.chrId&&bn(d,u,n.start,n.end))&&i.push({start:d,end:u,maxScore:_,minScore:w,summary:!0,score:b/(c||1)})}return i}parseBigBedBlock(t,r,n,i){const o=[];let l=r;for(;l<t.byteLength;){const s=this.bigBedParser.parse(t.subarray(l));o.push({...s,uniqueId:`bb-${n+l}`}),l+=s.offset}return i?o.filter(s=>bn(s.start,s.end,i.start,i.end)):o}parseBigWigBlock(t,r,n){const i=t.subarray(r),o=new DataView(i.buffer,i.byteOffset,i.length);let l=0;l+=4;const s=o.getInt32(l,!0);l+=8;const d=o.getUint32(l,!0);l+=4;const u=o.getUint32(l,!0);l+=4;const c=o.getUint8(l);l+=2;const w=o.getUint16(l,!0);l+=2;const _=new Array(w);switch(c){case 1:{for(let b=0;b<w;b++){const x=o.getInt32(l,!0);l+=4;const $=o.getInt32(l,!0);l+=4;const N=o.getFloat32(l,!0);l+=4,_[b]={start:x,end:$,score:N}}break}case 2:{for(let b=0;b<w;b++){const x=o.getInt32(l,!0);l+=4;const $=o.getFloat32(l,!0);l+=4,_[b]={score:$,start:x,end:x+u}}break}case 3:{for(let b=0;b<w;b++){const x=o.getFloat32(l,!0);l+=4;const $=s+b*d;_[b]={score:x,start:$,end:$+u}}break}}return n?_.filter(b=>bn(b.start,b.end,n.start,n.end)):_}async readFeatures(t,r,n={}){try{const{blockType:i,isCompressed:o}=this,{signal:l,request:s}=n,d=vu(r);cr(l),await Promise.all(d.map(async u=>{cr(l);const{length:c,offset:w}=u,_=await this.featureCache.get(`${c}_${w}`,u,l);for(const b of u.blocks){cr(l);let x=Number(b.offset)-Number(u.offset),$=_;switch(o&&($=yu(_.subarray(x)),x=0),cr(l),i){case"summary":{t.next(this.parseSummaryBlock($,x,s));break}case"bigwig":{t.next(this.parseBigWigBlock($,x,s));break}case"bigbed":{t.next(this.parseBigBedBlock($,x,Number(b.offset)*(1<<8),s));break}default:console.warn(`Don't know what to do with ${i}`)}}})),t.complete()}catch(i){t.error(i)}}}var Su={};class Fo{async getBufferFromResponse(t){if(typeof t.buffer=="function")return t.buffer();if(typeof t.arrayBuffer=="function"){const r=await t.arrayBuffer();return $e.Buffer.from(r)}else throw new TypeError("invalid HTTP response object, has no buffer method, and no arrayBuffer method")}constructor(t,r={}){this.baseOverrides={},this.url=t;const n=r.fetch||globalThis.fetch.bind(globalThis);if(!n)throw new TypeError("no fetch function supplied, and none found in global environment");r.overrides&&(this.baseOverrides=r.overrides),this.fetchImplementation=n}async fetch(t,r){let n;try{n=await this.fetchImplementation(t,r)}catch(i){if(`${i}`.includes("Failed to fetch"))console.warn(`generic-filehandle: refetching ${t} to attempt to work around chrome CORS header caching bug`),n=await this.fetchImplementation(t,{...r,cache:"reload"});else throw i}return n}async read(t,r=0,n,i=0,o={}){const{headers:l={},signal:s,overrides:d={}}=o;n<1/0?l.range=`bytes=${i}-${i+n}`:n===1/0&&i!==0&&(l.range=`bytes=${i}-`);const u={...this.baseOverrides,...d,headers:{...l,...d.headers,...this.baseOverrides.headers},method:"GET",redirect:"follow",mode:"cors",signal:s},c=await this.fetch(this.url,u);if(!c.ok)throw new Error(`HTTP ${c.status} ${c.statusText} ${this.url}`);if(c.status===200&&i===0||c.status===206){const w=await this.getBufferFromResponse(c),_=w.copy(t,r,0,Math.min(n,w.length)),b=c.headers.get("content-range"),x=/\/(\d+)$/.exec(b||"");return x&&x[1]&&(this._stat={size:parseInt(x[1],10)}),{bytesRead:_,buffer:t}}throw c.status===200?new Error("${this.url} fetch returned status 200, expected 206"):new Error(`HTTP ${c.status} fetching ${this.url}`)}async readFile(t={}){let r,n;typeof t=="string"?(r=t,n={}):(r=t.encoding,n=t,delete n.encoding);const{headers:i={},signal:o,overrides:l={}}=n,s={headers:i,method:"GET",redirect:"follow",mode:"cors",signal:o,...this.baseOverrides,...l},d=await this.fetch(this.url,s);if(!d)throw new Error("generic-filehandle failed to fetch");if(d.status!==200)throw Object.assign(new Error(`HTTP ${d.status} fetching ${this.url}`),{status:d.status});if(r==="utf8")return d.text();if(r)throw new Error(`unsupported encoding: ${r}`);return this.getBufferFromResponse(d)}async stat(){if(!this._stat){const t=$e.Buffer.allocUnsafe(10);if(await this.read(t,0,10,0),!this._stat)throw new Error(`unable to determine size of file at ${this.url}`)}return this._stat}async close(){}}var _n=function(e,t){return _n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},_n(e,t)};function wn(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");_n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}function zo(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function dr(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,o=[],l;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){l={error:s}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(l)throw l.error}}return o}function pr(e,t,r){if(r||arguments.length===2)for(var n=0,i=t.length,o;n<i;n++)(o||!(n in t))&&(o||(o=Array.prototype.slice.call(t,0,n)),o[n]=t[n]);return e.concat(o||Array.prototype.slice.call(t))}typeof SuppressedError=="function"&&SuppressedError;function we(e){return typeof e=="function"}function Uo(e){var t=function(n){Error.call(n),n.stack=new Error().stack},r=e(t);return r.prototype=Object.create(Error.prototype),r.prototype.constructor=r,r}var mn=Uo(function(e){return function(r){e(this),this.message=r?r.length+` errors occurred during unsubscription:
`+r.map(function(n,i){return i+1+") "+n.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=r}});function Lo(e,t){if(e){var r=e.indexOf(t);0<=r&&e.splice(r,1)}}var yn=function(){function e(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}return e.prototype.unsubscribe=function(){var t,r,n,i,o;if(!this.closed){this.closed=!0;var l=this._parentage;if(l)if(this._parentage=null,Array.isArray(l))try{for(var s=zo(l),d=s.next();!d.done;d=s.next()){var u=d.value;u.remove(this)}}catch($){t={error:$}}finally{try{d&&!d.done&&(r=s.return)&&r.call(s)}finally{if(t)throw t.error}}else l.remove(this);var c=this.initialTeardown;if(we(c))try{c()}catch($){o=$ instanceof mn?$.errors:[$]}var w=this._finalizers;if(w){this._finalizers=null;try{for(var _=zo(w),b=_.next();!b.done;b=_.next()){var x=b.value;try{Do(x)}catch($){o=o??[],$ instanceof mn?o=pr(pr([],dr(o)),dr($.errors)):o.push($)}}}catch($){n={error:$}}finally{try{b&&!b.done&&(i=_.return)&&i.call(_)}finally{if(n)throw n.error}}}if(o)throw new mn(o)}},e.prototype.add=function(t){var r;if(t&&t!==this)if(this.closed)Do(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=(r=this._finalizers)!==null&&r!==void 0?r:[]).push(t)}},e.prototype._hasParent=function(t){var r=this._parentage;return r===t||Array.isArray(r)&&r.includes(t)},e.prototype._addParent=function(t){var r=this._parentage;this._parentage=Array.isArray(r)?(r.push(t),r):r?[r,t]:t},e.prototype._removeParent=function(t){var r=this._parentage;r===t?this._parentage=null:Array.isArray(r)&&Lo(r,t)},e.prototype.remove=function(t){var r=this._finalizers;r&&Lo(r,t),t instanceof e&&t._removeParent(this)},e.EMPTY=function(){var t=new e;return t.closed=!0,t}(),e}();yn.EMPTY;function Po(e){return e instanceof yn||e&&"closed"in e&&we(e.remove)&&we(e.add)&&we(e.unsubscribe)}function Do(e){we(e)?e():e.unsubscribe()}var Vo={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},xn={setTimeout:function(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];var i=xn.delegate;return i!=null&&i.setTimeout?i.setTimeout.apply(i,pr([e,t],dr(r))):setTimeout.apply(void 0,pr([e,t],dr(r)))},clearTimeout:function(e){var t=xn.delegate;return((t==null?void 0:t.clearTimeout)||clearTimeout)(e)},delegate:void 0};function Au(e){xn.setTimeout(function(){throw e})}function Zo(){}function Tu(e){e()}var vn=function(e){wn(t,e);function t(r){var n=e.call(this)||this;return n.isStopped=!1,r?(n.destination=r,Po(r)&&r.add(n)):n.destination=Ru,n}return t.create=function(r,n,i){return new gr(r,n,i)},t.prototype.next=function(r){this.isStopped||this._next(r)},t.prototype.error=function(r){this.isStopped||(this.isStopped=!0,this._error(r))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this),this.destination=null)},t.prototype._next=function(r){this.destination.next(r)},t.prototype._error=function(r){try{this.destination.error(r)}finally{this.unsubscribe()}},t.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},t}(yn),Bu=Function.prototype.bind;function En(e,t){return Bu.call(e,t)}var Iu=function(){function e(t){this.partialObserver=t}return e.prototype.next=function(t){var r=this.partialObserver;if(r.next)try{r.next(t)}catch(n){br(n)}},e.prototype.error=function(t){var r=this.partialObserver;if(r.error)try{r.error(t)}catch(n){br(n)}else br(t)},e.prototype.complete=function(){var t=this.partialObserver;if(t.complete)try{t.complete()}catch(r){br(r)}},e}(),gr=function(e){wn(t,e);function t(r,n,i){var o=e.call(this)||this,l;if(we(r)||!r)l={next:r??void 0,error:n??void 0,complete:i??void 0};else{var s;o&&Vo.useDeprecatedNextContext?(s=Object.create(r),s.unsubscribe=function(){return o.unsubscribe()},l={next:r.next&&En(r.next,s),error:r.error&&En(r.error,s),complete:r.complete&&En(r.complete,s)}):l=r}return o.destination=new Iu(l),o}return t}(vn);function br(e){Au(e)}function Nu(e){throw e}var Ru={closed:!0,next:Zo,error:Nu,complete:Zo},Ou=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function Mu(e){return e}function Fu(e){return e.length===0?Mu:e.length===1?e[0]:function(r){return e.reduce(function(n,i){return i(n)},r)}}var zu=function(){function e(t){t&&(this._subscribe=t)}return e.prototype.lift=function(t){var r=new e;return r.source=this,r.operator=t,r},e.prototype.subscribe=function(t,r,n){var i=this,o=Lu(t)?t:new gr(t,r,n);return Tu(function(){var l=i,s=l.operator,d=l.source;o.add(s?s.call(o,d):d?i._subscribe(o):i._trySubscribe(o))}),o},e.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(r){t.error(r)}},e.prototype.forEach=function(t,r){var n=this;return r=jo(r),new r(function(i,o){var l=new gr({next:function(s){try{t(s)}catch(d){o(d),l.unsubscribe()}},error:o,complete:i});n.subscribe(l)})},e.prototype._subscribe=function(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)},e.prototype[Ou]=function(){return this},e.prototype.pipe=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return Fu(t)(this)},e.prototype.toPromise=function(t){var r=this;return t=jo(t),new t(function(n,i){var o;r.subscribe(function(l){return o=l},function(l){return i(l)},function(){return n(o)})})},e.create=function(t){return new e(t)},e}();function jo(e){var t;return(t=e??Vo.Promise)!==null&&t!==void 0?t:Promise}function Uu(e){return e&&we(e.next)&&we(e.error)&&we(e.complete)}function Lu(e){return e&&e instanceof vn||Uu(e)&&Po(e)}function Pu(e){return we(e==null?void 0:e.lift)}function Ho(e){return function(t){if(Pu(t))return t.lift(function(r){try{return e(r,this)}catch(n){this.error(n)}});throw new TypeError("Unable to lift unknown Observable type")}}function Du(e,t,r,n,i){return new Vu(e,t,r,n,i)}var Vu=function(e){wn(t,e);function t(r,n,i,o,l,s){var d=e.call(this,r)||this;return d.onFinalize=l,d.shouldUnsubscribe=s,d._next=n?function(u){try{n(u)}catch(c){r.error(c)}}:e.prototype._next,d._error=o?function(u){try{o(u)}catch(c){r.error(c)}finally{this.unsubscribe()}}:e.prototype._error,d._complete=i?function(){try{i()}catch(u){r.error(u)}finally{this.unsubscribe()}}:e.prototype._complete,d}return t.prototype.unsubscribe=function(){var r;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var n=this.closed;e.prototype.unsubscribe.call(this),!n&&((r=this.onFinalize)===null||r===void 0||r.call(this))}},t}(vn),Zu=Uo(function(e){return function(){e(this),this.name="EmptyError",this.message="no elements in sequence"}});function ju(e,t){var r=typeof t=="object";return new Promise(function(n,i){var o=new gr({next:function(l){n(l),o.unsubscribe()},error:i,complete:function(){r?n(t.defaultValue):i(new Zu)}});e.subscribe(o)})}function Hu(e,t,r,n,i){return function(o,l){var s=r,d=t,u=0;o.subscribe(Du(l,function(c){var w=u++;d=s?e(d,c,w):(s=!0,c),n&&l.next(d)},i&&function(){s&&l.next(d),l.complete()}))}}function Gu(e,t){return Ho(Hu(e,t,arguments.length>=2,!1,!0))}var Wu=function(e,t){return e.push(t),e};function Yu(){return Ho(function(e,t){Gu(Wu,[])(e).subscribe(t)})}const Go=-2003829722,kn=-2021002517;function qu(e){return new TextDecoder().decode(e)}function Wo(e){const t=e?"big":"little",r=new U().endianess(t).int32("magic").uint16("version").uint16("numZoomLevels").uint64("chromTreeOffset").uint64("unzoomedDataOffset").uint64("unzoomedIndexOffset").uint16("fieldCount").uint16("definedFieldCount").uint64("asOffset").uint64("totalSummaryOffset").uint32("uncompressBufSize").uint64("extHeaderOffset").array("zoomLevels",{length:"numZoomLevels",type:new U().endianess(t).uint32("reductionLevel").uint32("reserved").uint64("dataOffset").uint64("indexOffset")}),n=new U().endianess(t).uint64("basesCovered").doublele("scoreMin").doublele("scoreMax").doublele("scoreSum").doublele("scoreSumSquares"),i=new U().endianess(t).uint32("magic").uint32("blockSize").uint32("keySize").uint32("valSize").uint64("itemCount"),o=new U().endianess(t).uint8("isLeafNode").skip(1).uint16("cnt").saveOffset("offset");return{chromTreeParser:i,totalSummaryParser:n,headerParser:r,isLeafNode:o}}class Xu{getHeader(t){return this.headerP||(this.headerP=this._getHeader(t).catch(r=>{throw this.headerP=void 0,r})),this.headerP}constructor(t){const{filehandle:r,renameRefSeqs:n=l=>l,path:i,url:o}=t;if(this.renameRefSeqs=n,r)this.bbi=r;else if(o)this.bbi=new Fo(o);else if(i)this.bbi=new Su(i);else throw new Error("no file given")}async _getHeader(t){const r=await this._getMainHeader(t),n=await this._readChromTree(r,t);return{...r,...n}}async _getMainHeader(t,r=2e3){const{buffer:n}=await this.bbi.read($e.Buffer.alloc(r),0,r,0,t),i=this._isBigEndian(n),o=Wo(i),l=o.headerParser.parse(n),{magic:s,asOffset:d,totalSummaryOffset:u}=l;if(l.fileType=s===kn?"bigbed":"bigwig",d>r||u>r)return this._getMainHeader(t,r*2);if(d){const c=Number(l.asOffset);l.autoSql=qu(n.subarray(c,n.indexOf(0,c)))}if(l.totalSummaryOffset>r-8*5)return this._getMainHeader(t,r*2);if(l.totalSummaryOffset){const c=n.subarray(Number(l.totalSummaryOffset)),w=o.totalSummaryParser.parse(c);l.totalSummary={...w,basesCovered:Number(w.basesCovered)}}return{...l,isBigEndian:i}}_isBigEndian(t){let r=t.readInt32LE(0);if(r===Go||r===kn)return!1;if(r=t.readInt32BE(0),r===Go||r===kn)return!0;throw new Error("not a BigWig/BigBed file")}async _readChromTree(t,r){const n=t.isBigEndian,i=n?"big":"little",o=[],l={};let s=Number(t.unzoomedDataOffset);const d=Number(t.chromTreeOffset);for(;s%4!==0;)s+=1;const u=s-d,{buffer:c}=await this.bbi.read($e.Buffer.alloc(u),0,u,Number(d),r),w=Wo(n),{keySize:_}=w.chromTreeParser.parse(c),b=new U().endianess(i).string("key",{stripNull:!0,length:_}).uint32("refId").uint32("refSize").saveOffset("offset"),x=new U().endianess(i).skip(_).uint64("childOffset").saveOffset("offset"),$=32,N=async A=>{let B=A;if(B>=c.length)throw new Error("reading beyond end of buffer");const I=w.isLeafNode.parse(c.subarray(B)),{isLeafNode:E,cnt:T}=I;if(B+=I.offset,E)for(let O=0;O<T;O+=1){const S=b.parse(c.subarray(B));B+=S.offset;const{key:R,refId:y,refSize:C}=S,k={name:R,id:y,length:C};l[this.renameRefSeqs(R)]=y,o[y]=k}else{const O=[];for(let S=0;S<T;S+=1){const R=x.parse(c.subarray(B)),{childOffset:y}=R;B+=R.offset,O.push(N(Number(y)-Number(d)))}await Promise.all(O)}};return await N($),{refsByName:l,refsByNumber:o}}async getUnzoomedView(t){const{unzoomedIndexOffset:r,refsByName:n,uncompressBufSize:i,isBigEndian:o,fileType:l}=await this.getHeader(t);return new Mo(this.bbi,n,r,o,i>0,l)}async getFeatureStream(t,r,n,i){await this.getHeader(i);const o=this.renameRefSeqs(t);let l;const{basesPerSpan:s,scale:d}=i||{};return s?l=await this.getView(1/s,i):d?l=await this.getView(d,i):l=await this.getView(1,i),new zu(u=>{l.readWigData(o,r,n,u,i)})}async getFeatures(t,r,n,i){const o=await this.getFeatureStream(t,r,n,i);return(await ju(o.pipe(Yu()))).flat()}}class Ku extends Xu{async getView(t,r){const{zoomLevels:n,refsByName:i,fileSize:o,isBigEndian:l,uncompressBufSize:s}=await this.getHeader(r),d=1/t;let u=n.length;o||(u-=1);for(let c=u;c>=0;c-=1){const w=n[c];if(w&&w.reductionLevel<=2*d){const _=Number(w.indexOffset);return new Mo(this.bbi,i,_,l,s>0,"summary")}}return this.getUnzoomedView(r)}}globalThis.Buffer=$e.Buffer;const Ju=async(e,t,r,n,i,o,l,s,d,u,c)=>{console.log("start getbw"),console.log(s,d);const w=new Fo(t),_=new Ku({filehandle:w}),b=e.getContext("2d"),x=await _.getFeatures(n,i,o,{scale:l}),$=Qu(x,r,n,i,o,l,s,d,u,c,b,e);return console.img($),$};function Qu(e,t,r,n,i,o,l,s,d,u,c,w){console.log("start drawCustomChart"),console.log(l,s);let _=th(l,e).drawData[0].data;_.length>1e3&&(console.log(">10000"),_=eh(_,1e3,"pos","score")),console.log(_[0]);const b=$a(_,function(B){return B.score}),x=Ca(_,function(B){return B.score});var $=ii().domain([n,i]).range([0,l]),N=oi().range([d.zero_rgba,d.min_rgba,d.max_rgba]).domain([0,x,b]).nice(200);return _.forEach(function(B){var I=$(B.pos);N(B.score),c.fillStyle="red",c.fillRect(I,50,5,200)}),c.fillStyle="red",c.fillRect(694.643589617448,40,1,40),c.fillRect(30,40,1,40),console.log(w.transferToImageBitmap()),console.img(w),w.transferToImageBitmap()}function eh(e,t,r,n){n=n||0,r=r||1;var i=Math.floor,o=Math.abs,l=e.length;if(t>=l||t===0)return e;var s=[],d=0,u=(l-2)/(t-2),c=0,w,_,b;s[d++]=e[c];for(var x=0;x<t-2;x++){for(var $=0,N=0,A=i((x+1)*u)+1,B=i((x+2)*u)+1,B=B<l?B:l,I=B-A;A<B;A++)$+=+e[A][r],N+=+e[A][n];for(var $=$/I,N=N/I,A=i((x+0)*u)+1,B=i((x+1)*u)+1,I=+e[c][r],E=+e[c][n],c=-1;A<B;A++)typeof e[A]<"u"&&(_=.5*o((I-$)*(e[A][n]-E)-(I-e[A][r])*(N-E)),_>c&&(c=_,w=e[A],b=A));s[d++]=w,c=b}return s[d++]=e[l-1],s}const th=(e,t)=>({drawData:[{data:t.map(i=>{const o=(i.start+i.end)/2,l=i.score;return{pos:o,score:l}})}]});ga(Ju)})();
